!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t,e,n){t.$$.on_destroy.push(s(e,n))}function a(t,e,n,r){if(t){const o=c(t,e,n,r);return t[0](o)}}function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r,o,i,s){const l=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(l){const o=c(e,n,r,s);t.p(o,l)}}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function y(){return g(" ")}function _(){return g("")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function w(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function E(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let S;function C(t){S=t}function T(){if(!S)throw new Error("Function called outside component initialization");return S}function k(t,e){T().$$.context.set(t,e)}function O(t){return T().$$.context.get(t)}const I=[],R=[],M=[],A=[],N=Promise.resolve();let L=!1;function D(t){M.push(t)}let j=!1;const q=new Set;function B(){if(!j){j=!0;do{for(let t=0;t<I.length;t+=1){const e=I[t];C(e),P(e.$$)}for(C(null),I.length=0;R.length;)R.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];q.has(e)||(q.add(e),e())}M.length=0}while(I.length);for(;A.length;)A.pop()();L=!1,j=!1,q.clear()}}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const F=new Set;let H;function U(){H={r:0,c:[],p:H}}function G(){H.r||r(H.c),H=H.p}function W(t,e){t&&t.i&&(F.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),H.c.push((()=>{F.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const V="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Y(t,e){z(t,1,1,(()=>{e.delete(t.key)}))}function J(t){t&&t.c()}function K(t,n,i,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,i),s||D((()=>{const n=a.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(D)}function X(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(I.push(t),L||(L=!0,N.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,o,i,s,l,a,c=[-1]){const u=S;C(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let f=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&Q(e,t)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&W(e.$$.fragment),K(e,o.target,o.anchor,o.customElement),B()}C(u)}class tt{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et=[];function nt(e,n=t){let r;const o=[];function s(t){if(i(e,t)&&(e=t,r)){const t=!et.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),et.push(n,e)}if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,l=t){const a=[i,l];return o.push(a),1===o.length&&(r=n(s)||t),i(e),()=>{const t=o.indexOf(a);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const rt=new Map([["AMMO","item"],["GUN","item"],["ARMOR","item"],["PET_ARMOR","item"],["TOOL","item"],["TOOLMOD","item"],["TOOL_ARMOR","item"],["BOOK","item"],["COMESTIBLE","item"],["ENGINE","item"],["WHEEL","item"],["GUNMOD","item"],["MAGAZINE","item"],["BATTERY","item"],["GENERIC","item"],["BIONIC_ITEM","item"],["MONSTER","monster"],["uncraft","recipe"]]),ot=t=>{var e;return null!==(e=rt.get(t))&&void 0!==e?e:t},it=t=>"string"==typeof t?t:"str_sp"in t?t.str_sp:t.str,st=t=>{var e,n;return it(null!==(n=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract)},lt=t=>{var e,n,r;return"string"==typeof(r=null!==(n=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract)?r+"s":"str_sp"in r?r.str_sp:"str_pl"in r?r.str_pl:r.str+"s"};function at(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}function ct(t){return void 0===t?0:"number"==typeof t?250*t:t.endsWith("ml")?parseInt(t):t.endsWith("L")?1e3*parseInt(t):void 0}function ut(t){return void 0===t?0:"number"==typeof t?t:t.endsWith("mg")?parseInt(t)/1e3:t.endsWith("kg")?1e3*parseInt(t):t.endsWith("g")?parseInt(t):void 0}function dt(t){return`${(ct(t)/1e3).toFixed(2)} L`}function ft(t){return`${(ut(t)/1e3).toFixed(2)} kg`}class pt{constructor(t,e,n){this._byType=new Map,this._byTypeById=new Map,this._abstractsByType=new Map,this._craftingPseudoItems=new Map,this._migrations=new Map,this._flattenCache=new Map,this._cachedDeathDrops=new Map,this._cachedMapgenSpawnItems=new Map,this._flattenItemGroupCache=new WeakMap,this._flatRequirementCache=new WeakMap,this._flatRequirementCacheExpandSubs=new WeakMap,this._flatRequirementCacheOnlyRecoverable=new WeakMap,this.release=n,this.build_number=e,this._raw=t;for(const e of t){if(!Object.hasOwnProperty.call(e,"type"))continue;if("MIGRATION"===e.type){for(const t of"string"==typeof e.id?[e.id]:e.id){const{replace:n}=e;this._migrations.set(t,n)}continue}const t=ot(e.type);if(this._byType.has(t)||this._byType.set(t,[]),this._byType.get(t).push(e),Object.hasOwnProperty.call(e,"id"))if(this._byTypeById.has(t)||this._byTypeById.set(t,new Map),"string"==typeof e.id)this._byTypeById.get(t).set(e.id,e);else if(Array.isArray(e.id))for(const n of e.id)this._byTypeById.get(t).set(n,e);if("recipe"===t&&Object.hasOwnProperty.call(e,"result")){this._byTypeById.has(t)||this._byTypeById.set(t,new Map);const n=e.result+(e.id_suffix?"_"+e.id_suffix:"");this._byTypeById.get(t).set(n,e)}if("monstergroup"===t&&Object.hasOwnProperty.call(e,"name")){this._byTypeById.has(t)||this._byTypeById.set(t,new Map);const n=e.name;this._byTypeById.get(t).set(n,e)}Object.hasOwnProperty.call(e,"abstract")&&(this._abstractsByType.has(t)||this._abstractsByType.set(t,new Map),this._abstractsByType.get(t).set(e.abstract,e)),Object.hasOwnProperty.call(e,"crafting_pseudo_item")&&this._craftingPseudoItems.set(e.crafting_pseudo_item,e.id)}}byId(t,e){var n;if("string"!=typeof e)throw new Error("Requested non-string id");if("item"===t&&this._migrations.has(e))return this.byId(t,this._migrations.get(e));const r=null===(n=this._byTypeById.get(t))||void 0===n?void 0:n.get(e);return r?this._flatten(r):void 0}byType(t){var e;return null!==(e=this._byType.get(t).map((t=>this._flatten(t))))&&void 0!==e?e:[]}replacementTools(t){var e;if(!this._toolReplacements){this._toolReplacements=new Map;for(const t of this.byType("item"))"TOOL"===t.type&&Object.hasOwnProperty.call(t,"sub")&&(this._toolReplacements.has(t.sub)||this._toolReplacements.set(t.sub,[]),this._toolReplacements.get(t.sub).push(t.id))}return null!==(e=this._toolReplacements.get(t))&&void 0!==e?e:[]}craftingPseudoItem(t){return this._craftingPseudoItems.get(t)}all(){return this._raw}_flatten(t){var e,n,r,o,i,s,l,a,c,u,d,f,p;const m=t;if(this._flattenCache.has(m))return this._flattenCache.get(m);const h="copy-from"in m?null!==(n=null===(e=this._byTypeById.get(ot(m.type)))||void 0===e?void 0:e.get(m["copy-from"]))&&void 0!==n?n:null===(r=this._abstractsByType.get(ot(m.type)))||void 0===r?void 0:r.get(m["copy-from"]):null;if("copy-from"in m&&!h&&console.error(`Missing parent in ${null!==(s=null!==(i=null!==(o=m.id)&&void 0!==o?o:m.abstract)&&void 0!==i?i:m.result)&&void 0!==s?s:JSON.stringify(m)}`),!h)return this._flattenCache.set(m,m),m;const g={...this._flatten(h),...m};for(const t of Object.keys(null!==(l=g.relative)&&void 0!==l?l:{}))"number"==typeof g.relative[t]&&(g[t]=(null!==(a=g[t])&&void 0!==a?a:0)+g.relative[t]);delete g.relative;for(const t of Object.keys(null!==(c=g.proportional)&&void 0!==c?c:{}))if("number"==typeof g.proportional[t])if("attack_cost"!==t||t in g||(g[t]=100),"string"==typeof g[t]){const e=/^\s*(\d+)\s*(.+)$/.exec(g[t]);if(e){const[,n,r]=e;g[t]=`${Number(n)*g.proportional[t]} ${r}`}}else g[t]*=g.proportional[t],g[t]=0|g[t];delete g.proportional;for(const t of Object.keys(null!==(u=g.extend)&&void 0!==u?u:{}))Array.isArray(g.extend[t])&&(g[t]=(null!==(d=g[t])&&void 0!==d?d:[]).concat(g.extend[t]));delete g.extend;for(const t of Object.keys(null!==(f=g.delete)&&void 0!==f?f:{}))Array.isArray(g.delete[t])&&(g[t]=(null!==(p=g[t])&&void 0!==p?p:[]).filter((e=>!g.delete[t].includes(e))));return this._flattenCache.set(m,g),g}flatDeathDrops(t){if(this._cachedDeathDrops.has(t))return this._cachedDeathDrops.get(t);const e=this.byId("monster",t),n=e.death_drops?mt(this,(t=>{if(t)return"string"==typeof t?this.byId("item_group",t):Array.isArray(t)?{subtype:"distribution",entries:t}:{subtype:"distribution",...t}})(e.death_drops)):[];return n.sort(((t,e)=>e.prob-t.prob)),this._cachedDeathDrops.set(t,n),n}uncraftRecipe(t){let e;for(const n of this.byType("recipe"))if(n.result===t){if("uncraft"===n.type)return n;n.reversible&&(e=n)}return e}mapgenSpawnItems(t){var e,n,r,o,i,s,l;if(this._cachedMapgenSpawnItems.has(t))return this._cachedMapgenSpawnItems.get(t);const a=new Map,c=(t,e)=>{a.has(t)||a.set(t,new Set),a.get(t).add(e)},u=(t,e)=>{const n="string"==typeof e?this.byId("item_group",e):Array.isArray(e)?{subtype:"collection",entries:e}:e;if(n)for(const{id:e}of mt(this,n))c(t,e);else if("string"==typeof e){this.byId("item",e)&&c(t,e)}},d=t=>{var e,n,r,o,i;for(const[n,r]of Object.entries(null!==(e=t.item)&&void 0!==e?e:{})){const t=Array.isArray(r)?r:[r];for(const e of t)c(n,e.item)}for(const[e,r]of Object.entries(null!==(n=t.items)&&void 0!==n?n:{})){const t=Array.isArray(r)?r:[r];for(const n of t)u(e,n.item)}for(const[e,n]of Object.entries(null!==(r=t.sealed_item)&&void 0!==r?r:{})){const t=Array.isArray(n)?n:[n];for(const n of t)(null===(o=n.item)||void 0===o?void 0:o.item)&&c(e,n.item.item),(null===(i=n.items)||void 0===i?void 0:i.item)&&u(e,n.items.item)}};d(t.object);for(const n of null!==(e=t.object.palettes)&&void 0!==e?e:[])"string"==typeof n&&d(this.byId("palette",n));const f=new Set,p=new Set;for(const e of null!==(n=t.object.rows)&&void 0!==n?n:[])for(const t of e)p.add(t);for(const t of p){const e=null!==(r=a.get(t))&&void 0!==r?r:new Set;for(const t of e)f.add(t)}for(const e of null!==(o=t.object.place_item)&&void 0!==o?o:[])f.add(e.item);for(const e of null!==(i=t.object.place_items)&&void 0!==i?i:[]){const t="string"==typeof e.item?this.byId("item_group",e.item):Array.isArray(e.item)?{subtype:"collection",entries:e.item}:e.item;if(t)for(const{id:e}of mt(this,t))f.add(e);else if("string"==typeof e){this.byId("item",e)&&f.add(e)}}for(const e of null!==(s=t.object.place_loot)&&void 0!==s?s:[])if(e.item&&f.add(e.item),e.group)for(const{id:t}of mt(this,this.byId("item_group",e.group)))f.add(t);for(const e of null!==(l=t.object.add)&&void 0!==l?l:[])f.add(e.item);const m=[...f];return this._cachedMapgenSpawnItems.set(t,m),m}flattenItemGroup(t){var e,n,r,o,i;if(this._flattenItemGroupCache.has(t))return this._flattenItemGroupCache.get(t);const s=new Map;function l({id:t,prob:e,count:n}){var r;const{prob:o,count:i}=null!==(r=s.get(t))&&void 0!==r?r:{prob:0,count:[0,0]},l=1-(1-o)*(1-e),a=[n[0]+i[0],n[1]+i[1]];s.set(t,{prob:l,count:a})}function a(...t){t.forEach(l)}t["container-item"]&&a({id:t["container-item"],prob:1,count:[1,1]});const c=[];if("old"!==t.subtype&&t.subtype){for(const n of null!==(e=t.entries)&&void 0!==e?e:[])Array.isArray(n)?c.push({item:n[0],prob:n[1]}):c.push(n);for(const e of null!==(n=t.items)&&void 0!==n?n:[])Array.isArray(e)?c.push({item:e[0],prob:e[1]}):"string"==typeof e?c.push({item:e,prob:100}):c.push(e);for(const e of null!==(r=t.groups)&&void 0!==r?r:[])Array.isArray(e)?c.push({group:e[0],prob:e[1]}):"string"==typeof e?c.push({group:e,prob:100}):c.push(e)}else for(const e of t.items)Array.isArray(e)?c.push({item:e[0],prob:e[1]}):c.push(e);function u(t,e,n){return{id:t.id,prob:t.prob*e,count:[t.count[0]*n[0],t.count[1]*n[1]]}}function d(t){return t.count?"number"==typeof t.count?[t.count,t.count]:t.count:t.charges?"number"==typeof t.charges?[t.charges,t.charges]:t.charges:[1,1]}if("collection"===t.subtype)for(const t of c){const{prob:e=100}=t,n=Math.min(e,100)/100,r=d(t);if("item"in t)a({id:t.item,prob:n,count:r});else if("group"in t)a(...this.flattenItemGroup(this.byId("item_group",t.group)).map((t=>u(t,n,r))));else if("collection"in t)a(...this.flattenItemGroup({subtype:"collection",entries:t.collection}).map((t=>u(t,n,r))));else{if(!("distribution"in t))throw new Error(`unknown item group entry: ${JSON.stringify(t)}`);a(...this.flattenItemGroup({subtype:"distribution",entries:t.distribution}).map((t=>u(t,n,r))))}}else{let t=0;for(const e of c)t+=null!==(o=e.prob)&&void 0!==o?o:100;for(const e of c){const n=(null!==(i=e.prob)&&void 0!==i?i:100)/t,r=d(e);if("item"in e)a({id:e.item,prob:n,count:r});else if("group"in e)a(...this.flattenItemGroup(this.byId("item_group",e.group)).map((t=>u(t,n,r))));else if("collection"in e)a(...this.flattenItemGroup({subtype:"collection",entries:e.collection}).map((t=>u(t,n,r))));else{if(!("distribution"in e))throw new Error(`unknown item group entry: ${JSON.stringify(e)}`);a(...this.flattenItemGroup({subtype:"distribution",entries:e.distribution}).map((t=>u(t,n,r))))}}}const f=[...s.entries()].map((([t,e])=>({id:t,...e})));return this._flattenItemGroupCache.set(t,f),f}_flatRequirementCacheForOpts(t){if((null==t?void 0:t.expandSubstitutes)&&(null==t?void 0:t.onlyRecoverable))throw new Error("didn't expect to see expandSubstitutes && onlyRecoverable");return(null==t?void 0:t.expandSubstitutes)?this._flatRequirementCacheExpandSubs:(null==t?void 0:t.onlyRecoverable)?this._flatRequirementCacheOnlyRecoverable:this._flatRequirementCache}flattenRequirement(t,e,n){const r=this._flatRequirementCacheForOpts(n);if(r.has(t))return r.get(t);const{expandSubstitutes:o=!1,onlyRecoverable:i=!1}=null!=n?n:{},s=o?t=>t.flatMap((t=>function(t,e){const n=t.replacementTools(e.id);return[e,...n.map((t=>({id:t,count:e.count})))]}(this,t))):t=>t,l=gt(t).map((t=>s(ht(this,t,(t=>gt(e(t))),i)))).map((t=>i?t.filter((t=>{var e;return!(null!==(e=this.byId("item",t.id).flags)&&void 0!==e?e:[]).includes("UNRECOVERABLE")})):t)).filter((t=>t.length));return r.set(t,l),l}normalizeRequirements(t){const e="string"==typeof t.using?[[t.using,1]]:t.using,n=(null!=e?e:[]).map((([t,e])=>[this.byId("requirement",t),e])).concat([[t,1]]).filter((t=>t[0]));return{tools:n.flatMap((([t,e])=>{var n;return this.flattenRequirement(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools),{expandSubstitutes:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})),qualities:n.flatMap((([t,e])=>{var n;return(null!==(n=t.qualities)&&void 0!==n?n:[]).map((t=>Array.isArray(t)?t:[t]))})),components:n.flatMap((([t,e])=>{var n;return this.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))}))}}}function mt(t,e){return t.flattenItemGroup(e)}function ht(t,e,n,r=!1){var o;const i=[];for(const s of e)if(Array.isArray(s)){const[e,l,...a]=s,c=a.includes("LIST");if(a.includes("NO_RECOVER")&&r)continue;if(c){const s=t.byId("requirement",e);"requirement"!==s.type&&console.error(`Expected a requirement, got ${s.type} (id=${s.id})`);const a=(null!==(o=n(s))&&void 0!==o?o:[])[0];i.push(...ht(t,a,n,r).map((t=>({...t,count:t.count*l}))))}else i.push({id:e,count:l})}else{if("string"!=typeof s)throw new Error("unexpected choice type");i.push({id:s,count:1})}return i}function gt(t){return t.map((t=>Array.isArray(t)?t:[t]))}const yt=t=>"AMMO"===t.type||"COMESTIBLE"===t.type||t.stackable;let _t=!1;const{subscribe:vt,set:$t}=nt(null),bt={subscribe:vt,setVersion(t){if(_t)throw new Error("can only set version once");_t=!0,(async t=>{const e=await fetch(`https://raw.githubusercontent.com/nornagon/cdda-data/main/data/${t}/all.json`,{mode:"cors"});if(!e.ok)throw new Error(`Error ${e.status} (${e.statusText}) fetching data`);const n=await e.json();return new pt(n.data,n.build_number,n.release)})(t).then($t)}};function xt(e){let n,r,o,i=(e[4]?(e[2]?lt:st)(e[4]):e[1])+"";return{c(){n=h("a"),r=g(i),$(n,"href",o="#/"+e[0]+"/"+e[1])},m(t,e){f(t,n,e),d(n,r)},p(t,e){22&e&&i!==(i=(t[4]?(t[2]?lt:st)(t[4]):t[1])+"")&&b(r,i),3&e&&o!==(o="#/"+t[0]+"/"+t[1])&&$(n,"href",o)},i:t,o:t,d(t){t&&p(n)}}}function wt(t){let e,n,r,o,i=!yt(t[4]),s=yt(t[4]),l=i&&Et(t);r=new It({props:{type:t[0],id:t[1],plural:kt(t[3])&&!yt(t[4])}});let a=s&&St(t);return{c(){e=h("span"),l&&l.c(),n=y(),J(r.$$.fragment),a&&a.c(),w(e,"white-space","nowrap")},m(t,i){f(t,e,i),l&&l.m(e,null),d(e,n),K(r,e,null),a&&a.m(e,null),o=!0},p(t,o){16&o&&(i=!yt(t[4])),i?l?l.p(t,o):(l=Et(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null);const c={};1&o&&(c.type=t[0]),2&o&&(c.id=t[1]),24&o&&(c.plural=kt(t[3])&&!yt(t[4])),r.$set(c),16&o&&(s=yt(t[4])),s?a?a.p(t,o):(a=St(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),l&&l.d(),X(r),a&&a.d()}}}function Et(t){let e,n=Tt(t[3])+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){8&r&&n!==(n=Tt(t[3])+"")&&b(e,n)},d(t){t&&p(e)}}}function St(t){let e,n,r,o,i=Tt(t[3])+"";return{c(){e=g(" "),n=g("("),r=g(i),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){8&e&&i!==(i=Tt(t[3])+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function Ct(t){let e,n,r,o;const i=[wt,xt],s=[];function l(t,e){return null!=t[3]?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function Tt(t){return"number"==typeof t?t.toString():t[0]===t[1]?t[0].toString():`${t[0]}–${t[1]}`}function kt(t){return"number"==typeof t?1!==t:t[0]!==t[1]||1!==t[0]}function Ot(t,e,n){let{type:r}=e,{id:o}=e,{plural:i=!1}=e,{count:s}=e;const l=O("data");let a=l.byId(r,o);return"vehicle_part"===(null==a?void 0:a.type)&&!a.name&&a.item&&(a=l.byId("item",a.item)),t.$$set=t=>{"type"in t&&n(0,r=t.type),"id"in t&&n(1,o=t.id),"plural"in t&&n(2,i=t.plural),"count"in t&&n(3,s=t.count)},[r,o,i,s,a]}class It extends tt{constructor(t){super(),Z(this,t,Ot,Ct,i,{type:0,id:1,plural:2,count:3})}}function Rt(e){let n,r,o,i=e[0].symbol+"";return{c(){n=h("span"),r=g(i),w(n,"font-family","monospace"),$(n,"class",o="c_"+e[0].color)},m(t,e){f(t,n,e),d(n,r)},p(t,[e]){1&e&&i!==(i=t[0].symbol+"")&&b(r,i),1&e&&o!==(o="c_"+t[0].color)&&$(n,"class",o)},i:t,o:t,d(t){t&&p(n)}}}function Mt(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class At extends tt{constructor(t){super(),Z(this,t,Mt,Rt,i,{item:0})}}function Nt(t,e,n){const r=t.slice();return r[7]=e[n],r}const Lt=t=>({item:3&t}),Dt=t=>({item:t[7]});function jt(t){let e,n;const r=t[5].default,o=a(r,t,t[4],Dt);return{c(){e=h("li"),o&&o.c()},m(t,r){f(t,e,r),o&&o.m(e,null),n=!0},p(t,e){o&&o.p&&19&e&&u(o,r,t,t[4],e,Lt,Dt)},i(t){n||(W(o,t),n=!0)},o(t){z(o,t),n=!1},d(t){t&&p(e),o&&o.d(t)}}}function qt(t){let e,n,r,o,i,s,l=Number(t[0].length).toLocaleString()+"";return{c(){e=h("button"),n=g("See all "),r=g(l),o=g("..."),$(e,"class","disclosure")},m(l,a){f(l,e,a),d(e,n),d(e,r),d(e,o),i||(s=v(e,"click",t[6]),i=!0)},p(t,e){1&e&&l!==(l=Number(t[0].length).toLocaleString()+"")&&b(r,l)},d(t){t&&p(e),i=!1,s()}}}function Bt(t){let e,n,r,o,i=t[0].slice(0,t[1]),s=[];for(let e=0;e<i.length;e+=1)s[e]=jt(Nt(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));let a=t[0].length>t[1]&&qt(t);return{c(){e=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();n=y(),a&&a.c(),r=_()},m(t,i){f(t,e,i);for(let t=0;t<s.length;t+=1)s[t].m(e,null);f(t,n,i),a&&a.m(t,i),f(t,r,i),o=!0},p(t,[n]){if(19&n){let r;for(i=t[0].slice(0,t[1]),r=0;r<i.length;r+=1){const o=Nt(t,i,r);s[r]?(s[r].p(o,n),W(s[r],1)):(s[r]=jt(o),s[r].c(),W(s[r],1),s[r].m(e,null))}for(U(),r=i.length;r<s.length;r+=1)l(r);G()}t[0].length>t[1]?a?a.p(t,n):(a=qt(t),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),m(s,t),t&&p(n),a&&a.d(t),t&&p(r)}}}function Pt(t,e,n){let{$$slots:r={},$$scope:o}=e,{items:i}=e,{limit:s=10}=e,{grace:l=4}=e,a=i.length<=s+l?s+l:s;return t.$$set=t=>{"items"in t&&n(0,i=t.items),"limit"in t&&n(2,s=t.limit),"grace"in t&&n(3,l=t.grace),"$$scope"in t&&n(4,o=t.$$scope)},[i,a,s,l,o,r,t=>{t.preventDefault(),n(1,a=1/0)}]}class Ft extends tt{constructor(t){super(),Z(this,t,Pt,Bt,i,{items:0,limit:2,grace:3})}}function Ht(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ut(t,e,n){const r=t.slice();return r[12]=e[n].id,r[13]=e[n].prob,r}function Gt(t,e,n){const r=t.slice();return r[16]=e[n],r}function Wt(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function zt(t,e,n){const r=t.slice();return r[22]=e[n],r}function Vt(t,e,n){const r=t.slice();return r[12]=e[n],r}function Yt(t){let e,n,r,o=t[0].bodytype+"";return{c(){e=h("dt"),e.textContent="Body Type",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].bodytype+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Jt(t){let e,n,r,o=(t[0].species??[]).join(", ")+"";return{c(){e=h("dt"),e.textContent="Species",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=(t[0].species??[]).join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Kt(e){let n,r,o;return r=new It({props:{type:"material",id:e[12]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Xt(t){let e,n,r,o,i=t[0].special_attacks,s=[];for(let e=0;e<i.length;e+=1)s[e]=te(zt(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Special Attacks",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","no-bullets")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(3&e){let n;for(i=t[0].special_attacks,n=0;n<i.length;n+=1){const o=zt(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=te(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Qt(e){let n,r=ve(e[22])+"";return{c(){n=g(r)},m(t,e){f(t,n,e)},p(t,e){1&e&&r!==(r=ve(t[22])+"")&&b(n,r)},i:t,o:t,d(t){t&&p(n)}}}function Zt(t){let e,n;return e=new It({props:{type:"monster_attack",id:t[22][0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[22][0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function te(t){let e,n,r,o,i,s;const l=[Zt,Qt],a=[];function c(t,e){return 1&e&&(n=!(!t[22][0]||!t[1].byId("monster_attack",t[22][0]))),n?0:1}return r=c(t,-1),o=a[r]=l[r](t),{c(){e=h("li"),o.c(),i=y()},m(t,n){f(t,e,n),a[r].m(e,null),d(e,i),s=!0},p(t,n){let s=r;r=c(t,n),r===s?a[r].p(t,n):(U(),z(a[s],1,1,(()=>{a[s]=null})),G(),o=a[r],o?o.p(t,n):(o=a[r]=l[r](t),o.c()),W(o,1),o.m(e,i))},i(t){s||(W(o),s=!0)},o(t){z(o),s=!1},d(t){t&&p(e),a[r].d()}}}function ee(t){let e,n,r,o,i=t[0].regenerates+"";return{c(){e=h("dt"),e.textContent="Regenerates",n=h("dd"),r=g(i),o=g(" hp/turn")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),d(n,o)},p(t,e){1&e&&i!==(i=t[0].regenerates+"")&&b(r,i)},d(t){t&&p(e),t&&p(n)}}}function ne(t){let e,n,r,o=t[0].anger_triggers.join(", ")+"";return{c(){e=h("dt"),e.textContent="Anger Triggers",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].anger_triggers.join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function re(t){let e,n,r,o=t[0].placate_triggers.join(", ")+"";return{c(){e=h("dt"),e.textContent="Placate Triggers",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].placate_triggers.join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function oe(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ie(t){let e,n,r,o,i=t[19]+"",s=t[21]<t[0].flags.length-1&&oe();return{c(){e=h("abbr"),n=g(i),s&&s.c(),o=_(),$(e,"title",r=t[3][t[19]])},m(t,r){f(t,e,r),d(e,n),s&&s.m(t,r),f(t,o,r)},p(t,l){1&l&&i!==(i=t[19]+"")&&b(n,i),1&l&&r!==(r=t[3][t[19]])&&$(e,"title",r),t[21]<t[0].flags.length-1?s||(s=oe(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(t){t&&p(e),s&&s.d(t),t&&p(o)}}}function se(t){let e,n,r,o=(t[0].death_function.corpse_type??"NORMAL")+"";return{c(){e=h("dt"),e.textContent="On Death",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=(t[0].death_function.corpse_type??"NORMAL")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function le(e){let n,r,o;return r=new It({props:{type:"monster",id:e[16]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function ae(e){let n,r,o,i,s=e[7].half_life+"",l=1!==e[7].half_life&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("with a half-life of "),r=g(s),o=g(" day"),l&&l.c(),i=_()},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),l&&l.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),l&&l.d(t),t&&p(i)}}}function ce(e){let n,r,o,i,s=e[7].age_grow+"",l=1!==e[7].age_grow&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("in "),r=g(s),o=g(" day"),l&&l.c(),i=_()},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),l&&l.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),l&&l.d(t),t&&p(i)}}}function ue(t){let e,n,r,o,i,s,l,a=$e(t[0].prob)+"";return e=new At({props:{item:t[1].byId("item",t[0].id)}}),r=new It({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment),o=g(" ("),i=g(a),s=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,s,a),l=!0},p(t,n){const o={};1&n&&(o.item=t[1].byId("item",t[0].id)),e.$set(o);const s={};1&n&&(s.id=t[0].id),r.$set(s),(!l||1&n)&&a!==(a=$e(t[0].prob)+"")&&b(i,a)},i(t){l||(W(e.$$.fragment,t),W(r.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(s)}}}function de(e){let n,r,o,i,s,l;return r=new At({props:{item:e[1].byId("item",e[9].drop)}}),i=new It({props:{type:"item",id:e[9].drop}}),{c(){n=h("li"),J(r.$$.fragment),o=y(),J(i.$$.fragment),s=y()},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,s),l=!0},p:t,i(t){l||(W(r.$$.fragment,t),W(i.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),l=!1},d(t){t&&p(n),X(r),X(i)}}}function fe(t){let e,n,r=mt(t[1],t[1].byId("item_group",t[9].drop)),o=[];for(let e=0;e<r.length;e+=1)o[e]=pe(Ut(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(66&n){let s;for(r=mt(t[1],t[1].byId("item_group",t[9].drop)),s=0;s<r.length;s+=1){const i=Ut(t,r,s);o[s]?(o[s].p(i,n),W(o[s],1)):(o[s]=pe(i),o[s].c(),W(o[s],1),o[s].m(e.parentNode,e))}for(U(),s=r.length;s<o.length;s+=1)i(s);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function pe(e){let n,r,o,i,s,l,a,c,u=(100*e[13]).toFixed(2)+"";return r=new At({props:{item:e[1].byId("item",e[12])}}),i=new It({props:{type:"item",id:e[12]}}),{c(){n=h("li"),J(r.$$.fragment),o=y(),J(i.$$.fragment),s=g(" ("),l=g(u),a=g("%)\n            ")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,s),d(n,l),d(n,a),c=!0},p:t,i(t){c||(W(r.$$.fragment,t),W(i.$$.fragment,t),c=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),c=!1},d(t){t&&p(n),X(r),X(i)}}}function me(t){let e,n,r,o;const i=[fe,de],s=[];return e=function(t,e){return"bionic_group"===t[9].type?0:1}(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function he(t){let e,n,r,o,i,s,l,a,c,u,v,x,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V,Y,Q,Z,tt,et,nt,rt,ot,it,lt,at,ct,ut,pt,mt,ht,gt,yt,_t,vt,$t,bt,xt,wt,Et,St,Ct,Tt,kt,Ot,It,Rt,Mt,Nt,Lt,Dt,jt,qt,Bt,Pt,Ut,zt,Qt,Zt,te,oe,de,fe,pe,he,ve,$e,be,xe,we,Ee,Se,Ce,Te,ke,Oe,Ie,Re,Me,Ae,Ne,Le,De,je,qe,Be=st(t[0])+"",Pe=dt(t[0].volume)+"",Fe=ft(t[0].weight)+"",He=ge(t[0])+"",Ue=ye(ge(t[0]))+"",Ge=t[0].description+"",We=(t[0].speed??0)+"",ze=(t[0].melee_skill??0)+"",Ve=t[2](t[0])+"",Ye=t[0].hp+"",Je=(t[0].dodge??0)+"",Ke=(t[0].armor_bash??0)+"",Xe=(t[0].armor_cut??0)+"",Qe=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"",Ze=(t[0].armor_bullet??0)+"",tn=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"",en=(t[0].armor_fire??0)+"",nn=(t[0].aggression??0)+"",rn=(t[0].morale??0)+"",on=(t[0].vision_day??40)+"",sn=(t[0].vision_night??1)+"",ln=t[0].default_faction+"";n=new At({props:{item:t[0]}});let an=t[0].bodytype&&Yt(t),cn=t[0].species&&t[0].species.length&&Jt(t),un=t[4].length&&function(t){let e,n,r,o,i,s=t[4],l=[];for(let e=0;e<s.length;e+=1)l[e]=Kt(Vt(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Material",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(16&e){let n;for(s=t[4],n=0;n<s.length;n+=1){const o=Vt(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Kt(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t),dn=t[0].special_attacks&&Xt(t),fn=t[0].regenerates&&ee(t),pn=t[0].anger_triggers&&ne(t),mn=t[0].placate_triggers&&re(t),hn=t[0].flags??[],gn=[];for(let e=0;e<hn.length;e+=1)gn[e]=ie(Wt(t,hn,e));let yn=t[0].death_function&&se(t),_n=t[7]&&function(t){let e,n,r,o,i,s=t[7].monsters,l=[];for(let e=0;e<s.length;e+=1)l[e]=le(Gt(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));let c=function(t,e){return t[7].age_grow?ce:t[7].half_life?ae:void 0}(t),u=c&&c(t);return{c(){e=h("dt"),e.textContent="Upgrades Into",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),u&&u.c(),$(r,"class","comma-separated or")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),u&&u.m(n,null),i=!0},p(t,e){if(128&e){let n;for(s=t[7].monsters,n=0;n<s.length;n+=1){const o=Gt(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=le(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}u&&u.p(t,e)},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t),u&&u.d()}}}(t),vn=t[5]?.length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[5],$$slots:{default:[ue,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Drops",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};134217729&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),$n=t[6]&&(t[6].entries??[]).length&&function(t){let e,n,r,o,i,s=t[6].entries,l=[];for(let e=0;e<s.length;e+=1)l[e]=me(Ht(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Butchering Results",r=y(),o=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(66&e){let n;for(s=t[6].entries,n=0;n<s.length;n+=1){const r=Ht(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=me(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),m(l,t)}}}(t);return{c(){e=h("h1"),J(n.$$.fragment),r=y(),o=g(Be),i=y(),s=h("section"),l=h("dl"),an&&an.c(),a=_(),cn&&cn.c(),c=h("dt"),c.textContent="Volume",u=h("dd"),v=g(Pe),x=h("dt"),x.textContent="Weight",E=h("dd"),S=g(Fe),un&&un.c(),C=h("dt"),C.textContent="Difficulty",T=h("dd"),k=g(He),O=y(),I=h("span"),R=g("("),M=g(Ue),A=g(")"),L=y(),D=h("p"),j=g(Ge),q=y(),B=h("div"),P=h("section"),F=h("h1"),F.textContent="Attack",H=y(),V=h("dl"),Y=h("dt"),Y.textContent="Speed",Q=h("dd"),Z=g(We),tt=h("dt"),tt.textContent="Melee Skill",et=h("dd"),nt=g(ze),rt=h("dt"),rt.textContent="Damage",ot=h("dd"),it=g(Ve),dn&&dn.c(),lt=y(),at=h("section"),ct=h("h1"),ct.textContent="Defense",ut=y(),pt=h("dl"),mt=h("dt"),mt.textContent="HP",ht=h("dd"),gt=g(Ye),fn&&fn.c(),yt=h("dt"),yt.textContent="Dodge",_t=h("dd"),vt=g(Je),$t=h("dt"),$t.textContent="Armor",bt=h("dd"),xt=h("dl"),wt=h("dt"),wt.textContent="Bash",Et=h("dd"),St=g(Ke),Ct=h("dt"),Ct.textContent="Cut",Tt=h("dd"),kt=g(Xe),Ot=h("dt"),Ot.textContent="Stab",It=h("dd"),Rt=g(Qe),Mt=h("dt"),Mt.textContent="Bullet",Nt=h("dd"),Lt=g(Ze),Dt=h("dt"),Dt.textContent="Acid",jt=h("dd"),qt=g(tn),Bt=h("dt"),Bt.textContent="Fire",Pt=h("dd"),Ut=g(en),zt=y(),Qt=h("section"),Zt=h("h1"),Zt.textContent="Behavior",te=y(),oe=h("dl"),de=h("dt"),de.textContent="Aggression\n    ",fe=h("dd"),pe=g(nn),he=h("dt"),he.textContent="Morale",ve=h("dd"),$e=g(rn),be=h("dt"),be.textContent="Vision Range",xe=h("dd"),we=g(on),Ee=g(" (day) / "),Se=g(sn),Ce=g(" (night)"),Te=h("dt"),Te.textContent="Default Faction",ke=h("dd"),Oe=g(ln),pn&&pn.c(),Ie=_(),mn&&mn.c(),Re=h("dt"),Re.textContent="Flags",Me=h("dd");for(let t=0;t<gn.length;t+=1)gn[t].c();Ae=y(),yn&&yn.c(),Ne=_(),_n&&_n.c(),Le=y(),vn&&vn.c(),De=y(),$n&&$n.c(),je=_(),$(I,"class",N="c_"+_e(ge(t[0]))+" fg_only"),w(D,"color","var(--cata-color-gray)"),w(pt,"flex","1"),$(B,"class","side-by-side"),$(de,"title","Monsters with high aggression are more likely to be hostile. Ranges from -100 to 100"),$(he,"title","Morale at spawn. Monsters with low morale will flee.")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,s,p),d(s,l),an&&an.m(l,null),d(l,a),cn&&cn.m(l,null),d(l,c),d(l,u),d(u,v),d(l,x),d(l,E),d(E,S),un&&un.m(l,null),d(l,C),d(l,T),d(T,k),d(T,O),d(T,I),d(I,R),d(I,M),d(I,A),d(s,L),d(s,D),d(D,j),f(t,q,p),f(t,B,p),d(B,P),d(P,F),d(P,H),d(P,V),d(V,Y),d(V,Q),d(Q,Z),d(V,tt),d(V,et),d(et,nt),d(V,rt),d(V,ot),d(ot,it),dn&&dn.m(V,null),d(B,lt),d(B,at),d(at,ct),d(at,ut),d(at,pt),d(pt,mt),d(pt,ht),d(ht,gt),fn&&fn.m(pt,null),d(pt,yt),d(pt,_t),d(_t,vt),d(pt,$t),d(pt,bt),d(bt,xt),d(xt,wt),d(xt,Et),d(Et,St),d(xt,Ct),d(xt,Tt),d(Tt,kt),d(xt,Ot),d(xt,It),d(It,Rt),d(xt,Mt),d(xt,Nt),d(Nt,Lt),d(xt,Dt),d(xt,jt),d(jt,qt),d(xt,Bt),d(xt,Pt),d(Pt,Ut),f(t,zt,p),f(t,Qt,p),d(Qt,Zt),d(Qt,te),d(Qt,oe),d(oe,de),d(oe,fe),d(fe,pe),d(oe,he),d(oe,ve),d(ve,$e),d(oe,be),d(oe,xe),d(xe,we),d(xe,Ee),d(xe,Se),d(xe,Ce),d(oe,Te),d(oe,ke),d(ke,Oe),pn&&pn.m(oe,null),d(oe,Ie),mn&&mn.m(oe,null),d(oe,Re),d(oe,Me);for(let t=0;t<gn.length;t+=1)gn[t].m(Me,null);d(Me,Ae),yn&&yn.m(oe,null),d(oe,Ne),_n&&_n.m(oe,null),f(t,Le,p),vn&&vn.m(t,p),f(t,De,p),$n&&$n.m(t,p),f(t,je,p),qe=!0},p(t,[e]){const r={};if(1&e&&(r.item=t[0]),n.$set(r),(!qe||1&e)&&Be!==(Be=st(t[0])+"")&&b(o,Be),t[0].bodytype?an?an.p(t,e):(an=Yt(t),an.c(),an.m(l,a)):an&&(an.d(1),an=null),t[0].species&&t[0].species.length?cn?cn.p(t,e):(cn=Jt(t),cn.c(),cn.m(l,c)):cn&&(cn.d(1),cn=null),(!qe||1&e)&&Pe!==(Pe=dt(t[0].volume)+"")&&b(v,Pe),(!qe||1&e)&&Fe!==(Fe=ft(t[0].weight)+"")&&b(S,Fe),t[4].length&&un.p(t,e),(!qe||1&e)&&He!==(He=ge(t[0])+"")&&b(k,He),(!qe||1&e)&&Ue!==(Ue=ye(ge(t[0]))+"")&&b(M,Ue),(!qe||1&e&&N!==(N="c_"+_e(ge(t[0]))+" fg_only"))&&$(I,"class",N),(!qe||1&e)&&Ge!==(Ge=t[0].description+"")&&b(j,Ge),(!qe||1&e)&&We!==(We=(t[0].speed??0)+"")&&b(Z,We),(!qe||1&e)&&ze!==(ze=(t[0].melee_skill??0)+"")&&b(nt,ze),(!qe||1&e)&&Ve!==(Ve=t[2](t[0])+"")&&b(it,Ve),t[0].special_attacks?dn?(dn.p(t,e),1&e&&W(dn,1)):(dn=Xt(t),dn.c(),W(dn,1),dn.m(V,null)):dn&&(U(),z(dn,1,1,(()=>{dn=null})),G()),(!qe||1&e)&&Ye!==(Ye=t[0].hp+"")&&b(gt,Ye),t[0].regenerates?fn?fn.p(t,e):(fn=ee(t),fn.c(),fn.m(pt,yt)):fn&&(fn.d(1),fn=null),(!qe||1&e)&&Je!==(Je=(t[0].dodge??0)+"")&&b(vt,Je),(!qe||1&e)&&Ke!==(Ke=(t[0].armor_bash??0)+"")&&b(St,Ke),(!qe||1&e)&&Xe!==(Xe=(t[0].armor_cut??0)+"")&&b(kt,Xe),(!qe||1&e)&&Qe!==(Qe=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"")&&b(Rt,Qe),(!qe||1&e)&&Ze!==(Ze=(t[0].armor_bullet??0)+"")&&b(Lt,Ze),(!qe||1&e)&&tn!==(tn=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"")&&b(qt,tn),(!qe||1&e)&&en!==(en=(t[0].armor_fire??0)+"")&&b(Ut,en),(!qe||1&e)&&nn!==(nn=(t[0].aggression??0)+"")&&b(pe,nn),(!qe||1&e)&&rn!==(rn=(t[0].morale??0)+"")&&b($e,rn),(!qe||1&e)&&on!==(on=(t[0].vision_day??40)+"")&&b(we,on),(!qe||1&e)&&sn!==(sn=(t[0].vision_night??1)+"")&&b(Se,sn),(!qe||1&e)&&ln!==(ln=t[0].default_faction+"")&&b(Oe,ln),t[0].anger_triggers?pn?pn.p(t,e):(pn=ne(t),pn.c(),pn.m(oe,Ie)):pn&&(pn.d(1),pn=null),t[0].placate_triggers?mn?mn.p(t,e):(mn=re(t),mn.c(),mn.m(oe,Re)):mn&&(mn.d(1),mn=null),9&e){let n;for(hn=t[0].flags??[],n=0;n<hn.length;n+=1){const r=Wt(t,hn,n);gn[n]?gn[n].p(r,e):(gn[n]=ie(r),gn[n].c(),gn[n].m(Me,Ae))}for(;n<gn.length;n+=1)gn[n].d(1);gn.length=hn.length}t[0].death_function?yn?yn.p(t,e):(yn=se(t),yn.c(),yn.m(oe,Ne)):yn&&(yn.d(1),yn=null),t[7]&&_n.p(t,e),t[5]?.length&&vn.p(t,e),t[6]&&(t[6].entries??[]).length&&$n.p(t,e)},i(t){qe||(W(n.$$.fragment,t),W(un),W(dn),W(_n),W(vn),W($n),qe=!0)},o(t){z(n.$$.fragment,t),z(un),z(dn),z(_n),z(vn),z($n),qe=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(s),an&&an.d(),cn&&cn.d(),un&&un.d(),t&&p(q),t&&p(B),dn&&dn.d(),fn&&fn.d(),t&&p(zt),t&&p(Qt),pn&&pn.d(),mn&&mn.d(),m(gn,t),yn&&yn.d(),_n&&_n.d(),t&&p(Le),vn&&vn.d(t),t&&p(De),$n&&$n.d(t),t&&p(je)}}}function ge(t){const{melee_skill:e=0,melee_dice:n=0,melee_cut:r=0,melee_dice_sides:o=0,dodge:i=0,armor_bash:s=-1,armor_cut:l=-1,diff:a=0,special_attacks:c=[],emit_fields:u=[],hp:d,speed:f=0,attack_cost:p=100,morale:m=0,aggression:h=0,vision_day:g=40,vision_night:y=1}=t;let _=(e+1)*n*(r+o)*.04+(i+1)*(3+s+l)*.04+(a+c.length+8*u.length);return _=Math.floor(_),_*=.01*(d+f-p+.1*(m+h))+.01*(g+2*y),Math.floor(_)}function ye(t){return t<3?"Minimal threat.":t<10?"Mildly dangerous.":t<20?"Dangerous.":t<30?"Very dangerous.":t<50?"Extremely dangerous.":"Fatally dangerous!"}function _e(t){return t<3||t<10?"light_gray":t<20?"light_red":"red"}function ve(t){return Array.isArray(t)?t.length>1?`${t[0]} (cooldown: ${t[1]})`:t[0]:"type"in t?"cooldown"in t?`${t.type} (cooldown: ${t.cooldown})`:t.type:"id"in t?"damage_max_instance"in t?`${t.id}: ${t.damage_max_instance.map((t=>`(${t.damage_type} for ${t.amount} damage)`)).join(" ")}`:t.id:void 0}function $e(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}function be(t,e,n){var r;let{item:o}=e,i=O("data");let s=null!==(r=o.material)&&void 0!==r?r:[],l=i.flatDeathDrops(o.id),a=o.harvest?i.byId("harvest",o.harvest):void 0,c=o.upgrades&&(o.upgrades.into||o.upgrades.into_group)?{...o.upgrades,monsters:o.upgrades.into?[o.upgrades.into]:(u=i.byId("monstergroup",o.upgrades.into_group),[u.default].concat(u.monsters.map((t=>t.monster)).filter((t=>t!==u.default))))}:null;var u;return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i,function(t){let{melee_dice:e=0,melee_dice_sides:n=0,melee_damage:r=[],melee_cut:o}=t;const i=(s=r,Array.isArray(s)?s:"values"in s?s.values:[s]);var s;return o&&i.push({damage_type:"cut",amount:o}),`${e}d${n} bash`+i.map((t=>` + ${t.amount} ${t.damage_type}`)).join("")},{SEES:"It can see you (and will run/follow)",HEARS:"It can hear you",GOODHEARING:"Pursues sounds more than most monsters",SMELLS:"It can smell you",KEENNOSE:"Keen sense of smell",STUMBLES:"Stumbles in its movement",WARM:"Warm blooded",NOHEAD:"Headshots not allowed!",HARDTOSHOOT:"It's one size smaller for ranged attacks, no less then creature_size::tiny",GRABS:"Its attacks may grab us!",BASHES:"Bashes down doors",DESTROYS:"Bashes down walls and more",BORES:"Tunnels through just about anything",POISON:"Poisonous to eat",VENOM:"Attack may poison the player",BADVENOM:"Attack may SEVERELY poison the player",PARALYZE:"Attack may paralyze the player with venom",WEBWALK:"Doesn't destroy webs",DIGS:"Digs through the ground",CAN_DIG:"Can dig and walk",FLIES:"Can fly (over water, etc)",AQUATIC:"Confined to water",SWIMS:"Treats water as 50 movement point terrain",ATTACKMON:"Attacks other monsters",ANIMAL:'Is an "animal" for purposes of the Animal Empath trait',PLASTIC:"Absorbs physical damage to a great degree",SUNDEATH:"Dies in full sunlight",ELECTRIC:"Shocks unarmed attackers",ACIDPROOF:"Immune to acid",ACIDTRAIL:"Leaves a trail of acid",SHORTACIDTRAIL:"Leaves an intermittent trail of acid",FIREPROOF:"Immune to fire",SLUDGEPROOF:"Ignores the effect of sludge trails",SLUDGETRAIL:"Causes monster to leave a sludge trap trail when moving",COLDPROOF:"Immune to cold damage",FIREY:"Burns stuff and is immune to fire",QUEEN:"When it dies, local populations start to die off too",ELECTRONIC:"e.g. a robot; affected by EMP blasts, and other stuff",FUR:"May produce fur when butchered",LEATHER:"May produce leather when butchered",WOOL:"May produce wool when butchered",BONES:"May produce bones and sinews when butchered; if combined with POISON flag, tainted bones, if combined with HUMAN, human bones",FAT:"May produce fat when butchered; if combined with POISON flag, tainted fat",CONSOLE_DESPAWN:"Despawns when a nearby console is properly hacked",IMMOBILE:"Doesn't move (e.g. turrets)",ID_CARD_DESPAWN:"Despawns when a science ID card is used on a nearby console",RIDEABLE_MECH:"A rideable mech that is immobile until ridden.",MILITARY_MECH:"A rideable mech that was designed for military work.",MECH_RECON_VISION:"This mech gives you IR night-vision.",MECH_DEFENSIVE:"This mech gives you thorough protection.",HIT_AND_RUN:"Flee for several turns after a melee attack",GUILT:"You feel guilty for killing it",PAY_BOT:"You can pay this bot to be your friend for a time",HUMAN:"It's a live human, as long as it's alive",NO_BREATHE:"Creature can't drown and is unharmed by gas, smoke, or poison",FLAMMABLE:"Monster catches fire, burns, and spreads fire to nearby objects",REVIVES:"Monster corpse will revive after a short period of time",CHITIN:"May produce chitin when butchered",VERMIN:'Obsolete flag labeling "nuisance" or "scenery" monsters, now used to prevent loading the same.',NOGIB:"Creature won't leave gibs / meat chunks when killed with huge damage.",LARVA:"Creature is a larva. Currently used for gib and blood handling.",ARTHROPOD_BLOOD:"Forces monster to bleed hemolymph.",ACID_BLOOD:"Makes monster bleed acid. Fun stuff! Does not automatically dissolve in a pool of acid on death.",BILE_BLOOD:"Makes monster bleed bile.",ABSORBS:"Consumes objects it moves over which gives bonus hp.",ABSORBS_SPLITS:"Consumes objects it moves over which gives bonus hp. If it gets enough bonus HP, it spawns a copy of itself.",CBM_CIV:"May produce a common CBM a power CBM when butchered.",CBM_POWER:"May produce a power CBM when butchered, independent of MF_CBM_wev.",CBM_SCI:"May produce a bionic from bionics_sci when butchered.",CBM_OP:"May produce a bionic from bionics_op when butchered, and the power storage is mk 2.",CBM_TECH:"May produce a bionic from bionics_tech when butchered.",CBM_SUBS:"May produce a bionic from bionics_subs when butchered.",FILTHY:"Any clothing it drops will be filthy.",FISHABLE:"It is fishable.",GROUP_BASH:"Monsters that can pile up against obstacles and add their strength together to break them.",SWARMS:"Monsters that like to group together and form loose packs",GROUP_MORALE:"Monsters that are more courageous when near friends",INTERIOR_AMMO:"Monster contain's its ammo inside itself, no need to load on launch. Prevents ammo from being dropped on disable.",CLIMBS:"Monsters that can climb certain terrain and furniture",PACIFIST:"Monsters that will never use melee attack, useful for having them use grab without attacking the player",PUSH_MON:"Monsters that can push creatures out of their way",PUSH_VEH:"Monsters that can push vehicles out of their way",NIGHT_INVISIBILITY:"Monsters that are invisible in poor light conditions",REVIVES_HEALTHY:"When revived, this monster has full hitpoints and speed",NO_NECRO:"This monster can't be revived by necros. It will still rise on its own.",AVOID_DANGER_1:"This monster will path around some dangers instead of through them.",AVOID_DANGER_2:"This monster will path around most dangers instead of through them.",AVOID_FIRE:"This monster will path around heat-related dangers instead of through them.",AVOID_FALL:"This monster will path around cliffs instead of off of them.",PRIORITIZE_TARGETS:"This monster will prioritize targets depending on their danger levels",NOT_HALLU:"Monsters that will NOT appear when player's producing hallucinations",CATFOOD:"This monster will become friendly when fed cat food.",CATTLEFODDER:"This monster will become friendly when fed cattle fodder.",BIRDFOOD:"This monster will become friendly when fed bird food.",CANPLAY:"This monster can be played with if it's a pet.",PET_MOUNTABLE:"This monster can be mounted and ridden when tamed.",PET_HARNESSABLE:"This monster can be harnessed when tamed.",DOGFOOD:"This monster will become friendly when fed dog food.",MILKABLE:"This monster is milkable.",SHEARABLE:"This monster is shearable.",NO_BREED:"This monster doesn't breed, even though it has breed data",PET_WONT_FOLLOW:"This monster won't follow the player automatically when tamed.",DRIPS_NAPALM:"This monster occasionally drips napalm on move",DRIPS_GASOLINE:"This monster occasionally drips gasoline on move",ELECTRIC_FIELD:"This monster is surrounded by an electrical field that ignites flammable liquids near it",LOUDMOVES:"This monster makes move noises as if ~2 sizes louder, even if flying.",CAN_OPEN_DOORS:"This monster can open doors.",STUN_IMMUNE:"This monster is immune to the stun effect",DROPS_AMMO:"This monster drops ammo. Should not be set for monsters that use pseudo ammo.",INSECTICIDEPROOF:"This monster is immune to insecticide, even though it's made of bug flesh",RANGED_ATTACKER:"This monster has any sort of ranged attack"},s,l,a,c]}class xe extends tt{constructor(t){super(),Z(this,t,be,he,i,{item:0})}}function we(t,e,n){const r=t.slice();return r[3]=e[n],r}function Ee(t,e,n){const r=t.slice();return r[6]=e[n],r}function Se(e){let n,r,o=e[6].string+"";return{c(){n=h("span"),r=g(o),$(n,"class","c_"+e[6].color)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Ce(t){let e,n=t[3],r=[];for(let e=0;e<n.length;e+=1)r[e]=Se(Ee(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=g("\n")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);f(t,e,n)},p(t,o){if(1&o){let i;for(n=t[3],i=0;i<n.length;i+=1){const s=Ee(t,n,i);r[i]?r[i].p(s,o):(r[i]=Se(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){m(r,t),t&&p(e)}}}function Te(e){let n,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=Ce(we(e,r,t));return{c(){n=h("pre");for(let t=0;t<o.length;t+=1)o[t].c();w(n,"font-family","Unifont, monospace"),w(n,"line-height","1")},m(t,e){f(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(1&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=we(t,r,i);o[i]?o[i].p(s,e):(o[i]=Ce(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:t,o:t,d(t){t&&p(n),m(o,t)}}}function ke(t,e,n){let{picture:r}=e,o=["white"];const i=[];for(const t of r.picture){const e=[];let n=t;for(;;){const t=n.match(/<\/?color([^>]*?)>/);if(!t)break;t.index>0&&e.push({string:n.substr(0,t.index),color:o[0]}),"/"===t[0][1]&&o.length>1?o.shift():o.unshift(t[1].substr(1)),n=n.substr(t.index+t[0].length)}n.length&&e.push({string:n,color:o[0]});const r=41-e.reduce(((t,e)=>t+e.string.length),0);r>0&&e.push({string:" ".repeat(r),color:o[0]}),i.push(e)}return t.$$set=t=>{"picture"in t&&n(1,r=t.picture)},[i,r]}class Oe extends tt{constructor(t){super(),Z(this,t,ke,Te,i,{picture:1})}}function Ie(t){let e,n,r,o,i,s,l,a,c,u,m,v,x,w,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q=(t[0].range??0)+"",B=(t[0].dispersion??0)+"",P=(t[0].recoil??0)+"",F=t[2](t[0])+"",H=(t[0].critical_multiplier??2)+"";l=new It({props:{type:"ammunition_type",id:t[0].ammo_type}});let V=t[0].casing&&Re(t),Y=t[0].effects?.length&&Me(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Ammunition",r=y(),o=h("dl"),i=h("dt"),i.textContent="Ammunition Type",s=h("dd"),J(l.$$.fragment),a=h("dt"),a.textContent="Damage",c=h("dd"),c.textContent=`${t[1].amount??0} (${t[1].damage_type??"bullet"})`,u=h("dt"),u.textContent="Armor Penetration",m=h("dd"),m.textContent=`${t[1].armor_penetration??0}`,v=h("dt"),v.textContent="Range",x=h("dd"),w=g(q),E=h("dt"),E.textContent="Dispersion",S=h("dd"),C=g(B),T=h("dt"),T.textContent="Recoil",k=h("dd"),O=g(P),I=h("dt"),I.textContent="Loudness\n      ",R=h("dd"),M=g(F),A=h("dt"),A.textContent="Critical Multiplier",N=h("dd"),L=g(H),V&&V.c(),D=_(),Y&&Y.c(),$(I,"title","Base loudness of ammo (possibly modified by gun/gunmods)")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),K(l,s,null),d(o,a),d(o,c),d(o,u),d(o,m),d(o,v),d(o,x),d(x,w),d(o,E),d(o,S),d(S,C),d(o,T),d(o,k),d(k,O),d(o,I),d(o,R),d(R,M),d(o,A),d(o,N),d(N,L),V&&V.m(o,null),d(o,D),Y&&Y.m(o,null),j=!0},p(t,e){const n={};1&e&&(n.id=t[0].ammo_type),l.$set(n),(!j||1&e)&&q!==(q=(t[0].range??0)+"")&&b(w,q),(!j||1&e)&&B!==(B=(t[0].dispersion??0)+"")&&b(C,B),(!j||1&e)&&P!==(P=(t[0].recoil??0)+"")&&b(O,P),(!j||1&e)&&F!==(F=t[2](t[0])+"")&&b(M,F),(!j||1&e)&&H!==(H=(t[0].critical_multiplier??2)+"")&&b(L,H),t[0].casing?V?(V.p(t,e),1&e&&W(V,1)):(V=Re(t),V.c(),W(V,1),V.m(o,D)):V&&(U(),z(V,1,1,(()=>{V=null})),G()),t[0].effects?.length?Y?Y.p(t,e):(Y=Me(t),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null)},i(t){j||(W(l.$$.fragment,t),W(V),j=!0)},o(t){z(l.$$.fragment,t),z(V),j=!1},d(t){t&&p(e),X(l),V&&V.d(),Y&&Y.d()}}}function Re(t){let e,n,r,o;return r=new It({props:{id:t[0].casing,type:"item"}}),{c(){e=h("dt"),e.textContent="Casing",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].casing),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function Me(t){let e,n,r,o=t[0].effects.join(", ")+"";return{c(){e=h("dt"),e.textContent="Effects",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].effects.join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Ae(t){let e,n,r=(t[0].damage||t[0].show_stats)&&Ie(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0].damage||t[0].show_stats?r?(r.p(t,n),1&n&&W(r,1)):(r=Ie(t),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(U(),z(r,1,1,(()=>{r=null})),G())},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Ne(t,e,n){var r;let{item:o}=e;const i=Array.isArray(o.damage)?o.damage[0]:o.damage&&"values"in o.damage?o.damage.values[0]:null!==(r=o.damage)&&void 0!==r?r:{amount:0,damage_type:"bullet",armor_penetration:0};return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i,function(t){var e,n,r,o,s;return(null!==(e=t.loudness)&&void 0!==e?e:-1)>=0?null!==(n=t.loudness)&&void 0!==n?n:0:2*(null!==(r=t.range)&&void 0!==r?r:0)+(null!==(o=i.amount)&&void 0!==o?o:0)*(null!==(s=i.armor_penetration)&&void 0!==s?s:0)}]}class Le extends tt{constructor(t){super(),Z(this,t,Ne,Ae,i,{item:0})}}function De(t,e,n){const r=t.slice();return r[13]=e[n],r}function je(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function qe(t,e,n){const r=t.slice();return r[13]=e[n],r}function Be(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function Pe(t,e,n){const r=t.slice();return r[22]=e[n][0],r[23]=e[n][1],r}function Fe(t){let e,n,r,o,i;return{c(){e=g("The "),n=h("strong"),r=g("right "),o=g(t[22]),i=g(".")},m(t,s){f(t,e,s),f(t,n,s),d(n,r),d(n,o),f(t,i,s)},d(t){t&&p(e),t&&p(n),t&&p(i)}}}function He(t){let e,n,r,o,i;return{c(){e=g("The "),n=h("strong"),r=g("left "),o=g(t[22]),i=g(".")},m(t,s){f(t,e,s),f(t,n,s),d(n,r),d(n,o),f(t,i,s)},d(t){t&&p(e),t&&p(n),t&&p(i)}}}function Ue(t){let e,n,r,o;return{c(){e=g("The "),n=h("strong"),r=g(t[23]),o=g(".")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),f(t,o,i)},d(t){t&&p(e),t&&p(n),t&&p(o)}}}function Ge(t){let e,n,r,o;return{c(){e=g("Either "),n=h("strong"),r=g(t[22]),o=g(".")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),f(t,o,i)},d(t){t&&p(e),t&&p(n),t&&p(o)}}}function We(t){let e,n,r,o,i,s;function l(t,i){return(null==e||1&i)&&(e=!(!t[0].sided||!t[2](`${t[22]}_l`)&&!t[2](`${t[22]}_r`))),e?Ge:(null==n&&(n=!(!t[2](`${t[22]}_l`)||!t[2](`${t[22]}_r`))),n?Ue:(null==r&&(r=!!t[2](`${t[22]}_l`)),r?He:(null==o&&(o=!!t[2](`${t[22]}_r`)),o?Fe:void 0)))}let a=l(t,-1),c=a&&a(t);return{c(){c&&c.c(),i=y(),s=g(" ")},m(t,e){c&&c.m(t,e),f(t,i,e),f(t,s,e)},p(t,e){a!==(a=l(t,e))&&(c&&c.d(1),c=a&&a(t),c&&(c.c(),c.m(i.parentNode,i)))},d(t){c&&c.d(t),t&&p(i),t&&p(s)}}}function ze(t){let e;return{c(){e=g("Normal")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ve(t){let e;return{c(){e=g("Outer aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ye(t){let e;return{c(){e=g("Waist")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Je(t){let e;return{c(){e=g("Outer")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ke(t){let e;return{c(){e=g("Strapped")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Xe(t){let e;return{c(){e=g("Close to skin")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Qe(t){let e;return{c(){e=g("Personal aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ze(t){let e,n,r=(t[0].encumbrance??0)+"",o=t[0].max_encumbrance&&en(t);return{c(){e=g(r),o&&o.c(),n=_()},m(t,r){f(t,e,r),o&&o.m(t,r),f(t,n,r)},p(t,i){1&i&&r!==(r=(t[0].encumbrance??0)+"")&&b(e,r),t[0].max_encumbrance?o?o.p(t,i):(o=en(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(t){t&&p(e),o&&o.d(t),t&&p(n)}}}function tn(t){let e,n=t[4],r=[];for(let e=0;e<n.length;e+=1)r[e]=sn(qe(t,n,e));return{c(){e=h("dl");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){f(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(48&o){let i;for(n=t[4],i=0;i<n.length;i+=1){const s=qe(t,n,i);r[i]?r[i].p(s,o):(r[i]=sn(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&p(e),m(r,t)}}}function en(t){let e,n,r,o,i=t[0].max_encumbrance+"";return{c(){e=g(" "),n=g("("),r=g(i),o=g(" when full)")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){1&e&&i!==(i=t[0].max_encumbrance+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function nn(e){let n,r=e[16]+"",o=0!==e[18]&&function(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){o&&o.c(),n=g(r)},m(t,e){o&&o.m(t,e),f(t,n,e)},p:t,d(t){o&&o.d(t),t&&p(n)}}}function rn(e){let n,r=(e[13].encumbrance??0)+"";return{c(){n=g(r)},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function on(e){let n,r,o,i=e[13].encumbrance[0]+"",s=e[13].encumbrance[1]!==e[13].encumbrance[0]&&function(e){let n,r,o,i=e[13].encumbrance[1]+"";return{c(){n=g("("),r=g(i),o=g(" when full)")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=g(i),r=y(),s&&s.c(),o=_()},m(t,e){f(t,n,e),f(t,r,e),s&&s.m(t,e),f(t,o,e)},p(t,e){t[13].encumbrance[1]!==t[13].encumbrance[0]&&s.p(t,e)},d(t){t&&p(n),t&&p(r),s&&s.d(t),t&&p(o)}}}function sn(t){let e,n,r,o,i=t[5](t[13]),s=[];for(let e=0;e<i.length;e+=1)s[e]=nn(Be(t,i,e));let l=function(t,e){return Array.isArray(t[13].encumbrance)?on:rn}(t)(t);return{c(){e=h("dt");for(let t=0;t<s.length;t+=1)s[t].c();n=y(),r=h("dd"),l.c(),o=y()},m(t,i){f(t,e,i);for(let t=0;t<s.length;t+=1)s[t].m(e,null);d(e,n),f(t,r,i),l.m(r,null),d(r,o)},p(t,r){if(48&r){let o;for(i=t[5](t[13]),o=0;o<i.length;o+=1){const l=Be(t,i,o);s[o]?s[o].p(l,r):(s[o]=nn(l),s[o].c(),s[o].m(e,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}l.p(t,r)},d(t){t&&p(e),m(s,t),t&&p(r),l.d()}}}function ln(t){let e,n,r=(t[0].coverage??0)+"";return{c(){e=g(r),n=g("%")},m(t,r){f(t,e,r),f(t,n,r)},p(t,n){1&n&&r!==(r=(t[0].coverage??0)+"")&&b(e,r)},d(t){t&&p(e),t&&p(n)}}}function an(t){let e,n=t[0].armor,r=[];for(let e=0;e<n.length;e+=1)r[e]=un(De(t,n,e));return{c(){e=h("dl");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){f(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(33&o){let i;for(n=t[0].armor,i=0;i<n.length;i+=1){const s=De(t,n,i);r[i]?r[i].p(s,o):(r[i]=un(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&p(e),m(r,t)}}}function cn(t){let e,n=t[16]+"",r=0!==t[18]&&function(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){r&&r.c(),e=g(n)},m(t,n){r&&r.m(t,n),f(t,e,n)},p(t,r){1&r&&n!==(n=t[16]+"")&&b(e,n)},d(t){r&&r.d(t),t&&p(e)}}}function un(t){let e,n,r,o,i,s=(t[13].coverage??0)+"",l=t[5](t[13]),a=[];for(let e=0;e<l.length;e+=1)a[e]=cn(je(t,l,e));return{c(){e=h("dt");for(let t=0;t<a.length;t+=1)a[t].c();n=y(),r=h("dd"),o=g(s),i=g("%")},m(t,s){f(t,e,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);d(e,n),f(t,r,s),d(r,o),d(r,i)},p(t,r){if(33&r){let o;for(l=t[5](t[13]),o=0;o<l.length;o+=1){const i=je(t,l,o);a[o]?a[o].p(i,r):(a[o]=cn(i),a[o].c(),a[o].m(e,n))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length}1&r&&s!==(s=(t[13].coverage??0)+"")&&b(o,s)},d(t){t&&p(e),m(a,t),t&&p(r)}}}function dn(t){let e,n,r,o,i,s,l=(t[0].environmental_protection??0)+"",a=t[1].length&&function(t){let e,n,r,o,i,s,l,a,c,u,m,_,v,$,x,w,E,S,C,T,k=(t[1].reduce(pn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"",O=(t[1].reduce(mn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"",I=(t[1].reduce(hn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"",R=t[6]().toFixed(2)+"",M=t[7]().toFixed(2)+"";return{c(){e=h("dt"),e.textContent="Bash",n=h("dd"),r=g(k),o=y(),i=h("dt"),i.textContent="Cut",s=h("dd"),l=g(O),a=y(),c=h("dt"),c.textContent="Ballistic",u=h("dd"),m=g(I),_=y(),v=h("dt"),v.textContent="Acid",$=h("dd"),x=g(R),w=y(),E=h("dt"),E.textContent="Fire",S=h("dd"),C=g(M),T=y()},m(t,p){f(t,e,p),f(t,n,p),d(n,r),d(n,o),f(t,i,p),f(t,s,p),d(s,l),d(s,a),f(t,c,p),f(t,u,p),d(u,m),d(u,_),f(t,v,p),f(t,$,p),d($,x),d($,w),f(t,E,p),f(t,S,p),d(S,C),d(S,T)},p(t,e){1&e&&k!==(k=(t[1].reduce(pn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"")&&b(r,k),1&e&&O!==(O=(t[1].reduce(mn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"")&&b(l,O),1&e&&I!==(I=(t[1].reduce(hn,0)*(t[0].material_thickness??0)/t[1].length).toFixed(2)+"")&&b(m,I),1&e&&R!==(R=t[6]().toFixed(2)+"")&&b(x,R),1&e&&M!==(M=t[7]().toFixed(2)+"")&&b(C,M)},d(t){t&&p(e),t&&p(n),t&&p(i),t&&p(s),t&&p(c),t&&p(u),t&&p(v),t&&p($),t&&p(E),t&&p(S)}}}(t);return{c(){e=h("dt"),e.textContent="Protection",n=h("dd"),r=h("dl"),a&&a.c(),o=h("dt"),o.textContent="Environ.",i=h("dd"),s=g(l),$(o,"title","Environmental")},m(t,l){f(t,e,l),f(t,n,l),d(n,r),a&&a.m(r,null),d(r,o),d(r,i),d(i,s)},p(t,e){t[1].length&&a.p(t,e),1&e&&l!==(l=(t[0].environmental_protection??0)+"")&&b(s,l)},d(t){t&&p(e),t&&p(n),a&&a.d()}}}function fn(e){let n,r,o,i,s,l,a,c,u,_,v,x,w,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F=e[2]("head"),H=e[2]("eyes"),U=e[2]("mouth"),G=e[2]("torso"),W=(e[0].warmth??0)+"",z=F&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="head",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),V=H&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="eyes",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),Y=U&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="mouth",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),J=G&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="torso",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),K=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],X=[];for(let t=0;t<4;t+=1)X[t]=We(Pe(e,K,t));let Q=!e[3]&&function(t){let e;return{c(){e=g("Nothing.")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();function Z(t,e){return(null==S||1&e)&&(S=!!(t[0].flags??[]).includes("PERSONAL")),S?Qe:((null==C||1&e)&&(C=!!(t[0].flags??[]).includes("SKINTIGHT")),C?Xe:((null==T||1&e)&&(T=!!(t[0].flags??[]).includes("BELTED")),T?Ke:((null==k||1&e)&&(k=!!(t[0].flags??[]).includes("OUTER")),k?Je:((null==O||1&e)&&(O=!!(t[0].flags??[]).includes("WAIST")),O?Ye:((null==I||1&e)&&(I=!!(t[0].flags??[]).includes("AURA")),I?Ve:ze)))))}let tt=Z(e,-1),et=tt(e);let nt=function(t,e){return t[4]?tn:Ze}(e)(e);function rt(t,e){return t[0].armor?an:ln}let ot=rt(e),it=ot(e),st=(e[1].length||e[0].environmental_protection)&&dn(e);return{c(){n=h("section"),r=h("h1"),r.textContent="Armor",o=y(),i=h("dl"),s=h("dt"),s.textContent="Covers",l=h("dd"),z&&z.c(),a=y(),V&&V.c(),c=y(),Y&&Y.c(),u=y(),J&&J.c(),_=y();for(let t=0;t<4;t+=1)X[t].c();v=y(),Q&&Q.c(),x=y(),w=h("dt"),w.textContent="Layer",E=h("dd"),et.c(),R=y(),M=h("dt"),M.textContent="Warmth",A=h("dd"),N=g(W),L=h("dt"),L.textContent="Encumbrance",D=h("dd"),nt.c(),j=y(),q=h("dt"),q.textContent="Coverage\n    ",B=h("dd"),it.c(),P=y(),st&&st.c(),$(q,"title","This determines how likely it is that an attack hits the item instead of the player.")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(i,s),d(i,l),z&&z.m(l,null),d(l,a),V&&V.m(l,null),d(l,c),Y&&Y.m(l,null),d(l,u),J&&J.m(l,null),d(l,_);for(let t=0;t<4;t+=1)X[t].m(l,null);d(l,v),Q&&Q.m(l,null),d(l,x),d(i,w),d(i,E),et.m(E,null),d(E,R),d(i,M),d(i,A),d(A,N),d(i,L),d(i,D),nt.m(D,null),d(D,j),d(i,q),d(i,B),it.m(B,null),d(B,P),st&&st.m(i,null)},p(t,[e]){if(5&e){let n;for(K=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],n=0;n<4;n+=1){const r=Pe(t,K,n);X[n]?X[n].p(r,e):(X[n]=We(r),X[n].c(),X[n].m(l,v))}for(;n<4;n+=1)X[n].d(1)}tt!==(tt=Z(t,e))&&(et.d(1),et=tt(t),et&&(et.c(),et.m(E,R))),1&e&&W!==(W=(t[0].warmth??0)+"")&&b(N,W),nt.p(t,e),ot===(ot=rt(t))&&it?it.p(t,e):(it.d(1),it=ot(t),it&&(it.c(),it.m(B,P))),t[1].length||t[0].environmental_protection?st?st.p(t,e):(st=dn(t),st.c(),st.m(i,null)):st&&(st.d(1),st=null)},i:t,o:t,d(t){t&&p(n),z&&z.d(),V&&V.d(),Y&&Y.d(),J&&J.d(),m(X,t),Q&&Q.d(),et.d(),nt.d(),it.d(),st&&st.d()}}}const pn=(t,e)=>t+e.bash_resist??0,mn=(t,e)=>t+e.cut_resist??0,hn=(t,e)=>t+e.bullet_resist??0;function gn(t,e,n){var r,o,i,s;let{item:l}=e,a=O("data"),c=("string"==typeof l.material?[l.material]:null!==(r=l.material)&&void 0!==r?r:[]).map((t=>a.byId("material",t)));let u=(null!==(o=l.covers)&&void 0!==o?o:[]).length||(null!==(i=l.armor)&&void 0!==i?i:[]).length;const d=null!==(s=l.armor)&&void 0!==s?s:l.armor_portion_data;return t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,c,function(t){var e,n;return(null!==(e=l.covers)&&void 0!==e?e:[]).includes(t)||(null!==(n=l.armor)&&void 0!==n?n:[]).some((e=>{var n;return(null!==(n=e.covers)&&void 0!==n?n:[]).includes(t)}))},u,d,function(t){var e;const n=new Set,r=[];for(const o of null!==(e=t.covers)&&void 0!==e?e:[]){if(n.has(o))continue;const e=a.byId("body_part",o);e.opposite_part&&t.covers.includes(e.opposite_part)?(r.push(e.heading_multiple),n.add(e.opposite_part)):r.push(e.heading),n.add(o)}return r},()=>{let t=c.reduce(((t,e)=>t+e.acid_resist??0),0)/c.length;const e=l.environmental_protection??0;return e<10&&(t*=e/10),t},()=>{let t=c.reduce(((t,e)=>t+e.fire_resist??0),0)/c.length;const e=l.environmental_protection??0;return e<10&&(t*=e/10),t}]}class yn extends tt{constructor(t){super(),Z(this,t,gn,fn,i,{item:0})}}function _n(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r}function vn(t){let e,n,r,o,i,s,l,a,c,u,m=(t[0].required_level??0)+"",y=(t[0].max_level??0)+"";return r=new It({props:{id:t[0].skill,type:"skill"}}),{c(){e=h("dt"),e.textContent="Skill",n=h("dd"),J(r.$$.fragment),o=h("dt"),o.textContent="Required Level",i=h("dd"),s=g(m),l=h("dt"),l.textContent="Maximum Level",a=h("dd"),c=g(y)},m(t,p){f(t,e,p),f(t,n,p),K(r,n,null),f(t,o,p),f(t,i,p),d(i,s),f(t,l,p),f(t,a,p),d(a,c),u=!0},p(t,e){const n={};1&e&&(n.id=t[0].skill),r.$set(n),(!u||1&e)&&m!==(m=(t[0].required_level??0)+"")&&b(s,m),(!u||1&e)&&y!==(y=(t[0].max_level??0)+"")&&b(c,y)},i(t){u||(W(r.$$.fragment,t),u=!0)},o(t){z(r.$$.fragment,t),u=!1},d(t){t&&p(e),t&&p(n),X(r),t&&p(o),t&&p(i),t&&p(l),t&&p(a)}}}function $n(t){let e,n,r,o=t[0].chapters+"";return{c(){e=h("dt"),e.textContent="Chapters",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].chapters+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function bn(e){let n,r,o,i,s,l,a=e[6]+"";return r=new It({props:{id:e[5],type:"item"}}),{c(){n=h("li"),J(r.$$.fragment),o=g(" ("),i=g(a),s=g(")")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),d(n,s),l=!0},p:t,i(t){l||(W(r.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),l=!1},d(t){t&&p(n),X(r)}}}function xn(t){let e,n,r,o,i,s,l,a,c,u,v,$,x,w,E,S=(t[0].intelligence??0)+"",C=(t[0].time??0)+"",T=(t[0].fun??0)+"",k=t[0].skill&&vn(t),O=t[0].chapters&&$n(t),I=t[1].size&&function(t){let e,n,r,o,i=[...t[1].entries()].sort(wn),s=[];for(let e=0;e<i.length;e+=1)s[e]=bn(_n(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Recipes",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(2&e){let n;for(i=[...t[1].entries()].sort(wn),n=0;n<i.length;n+=1){const o=_n(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=bn(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Book",r=y(),o=h("dl"),k&&k.c(),i=h("dt"),i.textContent="Required Intelligence",s=h("dd"),l=g(S),a=h("dt"),a.textContent="Read Time",c=h("dd"),u=g(C),v=h("dt"),v.textContent="Fun",$=h("dd"),x=g(T),O&&O.c(),w=_(),I&&I.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),k&&k.m(o,null),d(o,i),d(o,s),d(s,l),d(o,a),d(o,c),d(c,u),d(o,v),d(o,$),d($,x),O&&O.m(o,null),d(o,w),I&&I.m(o,null),E=!0},p(t,[e]){t[0].skill?k?(k.p(t,e),1&e&&W(k,1)):(k=vn(t),k.c(),W(k,1),k.m(o,i)):k&&(U(),z(k,1,1,(()=>{k=null})),G()),(!E||1&e)&&S!==(S=(t[0].intelligence??0)+"")&&b(l,S),(!E||1&e)&&C!==(C=(t[0].time??0)+"")&&b(u,C),(!E||1&e)&&T!==(T=(t[0].fun??0)+"")&&b(x,T),t[0].chapters?O?O.p(t,e):(O=$n(t),O.c(),O.m(o,w)):O&&(O.d(1),O=null),t[1].size&&I.p(t,e)},i(t){E||(W(k),W(I),E=!0)},o(t){z(k),z(I),E=!1},d(t){t&&p(e),k&&k.d(),O&&O.d(),I&&I.d()}}}const wn=(t,e)=>t[1]!==e[1]?t[1]-e[1]:t[0].localeCompare(e[0]);function En(t,e,n){var r;let{item:o}=e,i=O("data");const s=new Map;function l(t,e){var n;s.set(t,Math.min(e,null!==(n=s.get(t))&&void 0!==n?n:1/0))}for(const t of i.byType("recipe"))if(Array.isArray(t.book_learn))for(const[e,n=0]of t.book_learn)if(e===o.id)l(t.result,n);else if(t.book_learn)for(const[e,n]of Object.entries(t.book_learn))e===o.id&&l(t.result,null!==(r=n.skill_level)&&void 0!==r?r:0);return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,s]}class Sn extends tt{constructor(t){super(),Z(this,t,En,xn,i,{item:0})}}function Cn(t,e,n){const r=t.slice();return r[1]=e[n][0],r[2]=e[n][1],r[4]=n,r}function Tn(t){let e,n,r,o=t[0].vitamins,i=[];for(let e=0;e<o.length;e+=1)i[e]=In(Cn(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("dt"),e.textContent="Vitamins (%RDA)",n=h("dd");for(let t=0;t<i.length;t+=1)i[t].c()},m(t,o){f(t,e,o),f(t,n,o);for(let t=0;t<i.length;t+=1)i[t].m(n,null);r=!0},p(t,e){if(1&e){let r;for(o=t[0].vitamins,r=0;r<o.length;r+=1){const s=Cn(t,o,r);i[r]?(i[r].p(s,e),W(i[r],1)):(i[r]=In(s),i[r].c(),W(i[r],1),i[r].m(n,null))}for(U(),r=o.length;r<i.length;r+=1)s(r);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),t&&p(n),m(i,t)}}}function kn(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function On(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function In(t){let e,n,r,o,i,s,l=t[2]+"";function a(t,e){return t[4]<t[0].vitamins.length-2?On:t[4]===t[0].vitamins.length-2?kn:void 0}e=new It({props:{id:t[1],type:"vitamin"}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g("%)"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[1]),e.$set(o),(!s||1&n)&&l!==(l=t[2]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Rn(t){let e,n,r,o,i,s,l,a,c,u,m,_,v,$,x,w,E,S,C,T,k,O,I,R,M=(t[0].calories??0)+"",A=(t[0].quench??0)+"",N=(t[0].fun??0)+"",L=(t[0].charges??1)+"",D=(t[0].spoils_in??"never")+"",j=(t[0].healthy??0)+"",q=t[0].vitamins&&Tn(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Comestible",r=y(),o=h("dl"),i=h("dt"),i.textContent="Calories",s=h("dd"),l=g(M),a=g(" kcal"),c=h("dt"),c.textContent="Quench",u=h("dd"),m=g(A),_=h("dt"),_.textContent="Enjoyability",v=h("dd"),$=g(N),x=h("dt"),x.textContent="Portions",w=h("dd"),E=g(L),S=h("dt"),S.textContent="Spoils In",C=h("dd"),T=g(D),k=h("dt"),k.textContent="Health",O=h("dd"),I=g(j),q&&q.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),d(s,l),d(s,a),d(o,c),d(o,u),d(u,m),d(o,_),d(o,v),d(v,$),d(o,x),d(o,w),d(w,E),d(o,S),d(o,C),d(C,T),d(o,k),d(o,O),d(O,I),q&&q.m(o,null),R=!0},p(t,[e]){(!R||1&e)&&M!==(M=(t[0].calories??0)+"")&&b(l,M),(!R||1&e)&&A!==(A=(t[0].quench??0)+"")&&b(m,A),(!R||1&e)&&N!==(N=(t[0].fun??0)+"")&&b($,N),(!R||1&e)&&L!==(L=(t[0].charges??1)+"")&&b(E,L),(!R||1&e)&&D!==(D=(t[0].spoils_in??"never")+"")&&b(T,D),(!R||1&e)&&j!==(j=(t[0].healthy??0)+"")&&b(I,j),t[0].vitamins?q?(q.p(t,e),1&e&&W(q,1)):(q=Tn(t),q.c(),W(q,1),q.m(o,null)):q&&(U(),z(q,1,1,(()=>{q=null})),G())},i(t){R||(W(q),R=!0)},o(t){z(q),R=!1},d(t){t&&p(e),q&&q.d()}}}function Mn(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class An extends tt{constructor(t){super(),Z(this,t,Mn,Rn,i,{item:0})}}function Nn(t){let e,n,r,o;return e=new At({props:{item:t[0].byId("item",t[4])}}),r=new It({props:{type:"item",id:t[4]}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};16&n&&(o.item=t[0].byId("item",t[4])),e.$set(o);const i={};16&n&&(i.id=t[4]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Ln(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[1],$$slots:{default:[Nn,({item:t})=>({4:t}),({item:t})=>t?16:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Component Of",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};48&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Dn(t,e,n){let{item_id:r}=e;const o=O("data"),i=o.byType("recipe").filter((t=>{if("recipe"!==t.type||!t.result||!o.byId("item",t.result))return!1;const e="string"==typeof t.using?[[t.using,1]]:t.using;return(null!=e?e:[]).map((([t,e])=>[o.byId("requirement",t),e])).concat([[t,1]]).flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))})).some((t=>t.some((t=>t.id===r))))})),s=[...new Set(i.map((t=>t.result)))].sort(((t,e)=>st(o.byId("item",t)).localeCompare(st(o.byId("item",e)))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,s,r]}class jn extends tt{constructor(t){super(),Z(this,t,Dn,Ln,i,{item_id:2})}}function qn(e){let n,r;return{c(){n=h("span"),r=g(e[1]),w(n,"font-family","monospace"),$(n,"class","c_"+e[0])},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Bn(t){return"string"==typeof t?`i_${t}`:Bn(t[0])}function Pn(t,e,n){let{item:r}=e;const o=r.color?r.color:r.bgcolor?Bn(r.bgcolor):null,i="string"==typeof r.symbol?r.symbol:r.symbol[0];return t.$$set=t=>{"item"in t&&n(2,r=t.item)},[o,i,r]}class Fn extends tt{constructor(t){super(),Z(this,t,Pn,qn,i,{item:2})}}function Hn(t){let e,n,r,o;return e=new Fn({props:{item:t[0].byId("furniture",t[3].id)}}),r=new It({props:{id:t[3].id,type:"furniture"}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};8&n&&(o.item=t[0].byId("furniture",t[3].id)),e.$set(o);const i={};8&n&&(i.id=t[3].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Un(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[1],$$slots:{default:[Hn,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Deconstruct",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Gn(t,e,n){let{item_id:r}=e;const o=O("data");let i=o.byType("furniture").filter((t=>{var e,n;const i=(null===(e=t.deconstruct)||void 0===e?void 0:e.items)?mt(o,{subtype:"collection",entries:t.deconstruct.items}):[],s=(null===(n=t.bash)||void 0===n?void 0:n.items)?mt(o,{subtype:"collection",entries:t.bash.items}):[];return i.some((({id:t})=>t===r))||s.some((({id:t})=>t===r))})).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,i,r]}class Wn extends tt{constructor(t){super(),Z(this,t,Gn,Un,i,{item_id:2})}}function zn(t){let e,n,r,o;return e=new At({props:{item:t[0].byId("item",t[4])}}),r=new It({props:{type:"item",id:t[4]}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};16&n&&(o.item=t[0].byId("item",t[4])),e.$set(o);const i={};16&n&&(i.id=t[4]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Vn(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[1],$$slots:{default:[zn,({item:t})=>({4:t}),({item:t})=>t?16:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Disassemble",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};48&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Yn(t,e,n){let{item_id:r}=e,o=O("data");const i=new Set;for(const t of o.byType("recipe"))if(t.result&&(t.reversible||"uncraft"===t.type)){(t.using?Array.isArray(t.using)?t.using:[[t.using,1]]:[]).map((([t,e])=>[o.byId("requirement",t),e])).concat([[t,1]]).flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components),{onlyRecoverable:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})).map((t=>t[0])).some((t=>t.id===r))&&i.add(t.result)}const s=[...i].sort(((t,e)=>st(o.byId("item",t)).localeCompare(st(o.byId("item",e)))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,s,r]}class Jn extends tt{constructor(t){super(),Z(this,t,Yn,Vn,i,{item_id:2})}}function Kn(t){let e,n,r,o,i,s,l,a=at(t[7].prob)+"";return e=new At({props:{item:t[0].byId("monster",t[7].id)}}),r=new It({props:{type:"monster",id:t[7].id}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment),o=g(" ("),i=g(a),s=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,s,a),l=!0},p(t,n){const o={};128&n&&(o.item=t[0].byId("monster",t[7].id)),e.$set(o);const s={};128&n&&(s.id=t[7].id),r.$set(s),(!l||128&n)&&a!==(a=at(t[7].prob)+"")&&b(i,a)},i(t){l||(W(e.$$.fragment,t),W(r.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(s)}}}function Xn(t){let e,n,r,o;return e=new At({props:{item:t[6]}}),r=new It({props:{id:t[6].id,type:"monster"}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};64&n&&(o.item=t[6]),e.$set(o);const i={};64&n&&(i.id=t[6].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Qn(t){let e,n,r,o=t[1].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[1],$$slots:{default:[Kn,({item:t})=>({7:t}),({item:t})=>t?128:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Dropped By",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};384&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),i=t[2].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[2],$$slots:{default:[Xn,({item:t})=>({6:t}),({item:t})=>t?64:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Butcher",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};320&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){o&&o.c(),e=y(),i&&i.c(),n=_()},m(t,s){o&&o.m(t,s),f(t,e,s),i&&i.m(t,s),f(t,n,s),r=!0},p(t,[e]){t[1].length&&o.p(t,e),t[2].length&&i.p(t,e)},i(t){r||(W(o),W(i),r=!0)},o(t){z(o),z(i),r=!1},d(t){o&&o.d(t),t&&p(e),i&&i.d(t),t&&p(n)}}}function Zn(t,e,n){let{item_id:r}=e,o=O("data");const i=o.byType("monster").flatMap((t=>{if(!t.id)return[];const e=o.flatDeathDrops(t.id).find((t=>t.id===r));return e?[{id:t.id,prob:e.prob}]:[]}));i.sort(((t,e)=>e.prob-t.prob));const s=o.byType("harvest").filter((t=>(t=>{var e,n;return null!==(n=null===(e=t.entries)||void 0===e?void 0:e.flatMap((t=>"bionic_group"===t.type?o.flattenItemGroup(o.byId("item_group",t.drop)).map((t=>t.id)):[t.drop])))&&void 0!==n?n:[]})(t).some((t=>t===r)))),l=o.byType("monster").filter((t=>t.id&&s.some((e=>e.id===t.harvest))));return t.$$set=t=>{"item_id"in t&&n(3,r=t.item_id)},[o,i,l,r]}class tr extends tt{constructor(t){super(),Z(this,t,Zn,Qn,i,{item_id:3})}}function er(t){let e,n,r,o,i,s,l,a=(t[3].seed_data.grow??"1 day")+"";return e=new At({props:{item:t[3]}}),r=new It({props:{id:t[3].id,type:"item"}}),{c(){J(e.$$.fragment),n=y(),J(r.$$.fragment),o=g(" ("),i=g(a),s=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,s,a),l=!0},p(t,n){const o={};8&n&&(o.item=t[3]),e.$set(o);const s={};8&n&&(s.id=t[3].id),r.$set(s),(!l||8&n)&&a!==(a=(t[3].seed_data.grow??"1 day")+"")&&b(i,a)},i(t){l||(W(e.$$.fragment,t),W(r.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(s)}}}function nr(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[0],$$slots:{default:[er,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Grown From",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function rr(t,e,n){let{item_id:r}=e;const o=O("data").byType("item").filter((t=>{var e;return!(!t.id||!t.seed_data)&&(t.seed_data.fruit===r||(null===(e=t.seed_data.byproducts)||void 0===e?void 0:e.includes(r)))}));return t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[o,r]}class or extends tt{constructor(t){super(),Z(this,t,rr,nr,i,{item_id:1})}}function ir(t){let e,n,r,o=t[0].min_strength+"";return{c(){e=h("dt"),e.textContent="Min Strength",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].min_strength+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function sr(t){let e,n,r,o,i=t[0].valid_mod_locations.map(ar).join(", ")+"";return{c(){e=h("dt"),e.textContent="Mod Slots",n=h("dd"),r=g(i),o=y()},m(t,i){f(t,e,i),f(t,n,i),d(n,r),d(n,o)},p(t,e){1&e&&i!==(i=t[0].valid_mod_locations.map(ar).join(", ")+"")&&b(r,i)},d(t){t&&p(e),t&&p(n)}}}function lr(t){let e,n,r,o,i,s,l,a,c,u,m,_,v,x,w,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,U,G,V,Y,Q=(t[0].range??0)+"",Z=(t[0].dispersion??0)+"",tt=((t[0].flags??[]).includes("DISABLE_SIGHTS")?90:t[0].sight_dispersion??30)+"",et=(t[0].recoil??0)+"",nt=(t[0].loudness??0)+"",rt=(t[0].reload??100)+"",ot=(t[0].reload_noise_volume??0)+"",it=(t[0].durability??0)+"";l=new It({props:{type:"skill",id:t[0].skill}});let st=t[0].min_strength&&ir(t),lt=t[0].valid_mod_locations?.length&&sr(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Ranged",r=y(),o=h("dl"),i=h("dt"),i.textContent="Skill",s=h("dd"),J(l.$$.fragment),st&&st.c(),a=h("dt"),a.textContent="Base Damage",c=h("dd"),c.textContent=`${t[1].amount??0} (${t[1].damage_type??"bullet"})\n    `,u=h("dt"),u.textContent="Armor Penetration",m=h("dd"),m.textContent=`${t[1].armor_penetration??0}`,_=h("dt"),_.textContent="Range Bonus",v=h("dd"),x=g(Q),w=h("dt"),w.textContent="Base Dispersion",E=h("dd"),S=g(Z),C=h("dt"),C.textContent="Sight Dispersion",T=h("dd"),k=g(tt),O=y(),I=h("dt"),I.textContent="Base Recoil",R=h("dd"),M=g(et),A=h("dt"),A.textContent="Loudness Modifier\n    ",N=h("dd"),L=g(nt),D=h("dt"),D.textContent="Reload Time",j=h("dd"),q=g(rt),B=g(" moves"),P=h("dt"),P.textContent="Reload Noise Volume\n    ",F=h("dd"),H=g(ot),lt&&lt.c(),U=h("dt"),U.textContent="Durability",G=h("dd"),V=g(it),$(_,"title","Added to ammo range"),$(w,"title","Added to ammo dispersion"),$(A,"title","Modifies base loudness as provided by the currently loaded ammo"),$(P,"title","Volume of the noise made when reloading this weapon")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),K(l,s,null),st&&st.m(o,null),d(o,a),d(o,c),d(o,u),d(o,m),d(o,_),d(o,v),d(v,x),d(o,w),d(o,E),d(E,S),d(o,C),d(o,T),d(T,k),d(T,O),d(o,I),d(o,R),d(R,M),d(o,A),d(o,N),d(N,L),d(o,D),d(o,j),d(j,q),d(j,B),d(o,P),d(o,F),d(F,H),lt&&lt.m(o,null),d(o,U),d(o,G),d(G,V),Y=!0},p(t,[e]){const n={};1&e&&(n.id=t[0].skill),l.$set(n),t[0].min_strength?st?st.p(t,e):(st=ir(t),st.c(),st.m(o,a)):st&&(st.d(1),st=null),(!Y||1&e)&&Q!==(Q=(t[0].range??0)+"")&&b(x,Q),(!Y||1&e)&&Z!==(Z=(t[0].dispersion??0)+"")&&b(S,Z),(!Y||1&e)&&tt!==(tt=((t[0].flags??[]).includes("DISABLE_SIGHTS")?90:t[0].sight_dispersion??30)+"")&&b(k,tt),(!Y||1&e)&&et!==(et=(t[0].recoil??0)+"")&&b(M,et),(!Y||1&e)&&nt!==(nt=(t[0].loudness??0)+"")&&b(L,nt),(!Y||1&e)&&rt!==(rt=(t[0].reload??100)+"")&&b(q,rt),(!Y||1&e)&&ot!==(ot=(t[0].reload_noise_volume??0)+"")&&b(H,ot),t[0].valid_mod_locations?.length?lt?lt.p(t,e):(lt=sr(t),lt.c(),lt.m(o,U)):lt&&(lt.d(1),lt=null),(!Y||1&e)&&it!==(it=(t[0].durability??0)+"")&&b(V,it)},i(t){Y||(W(l.$$.fragment,t),Y=!0)},o(t){z(l.$$.fragment,t),Y=!1},d(t){t&&p(e),X(l),st&&st.d(),lt&&lt.d()}}}const ar=([t,e])=>`${t} (${e})`;function cr(t,e,n){var r;let{item:o}=e;const i=Array.isArray(o.ranged_damage)?o.ranged_damage[0]:o.ranged_damage&&"values"in o.ranged_damage?o.ranged_damage.values[0]:null!==(r=o.ranged_damage)&&void 0!==r?r:{amount:0,damage_type:"bullet",armor_penetration:0};return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i]}class ur extends tt{constructor(t){super(),Z(this,t,cr,lr,i,{item:0})}}function dr(t,e,n){const r=t.slice();return r[15]=e[n],r}function fr(t){let e,n,r,o,i,s,l,a,c,u,_,v,x,w,E,S,C,T=(t[0].bashing??0)+"",k=(t[0].cutting??0)+"",O=t[3](t[0])+"";let I=function(t,e){return t[4]?mr:pr}(t)(t),R=t[1].length&&function(t){let e,n,r,o,i=t[1],s=[];for(let e=0;e<i.length;e+=1)s[e]=hr(dr(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Techniques",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","no-bullets")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(2&e){let n;for(i=t[1],n=0;n<i.length;n+=1){const o=dr(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=hr(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Melee",r=y(),o=h("dl"),i=h("dt"),i.textContent="Bash",s=h("dd"),l=g(T),a=h("dt"),I.c(),c=y(),u=h("dd"),_=g(k),v=h("dt"),v.textContent="To Hit",x=h("dd"),x.textContent=`${t[2]}`,w=h("dt"),w.textContent="Moves Per Attack",E=h("dd"),S=g(O),R&&R.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),d(s,l),d(o,a),I.m(a,null),d(a,c),d(o,u),d(u,_),d(o,v),d(o,x),d(o,w),d(o,E),d(E,S),R&&R.m(o,null),C=!0},p(t,e){(!C||1&e)&&T!==(T=(t[0].bashing??0)+"")&&b(l,T),(!C||1&e)&&k!==(k=(t[0].cutting??0)+"")&&b(_,k),(!C||1&e)&&O!==(O=t[3](t[0])+"")&&b(S,O),t[1].length&&R.p(t,e)},i(t){C||(W(R),C=!0)},o(t){z(R),C=!1},d(t){t&&p(e),I.d(),R&&R.d()}}}function pr(t){let e;return{c(){e=g("Cut")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function mr(t){let e;return{c(){e=g("Pierce")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function hr(e){let n,r,o,i,s,l,a,c=it(e[15].description)+"";return o=new It({props:{type:"technique",id:e[15].id}}),{c(){n=h("li"),r=h("strong"),J(o.$$.fragment),i=g(": "),s=g(c),l=y()},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(n,i),d(n,s),d(n,l),a=!0},p:t,i(t){a||(W(o.$$.fragment,t),a=!0)},o(t){z(o.$$.fragment,t),a=!1},d(t){t&&p(n),X(o)}}}function gr(t){let e,n,r=(t[0].bashing||t[0].cutting)&&fr(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0].bashing||t[0].cutting?r?(r.p(t,n),1&n&&W(r,1)):(r=fr(t),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(U(),z(r,1,1,(()=>{r=null})),G())},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function yr(t,e,n){var r,o,i,s;let l=O("data"),{item:a}=e,c=(null!==(r=a.techniques)&&void 0!==r?r:[]).map((t=>l.byId("technique",t)));const u={bad:0,none:1,solid:2,weapon:3},d={hand:0,short:1,long:2},f={point:0,line:1,any:2,every:3},p={clumsy:0,uneven:1,neutral:2,good:3},m="object"==typeof a.to_hit?(({grip:t="weapon",length:e="hand",surface:n="any",balance:r="neutral"})=>-7+u[t]+d[e]+f[n]+p[r])(a.to_hit):null!==(o=a.to_hit)&&void 0!==o?o:0;const h=(null!==(i=a.flags)&&void 0!==i?i:[]).includes("SPEAR")||(null!==(s=a.flags)&&void 0!==s?s:[]).includes("STAB");return t.$$set=t=>{"item"in t&&n(0,a=t.item)},[a,c,m,function(t){return Math.floor(65+(Math.floor(ct(t.volume)/62.5)+Math.floor(ut(t.weight)/60)))},h]}class _r extends tt{constructor(t){super(),Z(this,t,yr,gr,i,{item:0})}}function vr(t,e,n){const r=t.slice();return r[6]=e[n],r}function $r(t,e,n){const r=t.slice();return r[9]=e[n].id,r[10]=e[n].count,r[12]=n,r}function br(t,e,n){const r=t.slice();return r[13]=e[n],r}function xr(t,e,n){const r=t.slice();return r[16]=e[n],r[12]=n,r}function wr(t,e,n){const r=t.slice();return r[18]=e[n],r}function Er(t,e,n){const r=t.slice();return r[21]=e[n],r[12]=n,r}function Sr(e){let n,r,o,i,s,l,a,c,u,d,m,h=(e[21].amount??1)+"",_=1===(e[21].amount??1)?"":"s",v=e[21].level+"",$=0!==e[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return l=new It({props:{type:"tool_quality",id:e[21].id}}),{c(){$&&$.c(),n=y(),r=g(h),o=g(" tool"),i=g(_),s=g("\n            with "),J(l.$$.fragment),a=g(" of "),c=g(v),u=g("\n            or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,s,e),K(l,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(l.$$.fragment,t),m=!0)},o(t){z(l.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(s),X(l,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function Cr(t){let e,n,r,o=t[18],i=[];for(let e=0;e<o.length;e+=1)i[e]=Sr(Er(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(4&r){let l;for(o=t[18],l=0;l<o.length;l+=1){const s=Er(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=Sr(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Tr(e){let n,r;return n=new It({props:{type:"item",id:e[16].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function kr(e){let n,r,o=st(e[0].byId("item",e[16].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[0].craftingPseudoItem(e[16].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Or(e){let n,r,o,i,s=e[16].count+"",l=1!==e[16].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(s),o=g(" charge"),l&&l.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),l&&l.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),l&&l.d(t),t&&p(i)}}}function Ir(t){let e,n,r,o,i,s,l=0!==t[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[kr,Tr],c=[];n=function(t,e){return t[0].craftingPseudoItem(t[16].id)?0:1}(t),r=c[n]=a[n](t);let u=t[16].count>0&&Or(t);return{c(){l&&l.c(),e=y(),r.c(),o=y(),u&&u.c(),i=_()},m(t,r){l&&l.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),s=!0},p(t,e){r.p(t,e),t[16].count>0&&u.p(t,e)},i(t){s||(W(r),s=!0)},o(t){z(r),s=!1},d(t){l&&l.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function Rr(t){let e,n,r,o=t[13],i=[];for(let e=0;e<o.length;e+=1)i[e]=Ir(xr(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(3&r){let l;for(o=t[13],l=0;l<o.length;l+=1){const s=xr(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=Ir(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Mr(e){let n,r,o,i=0!==e[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new It({props:{type:"item",id:e[9],count:e[10]}}),{c(){i&&i.c(),n=y(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function Ar(t){let e,n,r,o=t[6].map(t[5]),i=[];for(let e=0;e<o.length;e+=1)i[e]=Mr($r(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(9&r){let l;for(o=t[6].map(t[5]),l=0;l<o.length;l+=1){const s=$r(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=Mr(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Nr(t){let e,n,r,o=((t[2]??[]).length||t[1].length)&&function(t){let e,n,r,o,i,s,l=t[2]??[],a=[];for(let e=0;e<l.length;e+=1)a[e]=Cr(wr(t,l,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[1],g=[];for(let e=0;e<u.length;e+=1)g[e]=Rr(br(t,u,e));const _=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=y(),r=h("dd"),o=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();i=y();for(let t=0;t<g.length;t+=1)g[t].c()},m(t,l){f(t,e,l),f(t,n,l),f(t,r,l),d(r,o);for(let t=0;t<a.length;t+=1)a[t].m(o,null);d(o,i);for(let t=0;t<g.length;t+=1)g[t].m(o,null);s=!0},p(t,e){if(4&e){let n;for(l=t[2]??[],n=0;n<l.length;n+=1){const r=wr(t,l,n);a[n]?(a[n].p(r,e),W(a[n],1)):(a[n]=Cr(r),a[n].c(),W(a[n],1),a[n].m(o,i))}for(U(),n=l.length;n<a.length;n+=1)c(n);G()}if(3&e){let n;for(u=t[1],n=0;n<u.length;n+=1){const r=br(t,u,n);g[n]?(g[n].p(r,e),W(g[n],1)):(g[n]=Rr(r),g[n].c(),W(g[n],1),g[n].m(o,null))}for(U(),n=u.length;n<g.length;n+=1)_(n);G()}},i(t){if(!s){for(let t=0;t<l.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);s=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);s=!1},d(t){t&&p(e),t&&p(n),t&&p(r),m(a,t),m(g,t)}}}(t),i=t[3].length&&function(t){let e,n,r,o,i,s=t[3],l=[];for(let e=0;e<s.length;e+=1)l[e]=Ar(vr(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=y(),r=h("dd"),o=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),f(t,n,s),f(t,r,s),d(r,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(9&e){let n;for(s=t[3],n=0;n<s.length;n+=1){const r=vr(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=Ar(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),t&&p(r),m(l,t)}}}(t);return{c(){o&&o.c(),e=y(),i&&i.c(),n=_()},m(t,s){o&&o.m(t,s),f(t,e,s),i&&i.m(t,s),f(t,n,s),r=!0},p(t,[e]){((t[2]??[]).length||t[1].length)&&o.p(t,e),t[3].length&&i.p(t,e)},i(t){r||(W(o),W(i),r=!0)},o(t){z(o),z(i),r=!1},d(t){o&&o.d(t),t&&p(e),i&&i.d(t),t&&p(n)}}}function Lr(t,e,n){let{requirement:r}=e;const o=O("data");let{tools:i,qualities:s,components:l}=o.normalizeRequirements(r);return t.$$set=t=>{"requirement"in t&&n(4,r=t.requirement)},[o,i,s,l,r,t=>({...t,item:o.byId("item",t.id)})]}class Dr extends tt{constructor(t){super(),Z(this,t,Lr,Nr,i,{requirement:4})}}function jr(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=void 0!==e[n][1]?e[n][1]:0,r}function qr(t,e,n){const r=t.slice();return r[8]=e[n][0],r[5]=e[n][1],r}function Br(t,e,n){const r=t.slice();return r[8]=e[n][0],r[5]=e[n][1],r}function Pr(t,e,n){const r=t.slice();return r[13]=e[n],r}function Fr(t,e,n){const r=t.slice();return r[16]=e[n],r}function Hr(t,e,n){const r=t.slice();return r[8]=e[n][0],r[5]=e[n][1],r[20]=n,r}function Ur(e){let n;return{c(){n=g("none")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Gr(t){let e,n,r,o,i,s=(t[0].difficulty??0)+"";return e=new It({props:{type:"skill",id:t[0].skill_used}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")")},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),i=!0},p(t,n){const o={};1&n&&(o.id=t[0].skill_used),e.$set(o),(!i||1&n)&&s!==(s=(t[0].difficulty??0)+"")&&b(r,s)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Wr(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function zr(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Vr(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Yr(e){let n,r,o,i,s,l,a=e[5]+"";n=new It({props:{type:"skill",id:e[8]}});let c=function(t,e){return t[20]===t[1].length-2?Vr:t[20]!==t[1].length-1?zr:void 0}(e),u=c&&c(e);return{c(){J(n.$$.fragment),r=g(" ("),o=g(a),i=g(")"),u&&u.c(),s=_()},m(t,e){K(n,t,e),f(t,r,e),f(t,o,e),f(t,i,e),u&&u.m(t,e),f(t,s,e),l=!0},p:t,i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){z(n.$$.fragment,t),l=!1},d(t){X(n,t),t&&p(r),t&&p(o),t&&p(i),u&&u.d(t),t&&p(s)}}}function Jr(t){let e,n,r,o,i,s=t[0].proficiencies??[],l=[];for(let e=0;e<s.length;e+=1)l[e]=Kr(Fr(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Proficiencies",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(s=t[0].proficiencies??[],n=0;n<s.length;n+=1){const o=Fr(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Kr(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Kr(t){let e,n,r;return n=new It({props:{type:"proficiency",id:t[16].proficiency}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[16].proficiency),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Xr(e){let n;return{c(){n=h("em"),n.textContent="none"},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Qr(t){let e,n,r,o,i,s=t[0].batch_time_factors[0]+"",l=t[0].batch_time_factors[1]+"",a=1===t[0].batch_time_factors[1]?"":"s";return{c(){e=g(s),n=g("% at >"),r=g(l),o=g(" unit"),i=g(a)},m(t,s){f(t,e,s),f(t,n,s),f(t,r,s),f(t,o,s),f(t,i,s)},p(t,n){1&n&&s!==(s=t[0].batch_time_factors[0]+"")&&b(e,s),1&n&&l!==(l=t[0].batch_time_factors[1]+"")&&b(r,l),1&n&&a!==(a=1===t[0].batch_time_factors[1]?"":"s")&&b(i,a)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o),t&&p(i)}}}function Zr(t){let e,n,r,o=t[0].charges+"";return{c(){e=h("dt"),e.textContent="Recipe Makes",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].charges+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function to(t){let e,n,r,o,i,s=t[0].byproducts,l=[];for(let e=0;e<s.length;e+=1)l[e]=eo(Pr(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Byproducts",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(s=t[0].byproducts,n=0;n<s.length;n+=1){const o=Pr(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=eo(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function eo(t){let e,n,r;return n=new It({props:{type:"item",id:t[13][0],count:t[13][1]??1}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[13][0]),1&e&&(r.count=t[13][1]??1),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function no(e){let n;return{c(){n=g("no")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function ro(t){let e,n,r,o,i;const s=[io,oo],l=[];function a(t,e){return 1&e&&(n=!!Array.isArray(t[0].autolearn)),n?0:1}return r=a(t,-1),o=l[r]=s[r](t),{c(){e=h("ul"),o.c(),$(e,"class","comma-separated")},m(t,n){f(t,e,n),l[r].m(e,null),i=!0},p(t,n){let i=r;r=a(t,n),r===i?l[r].p(t,n):(U(),z(l[i],1,1,(()=>{l[i]=null})),G(),o=l[r],o?o.p(t,n):(o=l[r]=s[r](t),o.c()),W(o,1),o.m(e,null))},i(t){i||(W(o),i=!0)},o(t){z(o),i=!1},d(t){t&&p(e),l[r].d()}}}function oo(t){let e,n,r,o=t[0].skill_used&&so(t),i=t[1].length&&function(t){let e,n,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=lo(qr(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(2&n){let s;for(r=t[1],s=0;s<r.length;s+=1){const i=qr(t,r,s);o[s]?(o[s].p(i,n),W(o[s],1)):(o[s]=lo(i),o[s].c(),W(o[s],1),o[s].m(e.parentNode,e))}for(U(),s=r.length;s<o.length;s+=1)i(s);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}(t);return{c(){o&&o.c(),e=y(),i&&i.c(),n=_()},m(t,s){o&&o.m(t,s),f(t,e,s),i&&i.m(t,s),f(t,n,s),r=!0},p(t,n){t[0].skill_used?o?(o.p(t,n),1&n&&W(o,1)):(o=so(t),o.c(),W(o,1),o.m(e.parentNode,e)):o&&(U(),z(o,1,1,(()=>{o=null})),G()),t[1].length&&i.p(t,n)},i(t){r||(W(o),W(i),r=!0)},o(t){z(o),z(i),r=!1},d(t){o&&o.d(t),t&&p(e),i&&i.d(t),t&&p(n)}}}function io(t){let e,n,r=t[0].autolearn,o=[];for(let e=0;e<r.length;e+=1)o[e]=ao(Br(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(1&n){let s;for(r=t[0].autolearn,s=0;s<r.length;s+=1){const i=Br(t,r,s);o[s]?(o[s].p(i,n),W(o[s],1)):(o[s]=ao(i),o[s].c(),W(o[s],1),o[s].m(e.parentNode,e))}for(U(),s=r.length;s<o.length;s+=1)i(s);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function so(t){let e,n,r,o,i,s,l=(t[0].difficulty??0)+"";return n=new It({props:{type:"skill",id:t[0].skill_used}}),{c(){e=h("li"),J(n.$$.fragment),r=g(" ("),o=g(l),i=g(")")},m(t,l){f(t,e,l),K(n,e,null),d(e,r),d(e,o),d(e,i),s=!0},p(t,e){const r={};1&e&&(r.id=t[0].skill_used),n.$set(r),(!s||1&e)&&l!==(l=(t[0].difficulty??0)+"")&&b(o,l)},i(t){s||(W(n.$$.fragment,t),s=!0)},o(t){z(n.$$.fragment,t),s=!1},d(t){t&&p(e),X(n)}}}function lo(e){let n,r,o,i,s,l,a=e[5]+"";return r=new It({props:{type:"skill",id:e[8]}}),{c(){n=h("li"),J(r.$$.fragment),o=g(" ("),i=g(a),s=g(")")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),d(n,s),l=!0},p:t,i(t){l||(W(r.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),l=!1},d(t){t&&p(n),X(r)}}}function ao(t){let e,n,r,o,i,s,l=t[5]+"";return n=new It({props:{type:"skill",id:t[8]}}),{c(){e=h("li"),J(n.$$.fragment),r=g(" ("),o=g(l),i=g(")")},m(t,l){f(t,e,l),K(n,e,null),d(e,r),d(e,o),d(e,i),s=!0},p(t,e){const r={};1&e&&(r.id=t[8]),n.$set(r),(!s||1&e)&&l!==(l=t[5]+"")&&b(o,l)},i(t){s||(W(n.$$.fragment,t),s=!0)},o(t){z(n.$$.fragment,t),s=!1},d(t){t&&p(e),X(n)}}}function co(e){let n,r,o,i,s,l,a,c=e[5]+"";return o=new It({props:{id:e[4],type:"item"}}),{c(){n=h("li"),r=h("span"),J(o.$$.fragment),i=g(" ("),s=g(c),l=g(")"),w(r,"white-space","nowrap")},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(r,i),d(r,s),d(r,l),a=!0},p:t,i(t){a||(W(o.$$.fragment,t),a=!0)},o(t){z(o.$$.fragment,t),a=!1},d(t){t&&p(n),X(o)}}}function uo(t){let e,n,r,o,i,s,l,a,c,u,v,x,w,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V,Y=(t[0].time??"0 m")+"",Q=(t[0].activity_level??"MODERATE_EXERCISE")+"",Z=JSON.stringify(t[0],null,2)+"";const tt=[Gr,Ur],et=[];function nt(t,e){return t[0].skill_used?0:1}l=nt(t),a=et[l]=tt[l](t);let rt=t[1].length&&function(t){let e,n,r,o,i=t[1],s=[];for(let e=0;e<i.length;e+=1)s[e]=Yr(Hr(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));let a=null;return i.length||(a=Wr()),{c(){e=h("dt"),e.textContent="Other Skills",n=h("dd");for(let t=0;t<s.length;t+=1)s[t].c();a&&a.c(),r=y()},m(t,i){f(t,e,i),f(t,n,i);for(let t=0;t<s.length;t+=1)s[t].m(n,null);a&&a.m(n,null),d(n,r),o=!0},p(t,e){if(2&e){let o;for(i=t[1],o=0;o<i.length;o+=1){const l=Hr(t,i,o);s[o]?(s[o].p(l,e),W(s[o],1)):(s[o]=Yr(l),s[o].c(),W(s[o],1),s[o].m(n,r))}for(U(),o=i.length;o<s.length;o+=1)l(o);G(),i.length?a&&(a.d(1),a=null):a||(a=Wr(),a.c(),a.m(n,r))}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t),a&&a.d()}}}(t),ot=t[0].proficiencies&&Jr(t);function it(t,e){return t[0].batch_time_factors?Qr:Xr}let st=it(t),lt=st(t),at=t[0].charges&&Zr(t);R=new Dr({props:{requirement:t[0]}});let ct=t[0].byproducts?.length&&to(t);const ut=[ro,no],dt=[];function ft(t,e){return t[0].autolearn?0:1}N=ft(t),L=dt[N]=ut[N](t);let pt=t[2].length&&function(t){let e,n,r,o,i=t[2],s=[];for(let e=0;e<i.length;e+=1)s[e]=co(jr(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Written In",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(4&e){let n;for(i=t[2],n=0;n<i.length;n+=1){const o=jr(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=co(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Craft",r=y(),o=h("dl"),i=h("dt"),i.textContent="Primary Skill",s=h("dd"),a.c(),c=y(),rt&&rt.c(),u=_(),ot&&ot.c(),v=h("dt"),v.textContent="Time to Complete",x=h("dd"),w=g(Y),E=h("dt"),E.textContent="Activity Level",S=h("dd"),C=g(Q),T=h("dt"),T.textContent="Batch Time Savings",k=h("dd"),lt.c(),O=y(),at&&at.c(),I=_(),J(R.$$.fragment),ct&&ct.c(),M=h("dt"),M.textContent="Autolearn\n    ",A=h("dd"),L.c(),D=y(),pt&&pt.c(),j=y(),q=h("details"),B=h("summary"),B.textContent="Recipe JSON",P=y(),F=h("pre"),H=g(Z),$(M,"title","Learned at these skill levels, otherwise only learnable from a book"),$(e,"class","recipe")},m(t,a){f(t,e,a),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),et[l].m(s,null),d(s,c),rt&&rt.m(o,null),d(o,u),ot&&ot.m(o,null),d(o,v),d(o,x),d(x,w),d(o,E),d(o,S),d(S,C),d(o,T),d(o,k),lt.m(k,null),d(k,O),at&&at.m(o,null),d(o,I),K(R,o,null),ct&&ct.m(o,null),d(o,M),d(o,A),dt[N].m(A,null),d(A,D),pt&&pt.m(o,null),d(e,j),d(e,q),d(q,B),d(q,P),d(q,F),d(F,H),V=!0},p(t,[e]){let n=l;l=nt(t),l===n?et[l].p(t,e):(U(),z(et[n],1,1,(()=>{et[n]=null})),G(),a=et[l],a?a.p(t,e):(a=et[l]=tt[l](t),a.c()),W(a,1),a.m(s,c)),t[1].length&&rt.p(t,e),t[0].proficiencies?ot?(ot.p(t,e),1&e&&W(ot,1)):(ot=Jr(t),ot.c(),W(ot,1),ot.m(o,v)):ot&&(U(),z(ot,1,1,(()=>{ot=null})),G()),(!V||1&e)&&Y!==(Y=(t[0].time??"0 m")+"")&&b(w,Y),(!V||1&e)&&Q!==(Q=(t[0].activity_level??"MODERATE_EXERCISE")+"")&&b(C,Q),st===(st=it(t))&&lt?lt.p(t,e):(lt.d(1),lt=st(t),lt&&(lt.c(),lt.m(k,O))),t[0].charges?at?at.p(t,e):(at=Zr(t),at.c(),at.m(o,I)):at&&(at.d(1),at=null);const r={};1&e&&(r.requirement=t[0]),R.$set(r),t[0].byproducts?.length?ct?(ct.p(t,e),1&e&&W(ct,1)):(ct=to(t),ct.c(),W(ct,1),ct.m(o,M)):ct&&(U(),z(ct,1,1,(()=>{ct=null})),G());let i=N;N=ft(t),N===i?dt[N].p(t,e):(U(),z(dt[i],1,1,(()=>{dt[i]=null})),G(),L=dt[N],L?L.p(t,e):(L=dt[N]=ut[N](t),L.c()),W(L,1),L.m(A,D)),t[2].length&&pt.p(t,e),(!V||1&e)&&Z!==(Z=JSON.stringify(t[0],null,2)+"")&&b(H,Z)},i(t){V||(W(a),W(rt),W(ot),W(R.$$.fragment,t),W(ct),W(L),W(pt),V=!0)},o(t){z(a),z(rt),z(ot),z(R.$$.fragment,t),z(ct),z(L),z(pt),V=!1},d(t){t&&p(e),et[l].d(),rt&&rt.d(),ot&&ot.d(),lt.d(),at&&at.d(),X(R),ct&&ct.d(),dt[N].d(),pt&&pt.d()}}}function fo(t,e,n){var r;let{recipe:o}=e,i=void 0===(s=o.skills_required)||0===s.length?[]:Array.isArray(s[0])?s:[s];var s;const l=Array.isArray(o.book_learn)?[...o.book_learn]:[...Object.entries(null!==(r=o.book_learn)&&void 0!==r?r:{})].map((([t,e])=>[t,e.skill_level]));return l.sort(((t,e)=>{var n,r;return(null!==(n=t[1])&&void 0!==n?n:0)-(null!==(r=e[1])&&void 0!==r?r:0)})),t.$$set=t=>{"recipe"in t&&n(0,o=t.recipe)},[o,i,l]}class po extends tt{constructor(t){super(),Z(this,t,fo,uo,i,{recipe:0})}}function mo(t,e,n){const r=t.slice();return r[3]=e[n],r}function ho(t){let e,n,r=[],o=new Map,i=t[0];const s=t=>t[3];for(let e=0;e<i.length;e+=1){let n=mo(t,i,e),l=s(n);o.set(l,r[e]=go(l,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);f(t,e,o),n=!0},p(t,n){1&n&&(i=t[0],U(),r=function(t,e,n,r,o,i,s,l,a,c,u,d){let f=t.length,p=i.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],y=new Map,_=new Map;for(m=p;m--;){const t=d(o,i,m),l=n(t);let a=s.get(l);a?r&&a.p(t,e):(a=c(l,t),a.c()),y.set(l,g[m]=a),l in h&&_.set(l,Math.abs(m-h[l]))}const v=new Set,$=new Set;function b(t){W(t,1),t.m(l,u),s.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],r=e.key,o=n.key;e===n?(u=e.first,f--,p--):y.has(o)?!s.has(r)||v.has(r)?b(e):$.has(o)?f--:_.get(r)>_.get(o)?($.add(r),b(e)):(v.add(o),f--):(a(n,s),f--)}for(;f--;){const e=t[f];y.has(e.key)||a(e,s)}for(;p;)b(g[p-1]);return g}(r,n,s,1,t,i,o,e.parentNode,Y,go,e,mo),G())},i(t){if(!n){for(let t=0;t<i.length;t+=1)W(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)z(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&p(e)}}}function go(t,e){let n,r,o;return r=new po({props:{recipe:e[3]}}),{key:t,first:null,c(){n=_(),J(r.$$.fragment),this.first=n},m(t,e){f(t,n,e),K(r,t,e),o=!0},p(t,n){e=t},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r,t)}}}function yo(t){let e,n,r=t[0].length&&ho(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function _o(t,e,n){let{item_id:r}=e,o=O("data").byType("recipe").filter((t=>"recipe"===t.type&&t.result===r&&!t.obsolete));return t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[o,r]}class vo extends tt{constructor(t){super(),Z(this,t,_o,yo,i,{item_id:1})}}function $o(t){let e,n,r,o,i,s,l,a=t[5].sym+"",c=st(t[5])+"";return{c(){e=h("span"),n=g(a),o=y(),i=h("span"),s=g(c),w(e,"font-family","monospace"),$(e,"class",r="c_"+t[5].color),$(i,"title",l=t[5].id)},m(t,r){f(t,e,r),d(e,n),f(t,o,r),f(t,i,r),d(i,s)},p(t,o){32&o&&a!==(a=t[5].sym+"")&&b(n,a),32&o&&r!==(r="c_"+t[5].color)&&$(e,"class",r),32&o&&c!==(c=st(t[5])+"")&&b(s,c),32&o&&l!==(l=t[5].id)&&$(i,"title",l)},d(t){t&&p(e),t&&p(o),t&&p(i)}}}function bo(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[0],$$slots:{default:[$o,({item:t})=>({5:t}),({item:t})=>t?32:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Loot",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};96&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function xo(t,e,n){let{item_id:r}=e,o=O("data");const i=o.byType("mapgen").filter((t=>o.mapgenSpawnItems(t).includes(r))),s=new Set;for(const t of i){if(!t.om_terrain)continue;let e;e="string"==typeof t.om_terrain?[t.om_terrain]:"string"==typeof t.om_terrain[0]?t.om_terrain:t.om_terrain.flatMap((t=>t)),e.forEach((t=>{const e=o.byId("overmap_terrain",t);var n;e&&e.id&&!(n=e.id,"string"==typeof n?[n]:n).some((t=>/necropolis|ranch_camp|robofachq|mapgen-test/.test(t)))&&s.add(e)}))}const l=[...s].sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[l,r]}class wo extends tt{constructor(t){super(),Z(this,t,xo,bo,i,{item_id:1})}}function Eo(e){let n,r,o,i,s,l,a,c,u,m,_,v,$=(e[0].diameter??0)+"",x=(e[0].width??0)+"";return{c(){n=h("section"),r=h("h1"),r.textContent="Wheel",o=y(),i=h("dl"),s=h("dt"),s.textContent="Diameter",l=h("dd"),a=g($),c=g('"'),u=h("dt"),u.textContent="Width",m=h("dd"),_=g(x),v=g('"')},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(i,s),d(i,l),d(l,a),d(l,c),d(i,u),d(i,m),d(m,_),d(m,v)},p(t,[e]){1&e&&$!==($=(t[0].diameter??0)+"")&&b(a,$),1&e&&x!==(x=(t[0].width??0)+"")&&b(_,x)},i:t,o:t,d(t){t&&p(n)}}}function So(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class Co extends tt{constructor(t){super(),Z(this,t,So,Eo,i,{item:0})}}function To(t,e,n){const r=t.slice();return r[21]=e[n],r}function ko(t,e,n){const r=t.slice();return r[0]=e[n],r}function Oo(t,e,n){const r=t.slice();return r[26]=e[n],r}function Io(t,e,n){const r=t.slice();return r[29]=e[n][0],r[30]=e[n][1],r}function Ro(t,e,n){const r=t.slice();return r[29]=e[n],r}function Mo(t,e,n){const r=t.slice();return r[29]=e[n].id,r[30]=e[n].count,r}function Ao(t,e,n){const r=t.slice();return r[37]=e[n],r}function No(t,e,n){const r=t.slice();return r[40]=e[n].quality,r[41]=e[n].level,r}function Lo(t,e,n){const r=t.slice();return r[44]=e[n],r}function Do(t,e,n){const r=t.slice();return r[47]=e[n],r}function jo(t,e,n){const r=t.slice();return r[50]=e[n].type,r[29]=e[n].id,r}function qo(t,e,n){const r=t.slice();return r[53]=e[n].id,r[54]=e[n].max_charges,r}function Bo(t,e,n){const r=t.slice();return r[57]=e[n],r}function Po(e){let n,r,o;return r=new It({props:{type:"material",id:e[57].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Fo(t){let e,n,r,o,i,s,l,a,c,u=t[54]+"",m="GUN"===t[0].type?"round":"charge",_=1===t[54]?"":"s";return l=new It({props:{type:"ammunition_type",id:t[53]}}),{c(){e=h("li"),n=g(u),r=y(),o=g(m),i=g(_),s=g(" of\n                  "),J(l.$$.fragment),a=y()},m(t,u){f(t,e,u),d(e,n),d(e,r),d(e,o),d(e,i),d(e,s),K(l,e,null),d(e,a),c=!0},p(t,e){(!c||1&e[0])&&m!==(m="GUN"===t[0].type?"round":"charge")&&b(o,m)},i(t){c||(W(l.$$.fragment,t),c=!0)},o(t){z(l.$$.fragment,t),c=!1},d(t){t&&p(e),X(l)}}}function Ho(e){let n,r,o;return r=new It({props:{type:e[50],id:e[29]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Uo(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Go(e){let n,r,o;return r=new It({props:{type:"json_flag",id:e[47].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Wo(e){let n,r,o;return r=new It({props:{type:"fault",id:e[44].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function zo(e){let n,r,o,i,s,l,a,c,u=e[41]+"";return l=new It({props:{type:"tool_quality",id:e[40].id}}),{c(){n=h("li"),r=g("Has level "),o=h("strong"),i=g(u),s=y(),J(l.$$.fragment),a=g(" quality.\n                ")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(o,i),d(o,s),K(l,o,null),d(n,a),c=!0},p:t,i(t){c||(W(l.$$.fragment,t),c=!0)},o(t){z(l.$$.fragment,t),c=!1},d(t){t&&p(n),X(l)}}}function Vo(e){let n,r,o;return r=new It({props:{type:"vehicle_part",id:e[37].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Yo(e){let n,r,o;return r=new It({props:{id:e[29],count:e[30],type:"item"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Jo(t){let e,n;return e=new Sn({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ko(t){let e,n;return e=new yn({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Xo(t){let e,n,r,o,i,s,l,a,c=t[0].displacement+"";return{c(){e=h("section"),n=h("h1"),n.textContent="Engine",r=y(),o=h("dl"),i=h("dt"),i.textContent="Displacement",s=h("dd"),l=g(c),a=g(" cc")},m(t,c){f(t,e,c),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),d(s,l),d(s,a)},p(t,e){1&e[0]&&c!==(c=t[0].displacement+"")&&b(l,c)},d(t){t&&p(e)}}}function Qo(t){let e,n;return e=new An({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Zo(t){let e,n;return e=new Co({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ti(t){let e,n,r,o,i,s,l,a,c,u,_,v,x=t[0].seed_data.grow+"",w=[t[0].seed_data.fruit].concat(t[0].seed_data.byproducts??[]),E=[];for(let e=0;e<w.length;e+=1)E[e]=ei(Ro(t,w,e));const S=t=>z(E[t],1,1,(()=>{E[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Grows Into",r=y(),o=h("dl"),i=h("dt"),i.textContent="Harvest Results",s=h("dd"),l=h("ul");for(let t=0;t<E.length;t+=1)E[t].c();a=y(),c=h("dt"),c.textContent="Growing Time",u=h("dd"),_=g(x),$(l,"class","comma-separated")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s),d(s,l);for(let t=0;t<E.length;t+=1)E[t].m(l,null);d(s,a),d(o,c),d(o,u),d(u,_),v=!0},p(t,e){if(1&e[0]){let n;for(w=[t[0].seed_data.fruit].concat(t[0].seed_data.byproducts??[]),n=0;n<w.length;n+=1){const r=Ro(t,w,n);E[n]?(E[n].p(r,e),W(E[n],1)):(E[n]=ei(r),E[n].c(),W(E[n],1),E[n].m(l,null))}for(U(),n=w.length;n<E.length;n+=1)S(n);G()}(!v||1&e[0])&&x!==(x=t[0].seed_data.grow+"")&&b(_,x)},i(t){if(!v){for(let t=0;t<w.length;t+=1)W(E[t]);v=!0}},o(t){E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)z(E[t]);v=!1},d(t){t&&p(e),m(E,t)}}}function ei(t){let e,n,r;return n=new It({props:{type:"item",id:t[29]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[29]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function ni(t){let e,n,r,o,i,s;n=new _r({props:{item:t[0]}});const l=[oi,ri],a=[];function c(t,e){return"GUN"===t[0].type?0:"AMMO"===t[0].type?1:-1}return~(o=c(t))&&(i=a[o]=l[o](t)),{c(){e=h("div"),J(n.$$.fragment),r=y(),i&&i.c(),$(e,"class","side-by-side")},m(t,i){f(t,e,i),K(n,e,null),d(e,r),~o&&a[o].m(e,null),s=!0},p(t,r){const s={};1&r[0]&&(s.item=t[0]),n.$set(s);let u=o;o=c(t),o===u?~o&&a[o].p(t,r):(i&&(U(),z(a[u],1,1,(()=>{a[u]=null})),G()),~o?(i=a[o],i?i.p(t,r):(i=a[o]=l[o](t),i.c()),W(i,1),i.m(e,null)):i=null)},i(t){s||(W(n.$$.fragment,t),W(i),s=!0)},o(t){z(n.$$.fragment,t),z(i),s=!1},d(t){t&&p(e),X(n),~o&&a[o].d()}}}function ri(t){let e,n;return e=new Le({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function oi(t){let e,n;return e=new ur({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ii(e){let n,r,o,i,s,l,a,c,u=e[30]+"",m=1===e[30]?"":"s";return l=new It({props:{id:e[29],type:"ammunition_type"}}),{c(){n=h("li"),r=g(u),o=g(" round"),i=g(m),s=g(" of "),J(l.$$.fragment),a=y()},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(n,s),K(l,n,null),d(n,a),c=!0},p:t,i(t){c||(W(l.$$.fragment,t),c=!0)},o(t){z(l.$$.fragment,t),c=!1},d(t){t&&p(n),X(l)}}}function si(e){let n,r,o=e[26]+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function li(e){let n,r,o;return r=new It({props:{type:"item",id:e[0]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function ai(e){let n,r,o,i,s,l,a,c,u,v,b=e[21].moves+"",x=null!=e[21].max_contains_volume&&function(e){let n,r,o,i=e[21].max_contains_volume+"";return{c(){n=h("dt"),n.textContent="Volume Capacity",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),w=null!=e[21].max_contains_weight&&function(e){let n,r,o,i=e[21].max_contains_weight+"";return{c(){n=h("dt"),n.textContent="Weight Capacity",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),E=e[21].ammo_restriction&&function(t){let e,n,r,o,i,s=[...Object.entries(t[21].ammo_restriction)],l=[];for(let e=0;e<s.length;e+=1)l[e]=ii(Io(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Ammo Restriction",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(64&e[0]){let n;for(s=[...Object.entries(t[21].ammo_restriction)],n=0;n<s.length;n+=1){const o=Io(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=ii(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),S=e[21].max_item_length&&function(e){let n,r,o,i=e[21].max_item_length+"";return{c(){n=h("dt"),n.textContent="Max Item Length",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),C="0 ml"!==e[21].min_item_volume&&function(e){let n,r,o,i=e[21].min_item_volume+"";return{c(){n=h("dt"),n.textContent="Min Item Volume",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),T=e[21].flag_restriction&&function(t){let e,n,r,o,i=t[21].flag_restriction,s=[];for(let e=0;e<i.length;e+=1)s[e]=si(Oo(t,i,e));return{c(){e=h("dt"),e.textContent="Flag Restriction",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=y(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o)},p(t,e){if(64&e[0]){let n;for(i=t[21].flag_restriction,n=0;n<i.length;n+=1){const o=Oo(t,i,n);s[n]?s[n].p(o,e):(s[n]=si(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),k=e[21].item_restriction&&function(t){let e,n,r,o,i,s=t[21].item_restriction,l=[];for(let e=0;e<s.length;e+=1)l[e]=li(ko(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Item Restriction",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(64&e[0]){let n;for(s=t[21].item_restriction,n=0;n<s.length;n+=1){const o=ko(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=li(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e);return{c(){n=h("dl"),x&&x.c(),r=_(),w&&w.c(),o=_(),E&&E.c(),i=_(),S&&S.c(),s=_(),C&&C.c(),l=h("dt"),l.textContent="Moves to Remove Item",a=h("dd"),c=g(b),T&&T.c(),u=_(),k&&k.c()},m(t,e){f(t,n,e),x&&x.m(n,null),d(n,r),w&&w.m(n,null),d(n,o),E&&E.m(n,null),d(n,i),S&&S.m(n,null),d(n,s),C&&C.m(n,null),d(n,l),d(n,a),d(a,c),T&&T.m(n,null),d(n,u),k&&k.m(n,null),v=!0},p(t,e){null!=t[21].max_contains_volume&&x.p(t,e),null!=t[21].max_contains_weight&&w.p(t,e),t[21].ammo_restriction&&E.p(t,e),t[21].max_item_length&&S.p(t,e),"0 ml"!==t[21].min_item_volume&&C.p(t,e),t[21].flag_restriction&&T.p(t,e),t[21].item_restriction&&k.p(t,e)},i(t){v||(W(E),W(k),v=!0)},o(t){z(E),z(k),v=!1},d(t){t&&p(n),x&&x.d(),w&&w.d(),E&&E.d(),S&&S.d(),C&&C.d(),T&&T.d(),k&&k.d()}}}function ci(e){let n,r,o,i,s,l,a,c,u,v,x,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V,Y,Q,Z,tt,et,nt,rt,ot,lt,at,ct,ut,pt,mt,ht,gt,yt,_t,vt,$t,bt,xt,wt,Et,St,Ct,Tt,kt,Ot=st(e[0])+"",It=dt(e[0].volume)+"",Rt=ft(e[0].weight)+"",Mt=e[1](e[0])+"",Nt=it(e[0].description)+"",Lt=e[6].filter(ui).length;r=new At({props:{item:e[0]}});let Dt=e[3].length&&function(t){let e,n,r,o,i,s=t[3],l=[];for(let e=0;e<s.length;e+=1)l[e]=Po(Bo(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Material",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(8&e[0]){let n;for(s=t[3],n=0;n<s.length;n+=1){const o=Bo(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Po(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),jt=e[9].length&&function(t){let e,n,r,o,i,s=t[9].map(t[13]),l=[];for(let e=0;e<s.length;e+=1)l[e]=Fo(qo(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Ammo",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","no-bullets")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(769&e[0]){let n;for(s=t[9].map(t[13]),n=0;n<s.length;n+=1){const o=qo(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Fo(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),qt=e[7].length&&function(t){let e,n,r,o,i,s=t[7],l=[];for(let e=0;e<s.length;e+=1)l[e]=Ho(jo(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Compatible Magazines",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(128&e[0]){let n;for(s=t[7],n=0;n<s.length;n+=1){const o=jo(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Ho(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),Bt=e[4],Pt=[];for(let t=0;t<Bt.length;t+=1)Pt[t]=Go(Do(e,Bt,t));const Ft=t=>z(Pt[t],1,1,(()=>{Pt[t]=null}));let Ht=null;Bt.length||(Ht=Uo());let Ut=e[5].length&&function(t){let e,n,r,o,i,s=t[5],l=[];for(let e=0;e<s.length;e+=1)l[e]=Wo(Lo(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Possible Faults",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(32&e[0]){let n;for(s=t[5],n=0;n<s.length;n+=1){const o=Lo(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Wo(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),Gt=e[2].length&&function(t){let e,n,r,o,i,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=zo(No(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Qualities",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","no-bullets")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(4&e[0]){let n;for(s=t[2],n=0;n<s.length;n+=1){const o=No(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=zo(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),Wt=e[11].length&&function(t){let e,n,r,o,i,s=t[11],l=[];for(let e=0;e<s.length;e+=1)l[e]=Vo(Ao(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Vehicle Parts",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(2048&e[0]){let n;for(s=t[11],n=0;n<s.length;n+=1){const o=Ao(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Vo(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),zt=e[10]&&function(t){let e,n,r,o,i=t[10].components,s=[];for(let e=0;e<i.length;e+=1)s[e]=Yo(Mo(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Disassembles Into",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(1024&e[0]){let n;for(i=t[10].components,n=0;n<i.length;n+=1){const o=Mo(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Yo(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),Vt=e[12]&&function(e){let n,r;return n=new Oe({props:{picture:e[12]}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}(e),Yt="BOOK"===e[0].type&&Jo(e),Jt=("ARMOR"===e[0].type||"TOOL_ARMOR"===e[0].type)&&Ko(e),Kt="ENGINE"===e[0].type&&e[0].displacement&&Xo(e),Xt="COMESTIBLE"===e[0].type&&Qo(e),Qt="WHEEL"===e[0].type&&Zo(e),Zt=e[0].seed_data&&ti(e),te=(e[0].bashing||e[0].cutting||"GUN"===e[0].type||"AMMO"===e[0].type)&&ni(e),ee=Lt&&function(t){let e,n,r,o,i=t[6].filter(di),s=[];for(let e=0;e<i.length;e+=1)s[e]=ai(To(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Pockets",r=y();for(let t=0;t<s.length;t+=1)s[t].c()},m(t,i){f(t,e,i),d(e,n),d(e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);o=!0},p(t,n){if(64&n[0]){let r;for(i=t[6].filter(di),r=0;r<i.length;r+=1){const o=To(t,i,r);s[r]?(s[r].p(o,n),W(s[r],1)):(s[r]=ai(o),s[r].c(),W(s[r],1),s[r].m(e,null))}for(U(),r=i.length;r<s.length;r+=1)l(r);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),m(s,t)}}}(e);return ut=new jn({props:{item_id:e[0].id}}),yt=new vo({props:{item_id:e[0].id}}),vt=new tr({props:{item_id:e[0].id}}),bt=new or({props:{item_id:e[0].id}}),wt=new Jn({props:{item_id:e[0].id}}),St=new Wn({props:{item_id:e[0].id}}),Tt=new wo({props:{item_id:e[0].id}}),{c(){n=h("h1"),J(r.$$.fragment),o=y(),i=g(Ot),s=y(),l=h("section"),a=h("h1"),a.textContent="General",c=y(),u=h("div"),v=h("div"),x=h("dl"),Dt&&Dt.c(),E=h("dt"),E.textContent="Volume",S=h("dd"),C=g(It),T=h("dt"),T.textContent="Weight",k=h("dd"),O=g(Rt),I=h("dt"),I.textContent="Length",R=h("dd"),M=g(Mt),jt&&jt.c(),A=_(),qt&&qt.c(),N=h("dt"),N.textContent="Flags",L=h("dd"),D=h("ul");for(let t=0;t<Pt.length;t+=1)Pt[t].c();Ht&&Ht.c(),j=y(),Ut&&Ut.c(),q=_(),Gt&&Gt.c(),B=_(),Wt&&Wt.c(),P=_(),zt&&zt.c(),F=y(),H=h("p"),V=g(Nt),Y=y(),Q=h("div"),Vt&&Vt.c(),Z=y(),Yt&&Yt.c(),tt=y(),Jt&&Jt.c(),et=y(),Kt&&Kt.c(),nt=y(),Xt&&Xt.c(),rt=y(),Qt&&Qt.c(),ot=y(),Zt&&Zt.c(),lt=y(),te&&te.c(),at=y(),ee&&ee.c(),ct=y(),J(ut.$$.fragment),pt=y(),mt=h("div"),ht=h("h2"),ht.textContent="Obtaining",gt=y(),J(yt.$$.fragment),_t=y(),J(vt.$$.fragment),$t=y(),J(bt.$$.fragment),xt=y(),J(wt.$$.fragment),Et=y(),J(St.$$.fragment),Ct=y(),J(Tt.$$.fragment),$(D,"class","comma-separated"),w(H,"color","var(--cata-color-gray)"),w(H,"margin-bottom","0"),$(u,"class","side-by-side no-margin"),$(ht,"class","svelte-18ijh8q"),$(mt,"class","hide-header-if-no-sections svelte-18ijh8q")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),f(t,s,e),f(t,l,e),d(l,a),d(l,c),d(l,u),d(u,v),d(v,x),Dt&&Dt.m(x,null),d(x,E),d(x,S),d(S,C),d(x,T),d(x,k),d(k,O),d(x,I),d(x,R),d(R,M),jt&&jt.m(x,null),d(x,A),qt&&qt.m(x,null),d(x,N),d(x,L),d(L,D);for(let t=0;t<Pt.length;t+=1)Pt[t].m(D,null);Ht&&Ht.m(D,null),d(L,j),Ut&&Ut.m(x,null),d(x,q),Gt&&Gt.m(x,null),d(x,B),Wt&&Wt.m(x,null),d(x,P),zt&&zt.m(x,null),d(v,F),d(v,H),d(H,V),d(u,Y),d(u,Q),Vt&&Vt.m(Q,null),f(t,Z,e),Yt&&Yt.m(t,e),f(t,tt,e),Jt&&Jt.m(t,e),f(t,et,e),Kt&&Kt.m(t,e),f(t,nt,e),Xt&&Xt.m(t,e),f(t,rt,e),Qt&&Qt.m(t,e),f(t,ot,e),Zt&&Zt.m(t,e),f(t,lt,e),te&&te.m(t,e),f(t,at,e),ee&&ee.m(t,e),f(t,ct,e),K(ut,t,e),f(t,pt,e),f(t,mt,e),d(mt,ht),d(mt,gt),K(yt,mt,null),d(mt,_t),K(vt,mt,null),d(mt,$t),K(bt,mt,null),d(mt,xt),K(wt,mt,null),d(mt,Et),K(St,mt,null),d(mt,Ct),K(Tt,mt,null),kt=!0},p(t,e){const n={};if(1&e[0]&&(n.item=t[0]),r.$set(n),(!kt||1&e[0])&&Ot!==(Ot=st(t[0])+"")&&b(i,Ot),t[3].length&&Dt.p(t,e),(!kt||1&e[0])&&It!==(It=dt(t[0].volume)+"")&&b(C,It),(!kt||1&e[0])&&Rt!==(Rt=ft(t[0].weight)+"")&&b(O,Rt),(!kt||1&e[0])&&Mt!==(Mt=t[1](t[0])+"")&&b(M,Mt),t[9].length&&jt.p(t,e),t[7].length&&qt.p(t,e),16&e[0]){let n;for(Bt=t[4],n=0;n<Bt.length;n+=1){const r=Do(t,Bt,n);Pt[n]?(Pt[n].p(r,e),W(Pt[n],1)):(Pt[n]=Go(r),Pt[n].c(),W(Pt[n],1),Pt[n].m(D,null))}for(U(),n=Bt.length;n<Pt.length;n+=1)Ft(n);G(),Bt.length?Ht&&(Ht.d(1),Ht=null):Ht||(Ht=Uo(),Ht.c(),Ht.m(D,null))}t[5].length&&Ut.p(t,e),t[2].length&&Gt.p(t,e),t[11].length&&Wt.p(t,e),t[10]&&zt.p(t,e),(!kt||1&e[0])&&Nt!==(Nt=it(t[0].description)+"")&&b(V,Nt),t[12]&&Vt.p(t,e),"BOOK"===t[0].type?Yt?(Yt.p(t,e),1&e[0]&&W(Yt,1)):(Yt=Jo(t),Yt.c(),W(Yt,1),Yt.m(tt.parentNode,tt)):Yt&&(U(),z(Yt,1,1,(()=>{Yt=null})),G()),"ARMOR"===t[0].type||"TOOL_ARMOR"===t[0].type?Jt?(Jt.p(t,e),1&e[0]&&W(Jt,1)):(Jt=Ko(t),Jt.c(),W(Jt,1),Jt.m(et.parentNode,et)):Jt&&(U(),z(Jt,1,1,(()=>{Jt=null})),G()),"ENGINE"===t[0].type&&t[0].displacement?Kt?Kt.p(t,e):(Kt=Xo(t),Kt.c(),Kt.m(nt.parentNode,nt)):Kt&&(Kt.d(1),Kt=null),"COMESTIBLE"===t[0].type?Xt?(Xt.p(t,e),1&e[0]&&W(Xt,1)):(Xt=Qo(t),Xt.c(),W(Xt,1),Xt.m(rt.parentNode,rt)):Xt&&(U(),z(Xt,1,1,(()=>{Xt=null})),G()),"WHEEL"===t[0].type?Qt?(Qt.p(t,e),1&e[0]&&W(Qt,1)):(Qt=Zo(t),Qt.c(),W(Qt,1),Qt.m(ot.parentNode,ot)):Qt&&(U(),z(Qt,1,1,(()=>{Qt=null})),G()),t[0].seed_data?Zt?(Zt.p(t,e),1&e[0]&&W(Zt,1)):(Zt=ti(t),Zt.c(),W(Zt,1),Zt.m(lt.parentNode,lt)):Zt&&(U(),z(Zt,1,1,(()=>{Zt=null})),G()),t[0].bashing||t[0].cutting||"GUN"===t[0].type||"AMMO"===t[0].type?te?(te.p(t,e),1&e[0]&&W(te,1)):(te=ni(t),te.c(),W(te,1),te.m(at.parentNode,at)):te&&(U(),z(te,1,1,(()=>{te=null})),G()),Lt&&ee.p(t,e);const o={};1&e[0]&&(o.item_id=t[0].id),ut.$set(o);const s={};1&e[0]&&(s.item_id=t[0].id),yt.$set(s);const l={};1&e[0]&&(l.item_id=t[0].id),vt.$set(l);const a={};1&e[0]&&(a.item_id=t[0].id),bt.$set(a);const c={};1&e[0]&&(c.item_id=t[0].id),wt.$set(c);const u={};1&e[0]&&(u.item_id=t[0].id),St.$set(u);const d={};1&e[0]&&(d.item_id=t[0].id),Tt.$set(d)},i(t){if(!kt){W(r.$$.fragment,t),W(Dt),W(jt),W(qt);for(let t=0;t<Bt.length;t+=1)W(Pt[t]);W(Ut),W(Gt),W(Wt),W(zt),W(Vt),W(Yt),W(Jt),W(Xt),W(Qt),W(Zt),W(te),W(ee),W(ut.$$.fragment,t),W(yt.$$.fragment,t),W(vt.$$.fragment,t),W(bt.$$.fragment,t),W(wt.$$.fragment,t),W(St.$$.fragment,t),W(Tt.$$.fragment,t),kt=!0}},o(t){z(r.$$.fragment,t),z(Dt),z(jt),z(qt),Pt=Pt.filter(Boolean);for(let t=0;t<Pt.length;t+=1)z(Pt[t]);z(Ut),z(Gt),z(Wt),z(zt),z(Vt),z(Yt),z(Jt),z(Xt),z(Qt),z(Zt),z(te),z(ee),z(ut.$$.fragment,t),z(yt.$$.fragment,t),z(vt.$$.fragment,t),z(bt.$$.fragment,t),z(wt.$$.fragment,t),z(St.$$.fragment,t),z(Tt.$$.fragment,t),kt=!1},d(t){t&&p(n),X(r),t&&p(s),t&&p(l),Dt&&Dt.d(),jt&&jt.d(),qt&&qt.d(),m(Pt,t),Ht&&Ht.d(),Ut&&Ut.d(),Gt&&Gt.d(),Wt&&Wt.d(),zt&&zt.d(),Vt&&Vt.d(),t&&p(Z),Yt&&Yt.d(t),t&&p(tt),Jt&&Jt.d(t),t&&p(et),Kt&&Kt.d(t),t&&p(nt),Xt&&Xt.d(t),t&&p(rt),Qt&&Qt.d(t),t&&p(ot),Zt&&Zt.d(t),t&&p(lt),te&&te.d(t),t&&p(at),ee&&ee.d(t),t&&p(ct),X(ut,t),t&&p(pt),t&&p(mt),X(yt),X(vt),X(bt),X(wt),X(St),X(Tt)}}}const ui=t=>"CONTAINER"===t.pocket_type,di=t=>"CONTAINER"===t.pocket_type;function fi(t,e,n){var r,o,i,s,l;let{item:a}=e,c=O("data");let u=(null!==(r=a.qualities)&&void 0!==r?r:[]).map((([t,e])=>({quality:c.byId("tool_quality",t),level:e}))),d=("string"==typeof a.material?[a.material]:null!==(o=a.material)&&void 0!==o?o:[]).map((t=>c.byId("material",t))),f=(null!==(i=a.flags)&&void 0!==i?i:[]).map((t=>{var e;return null!==(e=c.byId("json_flag",t))&&void 0!==e?e:{id:t}})),p=(null!==(s=a.faults)&&void 0!==s?s:[]).map((t=>c.byId("fault",t)));const m={pocket_type:"CONTAINER",min_item_volume:"0 ml",moves:100,fire_protection:!1,watertight:!1,airtight:!1,open_container:!1,rigid:!1,holster:!1};let h=(null!==(l=a.pocket_data)&&void 0!==l?l:[]).map((t=>({...m,...t}))),g=h.filter((t=>"MAGAZINE_WELL"===t.pocket_type)).flatMap((t=>{var e,n;return null!==(n=null===(e=t.item_restriction)||void 0===e?void 0:e.map((t=>({type:"item",id:t}))))&&void 0!==n?n:t.flag_restriction.map((t=>({type:"json_flag",id:t})))}));function y(t){var e;let n=0;for(const r of h)"MAGAZINE"===r.pocket_type&&r.ammo_restriction&&(n+=null!==(e=r.ammo_restriction[t])&&void 0!==e?e:0);return n}let _=h.flatMap((t=>{var e;return"MAGAZINE"===t.pocket_type?Object.keys(null!==(e=t.ammo_restriction)&&void 0!==e?e:{}):[]}));const v=(()=>{const t=c.uncraftRecipe(a.id);if(!t)return;return{components:(t.using?Array.isArray(t.using)?t.using:[[t.using,1]]:[]).map((([t,e])=>[c.byId("requirement",t),e])).concat([[t,1]]).flatMap((([t,e])=>{var n;return c.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))})).map((t=>t[0]))}})(),$=c.byType("vehicle_part").filter((t=>t.id&&t.item===a.id)),b=a.ascii_picture&&c.byId("ascii_art",a.ascii_picture);return t.$$set=t=>{"item"in t&&n(0,a=t.item)},[a,function(t){return t.longest_side?t.longest_side:`${Math.round(Math.cbrt(ct(t.volume)))} cm`},u,d,f,p,h,g,y,_,v,$,b,t=>({id:t,max_charges:y(t)})]}class pi extends tt{constructor(t){super(),Z(this,t,fi,ci,i,{item:0},[-1,-1])}}function mi(e){let n,r,o=JSON.stringify(e[0],null,2)+"";return{c(){n=h("pre"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p(t,[e]){1&e&&o!==(o=JSON.stringify(t[0],null,2)+"")&&b(r,o)},i:t,o:t,d(t){t&&p(n)}}}function hi(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class gi extends tt{constructor(t){super(),Z(this,t,hi,mi,i,{item:0})}}function yi(t){let e,n,r,o;return r=new It({props:{type:"item",id:t[0].repaired_with}}),{c(){e=h("dt"),e.textContent="Repaired With",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].repaired_with),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function _i(t){let e,n,r,o;return r=new It({props:{type:"item",id:t[0].salvaged_into}}),{c(){e=h("dt"),e.textContent="Salvaged Into",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].salvaged_into),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function vi(t){let e,n,r,o,i,s,l,a,c,u,m,v,x,w,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V,Y,J,K,X,Q,Z,tt,et,nt,rt,ot,it,st,lt,at,ct,ut=t[0].name+"",dt=t[0].density+"",ft=(t[0].specific_heat_liquid??4.186)+"",pt=(t[0].specific_heat_solid??2.108)+"",mt=(t[0].latent_heat??333)+"",ht=(t[0].bash_resist??0)+"",gt=(t[0].cut_resist??0)+"",yt=(t[0].bullet_resist??0)+"",_t=(t[0].acid_resist??0)+"",vt=(t[0].elec_resist??0)+"",$t=(t[0].chip_resist??0)+"",bt=t[0].edible?"yes":"no",xt=t[0].rotting?"yes":"no",wt=t[0].repaired_with&&yi(t),Et=t[0].salvaged_into&&_i(t);return{c(){e=h("h1"),n=g("Material: "),r=g(ut),o=y(),i=h("section"),s=h("h1"),s.textContent="Properties",l=y(),a=h("dl"),c=h("dt"),c.textContent="Density",u=h("dd"),m=g(dt),v=h("dt"),v.textContent="Specific Heat",x=h("dd"),w=g(ft),E=g(" (liquid) / "),S=g(pt),C=g(" (solid)\n    "),T=h("dt"),T.textContent="Latent Heat",k=h("dd"),O=g(mt),I=h("dt"),I.textContent="Resistance",R=h("dd"),M=h("dl"),A=h("dt"),A.textContent="Bash",N=h("dd"),L=g(ht),D=h("dt"),D.textContent="Cut",j=h("dd"),q=g(gt),B=h("dt"),B.textContent="Ballistic",P=h("dd"),F=g(yt),H=h("dt"),H.textContent="Acid",V=h("dd"),Y=g(_t),J=h("dt"),J.textContent="Electricity",K=h("dd"),X=g(vt),Q=h("dt"),Q.textContent="Chip",Z=h("dd"),tt=g($t),et=y(),wt&&wt.c(),nt=_(),Et&&Et.c(),rt=h("dt"),rt.textContent="Edible",ot=h("dd"),it=g(bt),st=h("dt"),st.textContent="Rots",lt=h("dd"),at=g(xt),$(c,"title","Relative to 'powder', which is 1"),$(Q,"title","Resistance to physical damage of the item itself"),$(st,"title","Corpses made of this material will go bad")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,s),d(i,l),d(i,a),d(a,c),d(a,u),d(u,m),d(a,v),d(a,x),d(x,w),d(x,E),d(x,S),d(x,C),d(a,T),d(a,k),d(k,O),d(a,I),d(a,R),d(R,M),d(M,A),d(M,N),d(N,L),d(M,D),d(M,j),d(j,q),d(M,B),d(M,P),d(P,F),d(M,H),d(M,V),d(V,Y),d(M,J),d(M,K),d(K,X),d(M,Q),d(M,Z),d(Z,tt),d(R,et),wt&&wt.m(a,null),d(a,nt),Et&&Et.m(a,null),d(a,rt),d(a,ot),d(ot,it),d(a,st),d(a,lt),d(lt,at),ct=!0},p(t,[e]){(!ct||1&e)&&ut!==(ut=t[0].name+"")&&b(r,ut),(!ct||1&e)&&dt!==(dt=t[0].density+"")&&b(m,dt),(!ct||1&e)&&ft!==(ft=(t[0].specific_heat_liquid??4.186)+"")&&b(w,ft),(!ct||1&e)&&pt!==(pt=(t[0].specific_heat_solid??2.108)+"")&&b(S,pt),(!ct||1&e)&&mt!==(mt=(t[0].latent_heat??333)+"")&&b(O,mt),(!ct||1&e)&&ht!==(ht=(t[0].bash_resist??0)+"")&&b(L,ht),(!ct||1&e)&&gt!==(gt=(t[0].cut_resist??0)+"")&&b(q,gt),(!ct||1&e)&&yt!==(yt=(t[0].bullet_resist??0)+"")&&b(F,yt),(!ct||1&e)&&_t!==(_t=(t[0].acid_resist??0)+"")&&b(Y,_t),(!ct||1&e)&&vt!==(vt=(t[0].elec_resist??0)+"")&&b(X,vt),(!ct||1&e)&&$t!==($t=(t[0].chip_resist??0)+"")&&b(tt,$t),t[0].repaired_with?wt?(wt.p(t,e),1&e&&W(wt,1)):(wt=yi(t),wt.c(),W(wt,1),wt.m(a,nt)):wt&&(U(),z(wt,1,1,(()=>{wt=null})),G()),t[0].salvaged_into?Et?(Et.p(t,e),1&e&&W(Et,1)):(Et=_i(t),Et.c(),W(Et,1),Et.m(a,rt)):Et&&(U(),z(Et,1,1,(()=>{Et=null})),G()),(!ct||1&e)&&bt!==(bt=t[0].edible?"yes":"no")&&b(it,bt),(!ct||1&e)&&xt!==(xt=t[0].rotting?"yes":"no")&&b(at,xt)},i(t){ct||(W(wt),W(Et),ct=!0)},o(t){z(wt),z(Et),ct=!1},d(t){t&&p(e),t&&p(o),t&&p(i),wt&&wt.d(),Et&&Et.d()}}}function $i(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class bi extends tt{constructor(t){super(),Z(this,t,$i,vi,i,{item:0})}}function xi(t,e,n){const r=t.slice();return r[3]=e[n],r}function wi(t){let e;return{c(){e=g("(default)")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ei(t){let e,n,r,o,i;n=new It({props:{type:"item",id:t[3].id}});let s=t[3].id===t[0].default&&wi();return{c(){e=h("li"),J(n.$$.fragment),r=y(),s&&s.c(),o=y()},m(t,l){f(t,e,l),K(n,e,null),d(e,r),s&&s.m(e,null),d(e,o),i=!0},p(t,n){t[3].id===t[0].default?s||(s=wi(),s.c(),s.m(e,o)):s&&(s.d(1),s=null)},i(t){i||(W(n.$$.fragment,t),i=!0)},o(t){z(n.$$.fragment,t),i=!1},d(t){t&&p(e),X(n),s&&s.d()}}}function Si(t){let e,n,r,o,i,s,l,a,c,u=st(t[0])+"",_=t[1],v=[];for(let e=0;e<_.length;e+=1)v[e]=Ei(xi(t,_,e));const $=t=>z(v[t],1,1,(()=>{v[t]=null}));return{c(){e=h("h1"),n=g("Ammunition Type: "),r=g(u),o=y(),i=h("section"),s=h("h1"),s.textContent="Compatible Variants",l=y(),a=h("ul");for(let t=0;t<v.length;t+=1)v[t].c()},m(t,u){f(t,e,u),d(e,n),d(e,r),f(t,o,u),f(t,i,u),d(i,s),d(i,l),d(i,a);for(let t=0;t<v.length;t+=1)v[t].m(a,null);c=!0},p(t,[e]){if((!c||1&e)&&u!==(u=st(t[0])+"")&&b(r,u),3&e){let n;for(_=t[1],n=0;n<_.length;n+=1){const r=xi(t,_,n);v[n]?(v[n].p(r,e),W(v[n],1)):(v[n]=Ei(r),v[n].c(),W(v[n],1),v[n].m(a,null))}for(U(),n=_.length;n<v.length;n+=1)$(n);G()}},i(t){if(!c){for(let t=0;t<_.length;t+=1)W(v[t]);c=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)z(v[t]);c=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m(v,t)}}}function Ci(t,e,n){let{item:r}=e;const o=O("data").byType("item").flatMap((t=>"AMMO"===t.type&&t.id&&t.ammo_type===r.id?[t]:[]));return o.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o]}class Ti extends tt{constructor(t){super(),Z(this,t,Ci,Si,i,{item:0})}}function ki(t,e,n){const r=t.slice();return r[10]=e[n],r}function Oi(t,e,n){const r=t.slice();return r[10]=e[n],r}function Ii(t,e,n){const r=t.slice();return r[10]=e[n],r}function Ri(t,e,n){const r=t.slice();return r[10]=e[n][0],r[17]=e[n][1],r}function Mi(t,e,n){const r=t.slice();return r[20]=e[n],r}function Ai(t){let e,n,r,o,i=t[0].usages,s=[];for(let e=0;e<i.length;e+=1)s[e]=Li(Ri(t,i,e));return{c(){e=h("section"),n=h("h1"),n.textContent="Usages",r=y(),o=h("dl");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,i){f(t,e,i),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null)},p(t,e){if(1&e){let n;for(i=t[0].usages,n=0;n<i.length;n+=1){const r=Ri(t,i,n);s[n]?s[n].p(r,e):(s[n]=Li(r),s[n].c(),s[n].m(o,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&p(e),m(s,t)}}}function Ni(t){let e,n,r=t[20]+"";return{c(){e=h("li"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[20]+"")&&b(n,r)},d(t){t&&p(e)}}}function Li(t){let e,n,r,o,i,s,l=t[10]+"",a=t[17],c=[];for(let e=0;e<a.length;e+=1)c[e]=Ni(Mi(t,a,e));return{c(){e=h("dt"),n=g("At Level "),r=g(l),o=h("dd"),i=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();s=y(),w(e,"font-variant","tabular-nums"),$(i,"class","comma-separated")},m(t,l){f(t,e,l),d(e,n),d(e,r),f(t,o,l),d(o,i);for(let t=0;t<c.length;t+=1)c[t].m(i,null);d(o,s)},p(t,e){if(1&e&&l!==(l=t[10]+"")&&b(r,l),1&e){let n;for(a=t[17],n=0;n<a.length;n+=1){const r=Mi(t,a,n);c[n]?c[n].p(r,e):(c[n]=Ni(r),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},d(t){t&&p(e),t&&p(o),m(c,t)}}}function Di(t){let e,n;return e=new It({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ji(t){let e,n,r,o,i,s,l,a=t[10]+"";return i=new Ft({props:{items:t[1].get(t[10]).sort(t[4]),limit:20,$$slots:{default:[Di,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),s=y(),w(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,s),l=!0},p(t,e){const n={};8388609&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){l||(W(i.$$.fragment,t),l=!0)},o(t){z(i.$$.fragment,t),l=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function qi(t){let e,n;return e=new It({props:{type:"vehicle_part",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Bi(t){let e,n,r,o,i,s,l,a=t[10]+"";return i=new Ft({props:{items:t[2].get(t[10]).sort(t[5]),limit:20,$$slots:{default:[qi,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),s=y(),w(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,s),l=!0},p(t,e){const n={};8388609&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){l||(W(i.$$.fragment,t),l=!0)},o(t){z(i.$$.fragment,t),l=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function Pi(t){let e,n;return e=new It({props:{type:"item",id:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Fi(t){let e,n,r,o,i,s,l,a=t[10]+"";return i=new Ft({props:{items:t[3].get(t[10]),limit:20,$$slots:{default:[Pi,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),s=y(),w(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,s),l=!0},p(t,e){const n={};8388609&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){l||(W(i.$$.fragment,t),l=!0)},o(t){z(i.$$.fragment,t),l=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function Hi(t){let e,n,r,o,i,s,l,a,c,u,v,$,x,w=st(t[0])+"",E=t[0].usages&&Ai(t),S=[...t[1].keys()].sort(Ui),C=[];for(let e=0;e<S.length;e+=1)C[e]=ji(Ii(t,S,e));const T=t=>z(C[t],1,1,(()=>{C[t]=null}));let k=t[2].size>0&&function(t){let e,n,r,o,i,s=[...t[2].keys()].sort(Gi),l=[];for(let e=0;e<s.length;e+=1)l[e]=Bi(Oi(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Vehicle Parts",r=y(),o=h("dl");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(5&e){let n;for(s=[...t[2].keys()].sort(Gi),n=0;n<s.length;n+=1){const r=Oi(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=Bi(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),m(l,t)}}}(t),O=t[3].size>0&&function(t){let e,n,r,o,i,s=[...t[3].keys()].sort(Wi),l=[];for(let e=0;e<s.length;e+=1)l[e]=Fi(ki(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Recipes",r=y(),o=h("dl");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(9&e){let n;for(s=[...t[3].keys()].sort(Wi),n=0;n<s.length;n+=1){const r=ki(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=Fi(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),m(l,t)}}}(t);return{c(){e=h("h1"),n=g("Quality: "),r=g(w),o=y(),E&&E.c(),i=y(),s=h("section"),l=h("h1"),l.textContent="Tools",a=y(),c=h("dl");for(let t=0;t<C.length;t+=1)C[t].c();u=y(),k&&k.c(),v=y(),O&&O.c(),$=_()},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),E&&E.m(t,p),f(t,i,p),f(t,s,p),d(s,l),d(s,a),d(s,c);for(let t=0;t<C.length;t+=1)C[t].m(c,null);f(t,u,p),k&&k.m(t,p),f(t,v,p),O&&O.m(t,p),f(t,$,p),x=!0},p(t,[e]){if((!x||1&e)&&w!==(w=st(t[0])+"")&&b(r,w),t[0].usages?E?E.p(t,e):(E=Ai(t),E.c(),E.m(i.parentNode,i)):E&&(E.d(1),E=null),3&e){let n;for(S=[...t[1].keys()].sort(Ui),n=0;n<S.length;n+=1){const r=Ii(t,S,n);C[n]?(C[n].p(r,e),W(C[n],1)):(C[n]=ji(r),C[n].c(),W(C[n],1),C[n].m(c,null))}for(U(),n=S.length;n<C.length;n+=1)T(n);G()}t[2].size>0&&k.p(t,e),t[3].size>0&&O.p(t,e)},i(t){if(!x){for(let t=0;t<S.length;t+=1)W(C[t]);W(k),W(O),x=!0}},o(t){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)z(C[t]);z(k),z(O),x=!1},d(t){t&&p(e),t&&p(o),E&&E.d(t),t&&p(i),t&&p(s),m(C,t),t&&p(u),k&&k.d(t),t&&p(v),O&&O.d(t),t&&p($)}}}const Ui=(t,e)=>t-e,Gi=(t,e)=>t-e,Wi=(t,e)=>t-e;function zi(t,e,n){var r,o;let{item:i}=e,s=O("data"),l=new Map;for(const t of s.byType("item")){if(!t.id)continue;const e=(null!==(r=t.qualities)&&void 0!==r?r:[]).find((([t,e])=>t===i.id));if(e){const[,n]=e;l.has(n)||l.set(n,[]),l.get(n).push(t)}}const a=new Map;for(const t of s.byType("vehicle_part")){if(!t.id)continue;const e=(null!==(o=t.qualities)&&void 0!==o?o:[]).find((([t,e])=>t===i.id));if(e){const[,n]=e;a.has(n)||a.set(n,[]),a.get(n).push(t)}}const c=new Map;for(const t of s.byType("recipe")){if(t.construction_blueprint||"uncraft"===t.type)continue;const{qualities:e}=s.normalizeRequirements(t);for(const n of e)for(const{id:e,level:r}of n)e===i.id&&(c.has(r)||c.set(r,new Set),c.get(r).add(t.result))}const u=new Map;for(const[t,e]of c)u.set(t,[...e].sort(((t,e)=>st(s.byId("item",t)).localeCompare(st(s.byId("item",e))))));return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,l,a,u,(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e))]}class Vi extends tt{constructor(t){super(),Z(this,t,zi,Hi,i,{item:0})}}function Yi(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ji(t,e,n){const r=t.slice();return r[12]=e[n].id,r[13]=e[n].count,r[15]=n,r}function Ki(t,e,n){const r=t.slice();return r[16]=e[n],r}function Xi(t,e,n){const r=t.slice();return r[19]=e[n],r[15]=n,r}function Qi(t,e,n){const r=t.slice();return r[21]=e[n],r}function Zi(t,e,n){const r=t.slice();return r[24]=e[n],r[15]=n,r}function ts(t,e,n){const r=t.slice();return r[12]=e[n][0],r[26]=e[n][1],r[15]=n,r}function es(t){let e,n,r,o;const i=[rs,ns],s=[];function l(t,e){return t[0].skill?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function ns(e){let n;return{c(){n=h("em"),n.textContent="none"},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function rs(t){let e,n,r,o,i,s=(t[0].difficulty??0)+"";return e=new It({props:{type:"skill",id:t[0].skill}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")")},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),i=!0},p(t,n){const o={};1&n&&(o.id=t[0].skill),e.$set(o),(!i||1&n)&&s!==(s=(t[0].difficulty??0)+"")&&b(r,s)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function os(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function is(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ss(t){let e,n,r,o,i,s,l=t[26]+"";function a(t,e){return t[15]===t[0].required_skills.length-2?is:t[15]!==t[0].required_skills.length-1?os:void 0}e=new It({props:{type:"skill",id:t[12]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[12]),e.$set(o),(!s||1&n)&&l!==(l=t[26]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function ls(t){let e,n,r,o;return r=new It({props:{type:"furniture",id:t[0].pre_terrain}}),{c(){e=h("dt"),e.textContent="Requires",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].pre_terrain),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function as(e){let n,r,o,i,s,l,a,c,u,d,m,h=(e[24].amount??1)+"",_=1===(e[24].amount??1)?"":"s",v=e[24].level+"",$=0!==e[15]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return l=new It({props:{type:"tool_quality",id:e[24].id}}),{c(){$&&$.c(),n=y(),r=g(h),o=g(" tool"),i=g(_),s=g("\n                with "),J(l.$$.fragment),a=g(" of "),c=g(v),u=g("\n                or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,s,e),K(l,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(l.$$.fragment,t),m=!0)},o(t){z(l.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(s),X(l,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function cs(t){let e,n,r,o=t[21],i=[];for(let e=0;e<o.length;e+=1)i[e]=as(Zi(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(16&r){let l;for(o=t[21],l=0;l<o.length;l+=1){const s=Zi(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=as(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function us(e){let n,r;return n=new It({props:{type:"item",id:e[19].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function ds(e){let n,r,o=st(e[1].byId("item",e[19].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[1].craftingPseudoItem(e[19].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function fs(e){let n,r,o,i,s=e[19].count+"",l=1!==e[19].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(s),o=g(" charge"),l&&l.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),l&&l.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),l&&l.d(t),t&&p(i)}}}function ps(t){let e,n,r,o,i,s,l=0!==t[15]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[ds,us],c=[];n=function(t,e){return t[1].craftingPseudoItem(t[19].id)?0:1}(t),r=c[n]=a[n](t);let u=t[19].count>0&&fs(t);return{c(){l&&l.c(),e=y(),r.c(),o=y(),u&&u.c(),i=_()},m(t,r){l&&l.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),s=!0},p(t,e){r.p(t,e),t[19].count>0&&u.p(t,e)},i(t){s||(W(r),s=!0)},o(t){z(r),s=!1},d(t){l&&l.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function ms(t){let e,n,r,o=t[16],i=[];for(let e=0;e<o.length;e+=1)i[e]=ps(Xi(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(6&r){let l;for(o=t[16],l=0;l<o.length;l+=1){const s=Xi(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=ps(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function hs(e){let n,r,o,i=0!==e[15]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new It({props:{id:e[12],count:e[13],type:"item"}}),{c(){i&&i.c(),n=y(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function gs(t){let e,n,r,o=t[9].map(t[5]),i=[];for(let e=0;e<o.length;e+=1)i[e]=hs(Ji(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(10&r){let l;for(o=t[9].map(t[5]),l=0;l<o.length;l+=1){const s=Ji(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=hs(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function ys(t){let e,n,r=t[0].pre_note+"";return{c(){e=h("p"),n=g(r),w(e,"color","var(--cata-color-gray)")},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[0].pre_note+"")&&b(n,r)},d(t){t&&p(e)}}}function _s(t){let e,n,r,o,i,s,l,a,c,u,v,$,x,w,E,S,C,T,k,O,I,R,M=st(t[1].byId("construction_group",t[0].group))+"",A=("number"==typeof t[0].time?`${t[0].time} m`:t[0].time??"0 m")+"",N=t[0].pre_terrain?.startsWith("f_"),L=JSON.stringify(t[0],null,2)+"",D=t[0].required_skills??[],j=[];for(let e=0;e<D.length;e+=1)j[e]=ss(ts(t,D,e));const q=t=>z(j[t],1,1,(()=>{j[t]=null}));let B=null;D.length||(B=es(t));let P=N&&ls(t),F=(t[4].length||t[2].length)&&function(t){let e,n,r,o,i,s,l=t[4]??[],a=[];for(let e=0;e<l.length;e+=1)a[e]=cs(Qi(t,l,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[2],g=[];for(let e=0;e<u.length;e+=1)g[e]=ms(Ki(t,u,e));const _=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=h("dd"),r=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=y();for(let t=0;t<g.length;t+=1)g[t].c();i=y()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);d(r,o);for(let t=0;t<g.length;t+=1)g[t].m(r,null);d(n,i),s=!0},p(t,e){if(16&e){let n;for(l=t[4]??[],n=0;n<l.length;n+=1){const i=Qi(t,l,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=cs(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(U(),n=l.length;n<a.length;n+=1)c(n);G()}if(6&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const o=Ki(t,u,n);g[n]?(g[n].p(o,e),W(g[n],1)):(g[n]=ms(o),g[n].c(),W(g[n],1),g[n].m(r,null))}for(U(),n=u.length;n<g.length;n+=1)_(n);G()}},i(t){if(!s){for(let t=0;t<l.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);s=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);s=!1},d(t){t&&p(e),t&&p(n),m(a,t),m(g,t)}}}(t),H=t[3].length&&function(t){let e,n,r,o,i=t[3],s=[];for(let e=0;e<i.length;e+=1)s[e]=gs(Yi(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(10&e){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=Yi(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=gs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),V=t[0].pre_note&&ys(t);return{c(){e=h("section"),n=h("h1"),r=g(M),o=y(),i=h("dl"),s=h("dt"),s.textContent="Required Skills",l=h("dd");for(let t=0;t<j.length;t+=1)j[t].c();B&&B.c(),a=y(),c=h("dt"),c.textContent="Time",u=h("dd"),v=g(A),$=y(),P&&P.c(),x=_(),F&&F.c(),w=_(),H&&H.c(),E=y(),V&&V.c(),S=y(),C=h("details"),T=h("summary"),T.textContent="Construction JSON",k=y(),O=h("pre"),I=g(L)},m(t,p){f(t,e,p),d(e,n),d(n,r),d(e,o),d(e,i),d(i,s),d(i,l);for(let t=0;t<j.length;t+=1)j[t].m(l,null);B&&B.m(l,null),d(l,a),d(i,c),d(i,u),d(u,v),d(u,$),P&&P.m(i,null),d(i,x),F&&F.m(i,null),d(i,w),H&&H.m(i,null),d(e,E),V&&V.m(e,null),d(e,S),d(e,C),d(C,T),d(C,k),d(C,O),d(O,I),R=!0},p(t,[n]){if((!R||1&n)&&M!==(M=st(t[1].byId("construction_group",t[0].group))+"")&&b(r,M),1&n){let e;for(D=t[0].required_skills??[],e=0;e<D.length;e+=1){const r=ts(t,D,e);j[e]?(j[e].p(r,n),W(j[e],1)):(j[e]=ss(r),j[e].c(),W(j[e],1),j[e].m(l,a))}for(U(),e=D.length;e<j.length;e+=1)q(e);G(),!D.length&&B?B.p(t,n):D.length?B&&(U(),z(B,1,1,(()=>{B=null})),G()):(B=es(t),B.c(),W(B,1),B.m(l,a))}(!R||1&n)&&A!==(A=("number"==typeof t[0].time?`${t[0].time} m`:t[0].time??"0 m")+"")&&b(v,A),1&n&&(N=t[0].pre_terrain?.startsWith("f_")),N?P?(P.p(t,n),1&n&&W(P,1)):(P=ls(t),P.c(),W(P,1),P.m(i,x)):P&&(U(),z(P,1,1,(()=>{P=null})),G()),(t[4].length||t[2].length)&&F.p(t,n),t[3].length&&H.p(t,n),t[0].pre_note?V?V.p(t,n):(V=ys(t),V.c(),V.m(e,S)):V&&(V.d(1),V=null),(!R||1&n)&&L!==(L=JSON.stringify(t[0],null,2)+"")&&b(I,L)},i(t){if(!R){for(let t=0;t<D.length;t+=1)W(j[t]);W(P),W(F),W(H),R=!0}},o(t){j=j.filter(Boolean);for(let t=0;t<j.length;t+=1)z(j[t]);z(P),z(F),z(H),R=!1},d(t){t&&p(e),m(j,t),B&&B.d(),P&&P.d(),F&&F.d(),H&&H.d(),V&&V.d()}}}function vs(t,e,n){var r;const o=O("data");let{construction:i}=e;const s=("string"==typeof i.using?[[i.using,1]]:null!==(r=i.using)&&void 0!==r?r:[]).map((([t,e])=>[o.byId("requirement",t),e])).concat([[i,1]]),l=s.flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools),{expandSubstitutes:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})),a=s.flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))})),c=s.flatMap((([t,e])=>{var n;return(null!==(n=t.qualities)&&void 0!==n?n:[]).map((t=>Array.isArray(t)?t:[t]))}));return t.$$set=t=>{"construction"in t&&n(0,i=t.construction)},[i,o,l,a,c,t=>({...t,item:o.byId("item",t.id)})]}class $s extends tt{constructor(t){super(),Z(this,t,vs,_s,i,{construction:0})}}function bs(t,e,n){const r=t.slice();return r[8]=e[n],r}function xs(t,e,n){const r=t.slice();return r[11]=e[n],r}function ws(t,e,n){const r=t.slice();return r[14]=e[n][0],r[15]=e[n][1],r}function Es(t,e,n){const r=t.slice();return r[18]=e[n].id,r[19]=e[n].prob,r[20]=e[n].count,r}function Ss(t){let e,n,r=50*t[0].move_cost_mod+"";return{c(){e=g("+"),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e&&r!==(r=50*t[0].move_cost_mod+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function Cs(e){let n;return{c(){n=h("em"),n.textContent="impassable"},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Ts(e){let n,r,o,i,s,l=e[20][0]+"",a=e[20][1]+"";return{c(){n=g(" ("),r=g(l),o=g("–"),i=g(a),s=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,s,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(s)}}}function ks(e){let n,r=1!==e[20][0]&&function(e){let n,r,o,i=e[20][0]+"";return{c(){n=g(" ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){r&&r.c(),n=_()},m(t,e){r&&r.m(t,e),f(t,n,e)},p(t,e){1!==t[20][0]&&r.p(t,e)},d(t){r&&r.d(t),t&&p(n)}}}function Os(e){let n,r,o,i,s,l;o=new It({props:{type:"item",id:e[18]}});let a=function(t,e){return t[20][0]===t[20][1]?ks:Ts}(e)(e),c=1!==e[19]&&function(e){let n,r,o,i=function(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}(e[19])+"";return{c(){n=g(" ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),r=h("span"),J(o.$$.fragment),i=g(""),a.c(),s=g(""),c&&c.c(),w(r,"white-space","nowrap")},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(r,i),a.m(r,null),d(r,s),c&&c.m(r,null),l=!0},p(t,e){a.p(t,e),1!==t[19]&&c.p(t,e)},i(t){l||(W(o.$$.fragment,t),l=!0)},o(t){z(o.$$.fragment,t),l=!1},d(t){t&&p(n),X(o),a.d(),c&&c.d()}}}function Is(t){let e,n,r=t[15].length&&function(t){let e,n,r,o,i,s,l=t[14]+"",a=t[15],c=[];for(let e=0;e<a.length;e+=1)c[e]=Os(Es(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("dt"),n=g(l),r=h("dd"),o=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();i=y(),$(o,"class","comma-separated")},m(t,l){f(t,e,l),d(e,n),f(t,r,l),d(r,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);d(r,i),s=!0},p(t,e){if(4&e){let n;for(a=t[15],n=0;n<a.length;n+=1){const r=Es(t,a,n);c[n]?(c[n].p(r,e),W(c[n],1)):(c[n]=Os(r),c[n].c(),W(c[n],1),c[n].m(o,null))}for(U(),n=a.length;n<c.length;n+=1)u(n);G()}},i(t){if(!s){for(let t=0;t<a.length;t+=1)W(c[t]);s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);s=!1},d(t){t&&p(e),t&&p(r),m(c,t)}}}(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,e){t[15].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Rs(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ms(t){let e,n,r=t[11]+"";return{c(){e=h("li"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[11]+"")&&b(n,r)},d(t){t&&p(e)}}}function As(e){let n,r;return n=new $s({props:{construction:e[8]}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function Ns(t){let e,n,r,o,i,s,l,a,c,u,v,x,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V=st(t[0])+"",Y=(t[0].required_str>=0?t[0].required_str:"not movable")+"",Q=(t[0].coverage??0)+"",Z=(t[0].comfort??0)+"",tt=t[0].description+"";function et(t,e){return t[0].move_cost_mod<0?Cs:Ss}n=new Fn({props:{item:t[0]}});let nt=et(t),rt=nt(t),ot=t[2],it=[];for(let e=0;e<ot.length;e+=1)it[e]=Is(ws(t,ot,e));const lt=t=>z(it[t],1,1,(()=>{it[t]=null}));let at=t[0].flags??[],ct=[];for(let e=0;e<at.length;e+=1)ct[e]=Ms(xs(t,at,e));let ut=null;at.length||(ut=Rs());let dt=t[1].length&&function(t){let e,n,r,o,i=t[1],s=[];for(let e=0;e<i.length;e+=1)s[e]=As(bs(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("h2"),e.textContent="Construction",n=y();for(let t=0;t<s.length;t+=1)s[t].c();r=_()},m(t,i){f(t,e,i),f(t,n,i);for(let e=0;e<s.length;e+=1)s[e].m(t,i);f(t,r,i),o=!0},p(t,e){if(2&e){let n;for(i=t[1],n=0;n<i.length;n+=1){const o=bs(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=As(o),s[n].c(),W(s[n],1),s[n].m(r.parentNode,r))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t),t&&p(r)}}}(t);return{c(){e=h("h1"),J(n.$$.fragment),r=y(),o=g(V),i=y(),s=h("section"),l=h("h1"),l.textContent="General",a=y(),c=h("dl"),u=h("dt"),u.textContent="Move Cost Modifier",v=h("dd"),rt.c(),x=y(),E=h("dt"),E.textContent="Strength Required to Drag",S=h("dd"),C=g(Y),T=h("dt"),T.textContent="Coverage",k=h("dd"),O=g(Q),I=g("%"),R=h("dt"),R.textContent="Comfort",M=h("dd"),A=g(Z);for(let t=0;t<it.length;t+=1)it[t].c();N=h("dt"),N.textContent="Flags",L=h("dd"),D=h("ul");for(let t=0;t<ct.length;t+=1)ct[t].c();ut&&ut.c(),j=y(),q=h("p"),B=g(tt),P=y(),dt&&dt.c(),F=_(),$(D,"class","comma-separated"),w(q,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,s,p),d(s,l),d(s,a),d(s,c),d(c,u),d(c,v),rt.m(v,null),d(v,x),d(c,E),d(c,S),d(S,C),d(c,T),d(c,k),d(k,O),d(k,I),d(c,R),d(c,M),d(M,A);for(let t=0;t<it.length;t+=1)it[t].m(c,null);d(c,N),d(c,L),d(L,D);for(let t=0;t<ct.length;t+=1)ct[t].m(D,null);ut&&ut.m(D,null),d(s,j),d(s,q),d(q,B),f(t,P,p),dt&&dt.m(t,p),f(t,F,p),H=!0},p(t,[e]){const r={};if(1&e&&(r.item=t[0]),n.$set(r),(!H||1&e)&&V!==(V=st(t[0])+"")&&b(o,V),nt===(nt=et(t))&&rt?rt.p(t,e):(rt.d(1),rt=nt(t),rt&&(rt.c(),rt.m(v,x))),(!H||1&e)&&Y!==(Y=(t[0].required_str>=0?t[0].required_str:"not movable")+"")&&b(C,Y),(!H||1&e)&&Q!==(Q=(t[0].coverage??0)+"")&&b(O,Q),(!H||1&e)&&Z!==(Z=(t[0].comfort??0)+"")&&b(A,Z),4&e){let n;for(ot=t[2],n=0;n<ot.length;n+=1){const r=ws(t,ot,n);it[n]?(it[n].p(r,e),W(it[n],1)):(it[n]=Is(r),it[n].c(),W(it[n],1),it[n].m(c,N))}for(U(),n=ot.length;n<it.length;n+=1)lt(n);G()}if(1&e){let n;for(at=t[0].flags??[],n=0;n<at.length;n+=1){const r=xs(t,at,n);ct[n]?ct[n].p(r,e):(ct[n]=Ms(r),ct[n].c(),ct[n].m(D,null))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=at.length,at.length?ut&&(ut.d(1),ut=null):ut||(ut=Rs(),ut.c(),ut.m(D,null))}(!H||1&e)&&tt!==(tt=t[0].description+"")&&b(B,tt),t[1].length&&dt.p(t,e)},i(t){if(!H){W(n.$$.fragment,t);for(let t=0;t<ot.length;t+=1)W(it[t]);W(dt),H=!0}},o(t){z(n.$$.fragment,t),it=it.filter(Boolean);for(let t=0;t<it.length;t+=1)z(it[t]);z(dt),H=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(s),rt.d(),m(it,t),m(ct,t),ut&&ut.d(),t&&p(P),dt&&dt.d(t),t&&p(F)}}}function Ls(t,e,n){var r,o;const i=O("data");let{item:s}=e;const l=(null===(r=s.deconstruct)||void 0===r?void 0:r.items)?mt(i,{subtype:"collection",entries:s.deconstruct.items}):[],a=(null===(o=s.bash)||void 0===o?void 0:o.items)?mt(i,{subtype:"collection",entries:s.bash.items}):[],c=i.byType("construction").filter((t=>t.post_terrain===s.id)),u=[["Deconstruct",l],["Bash",a]];return t.$$set=t=>{"item"in t&&n(0,s=t.item)},[s,c,u]}class Ds extends tt{constructor(t){super(),Z(this,t,Ls,Ns,i,{item:0})}}function js(e){let n,r,o,i,s,l,a,c=st(e[0])+"",u=e[0].description+"";return{c(){n=h("h1"),r=g("Skill: "),o=g(c),i=y(),s=h("section"),l=h("p"),a=g(u),w(l,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e),d(n,r),d(n,o),f(t,i,e),f(t,s,e),d(s,l),d(l,a)},p(t,[e]){1&e&&c!==(c=st(t[0])+"")&&b(o,c),1&e&&u!==(u=t[0].description+"")&&b(a,u)},i:t,o:t,d(t){t&&p(n),t&&p(i),t&&p(s)}}}function qs(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class Bs extends tt{constructor(t){super(),Z(this,t,qs,js,i,{item:0})}}function Ps(t,e,n){const r=t.slice();return r[1]=e[n],r}function Fs(t){let e,n,r,o,i=t[0].required_proficiencies,s=[];for(let e=0;e<i.length;e+=1)s[e]=Hs(Ps(t,i,e));const l=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Required Proficiencies",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);o=!0},p(t,e){if(1&e){let n;for(i=t[0].required_proficiencies,n=0;n<i.length;n+=1){const o=Ps(t,i,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Hs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(U(),n=i.length;n<s.length;n+=1)l(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);o=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Hs(t){let e,n,r;return n=new It({props:{id:t[1],type:"proficiency"}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[1]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Us(t){let e,n,r,o,i,s,l,a,c,u,m,_,v,$,x,E,S,C,T,k,O,I=st(t[0])+"",R=(t[0].can_learn?t[0].time_to_learn:"not learnable")+"",M=(t[0].default_time_multiplier??2)+"",A=(t[0].default_fail_multiplier??2)+"",N=t[0].description+"",L=t[0].required_proficiencies&&Fs(t);return{c(){e=h("h1"),n=g("Proficiency: "),r=g(I),o=y(),i=h("section"),s=h("dl"),l=h("dt"),l.textContent="Time to Learn",a=h("dd"),c=g(R),u=h("dt"),u.textContent="Default Time Multiplier",m=h("dd"),_=g(M),v=g("×"),$=h("dt"),$.textContent="Default Fail Multiplier",x=h("dd"),E=g(A),S=g("×"),L&&L.c(),C=y(),T=h("p"),k=g(N),w(T,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,s),d(s,l),d(s,a),d(a,c),d(s,u),d(s,m),d(m,_),d(m,v),d(s,$),d(s,x),d(x,E),d(x,S),L&&L.m(s,null),d(i,C),d(i,T),d(T,k),O=!0},p(t,[e]){(!O||1&e)&&I!==(I=st(t[0])+"")&&b(r,I),(!O||1&e)&&R!==(R=(t[0].can_learn?t[0].time_to_learn:"not learnable")+"")&&b(c,R),(!O||1&e)&&M!==(M=(t[0].default_time_multiplier??2)+"")&&b(_,M),(!O||1&e)&&A!==(A=(t[0].default_fail_multiplier??2)+"")&&b(E,A),t[0].required_proficiencies?L?(L.p(t,e),1&e&&W(L,1)):(L=Fs(t),L.c(),W(L,1),L.m(s,null)):L&&(U(),z(L,1,1,(()=>{L=null})),G()),(!O||1&e)&&N!==(N=t[0].description+"")&&b(k,N)},i(t){O||(W(L),O=!0)},o(t){z(L),O=!1},d(t){t&&p(e),t&&p(o),t&&p(i),L&&L.d()}}}function Gs(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class Ws extends tt{constructor(t){super(),Z(this,t,Gs,Us,i,{item:0})}}function zs(t,e,n){const r=t.slice();return r[13]=e[n].id,r}function Vs(t,e,n){const r=t.slice();return r[13]=e[n].id,r}function Ys(t,e,n){const r=t.slice();return r[5]=e[n].color,r[18]=e[n].string,r}function Js(t){let e,n,r=t[3],o=[];for(let e=0;e<r.length;e+=1)o[e]=Ks(Ys(t,r,e));return{c(){e=h("section"),n=h("p");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){f(t,e,r),d(e,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,e){if(24&e){let i;for(r=t[3],i=0;i<r.length;i+=1){const s=Ys(t,r,i);o[i]?o[i].p(s,e):(o[i]=Ks(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(t){t&&p(e),m(o,t)}}}function Ks(e){let n,r,o=e[18]+"";return{c(){n=h("span"),r=g(o),w(n,"color","var(--cata-color-"+e[4](e[5])+")")},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Xs(e){let n,r,o;return r=new It({props:{type:"item",id:e[13]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Qs(e){let n,r,o;return r=new It({props:{type:"vehicle_part",id:e[13]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Zs(t){let e,n,r,o,i,s,l,a,c=t[0].id+"",u=t[0].info&&Js(t),v=t[1].length&&function(t){let e,n,r,o,i,s=t[1].sort(t[6]),l=[];for(let e=0;e<s.length;e+=1)l[e]=Xs(Vs(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Items",r=y(),o=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(2&e){let n;for(s=t[1].sort(t[6]),n=0;n<s.length;n+=1){const r=Vs(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=Xs(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),m(l,t)}}}(t),$=t[2].length&&function(t){let e,n,r,o,i,s=t[2].sort(t[7]),l=[];for(let e=0;e<s.length;e+=1)l[e]=Qs(zs(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Vehicle Parts",r=y(),o=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,s){f(t,e,s),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(t,e){if(4&e){let n;for(s=t[2].sort(t[7]),n=0;n<s.length;n+=1){const r=zs(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=Qs(r),l[n].c(),W(l[n],1),l[n].m(o,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),m(l,t)}}}(t);return{c(){e=h("h1"),n=g("Flag: "),r=g(c),o=y(),u&&u.c(),i=y(),v&&v.c(),s=y(),$&&$.c(),l=_()},m(t,c){f(t,e,c),d(e,n),d(e,r),f(t,o,c),u&&u.m(t,c),f(t,i,c),v&&v.m(t,c),f(t,s,c),$&&$.m(t,c),f(t,l,c),a=!0},p(t,[e]){(!a||1&e)&&c!==(c=t[0].id+"")&&b(r,c),t[0].info?u?u.p(t,e):(u=Js(t),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),t[1].length&&v.p(t,e),t[2].length&&$.p(t,e)},i(t){a||(W(v),W($),a=!0)},o(t){z(v),z($),a=!1},d(t){t&&p(e),t&&p(o),u&&u.d(t),t&&p(i),v&&v.d(t),t&&p(s),$&&$.d(t),t&&p(l)}}}function tl(t,e,n){var r,o,i;let{item:s}=e,l=O("data"),a=new Array;for(const t of l.byType("item")){if(!t.id)continue;(null!==(r=t.flags)&&void 0!==r?r:[]).find((t=>t===s.id))&&a.push(t)}let c=new Array;for(const t of l.byType("vehicle_part")){if(!t.id)continue;(null!==(o=t.flags)&&void 0!==o?o:[]).find((t=>t===s.id))&&c.push(t)}let u=["gray"];const d=[];let f=null!==(i=s.info)&&void 0!==i?i:"";for(;;){const t=f.match(/<\/?(info|good|bad)>/);if(!t)break;t.index>0&&d.push({string:f.substr(0,t.index),color:u[0]}),"/"===t[0][1]&&u.length>1?u.shift():u.unshift(t[1]),f=f.substr(t.index+t[0].length)}f.length&&d.push({string:f,color:u[0]});return t.$$set=t=>{"item"in t&&n(0,s=t.item)},[s,a,c,d,t=>"info"===t?"cyan":"good"===t?"green":"bad"===t?"red":"gray",u,(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e))]}class el extends tt{constructor(t){super(),Z(this,t,tl,Zs,i,{item:0})}}function nl(t,e,n){const r=t.slice();return r[5]=e[n].tools,r[6]=e[n].components,r[7]=e[n].qualities,r[8]=e[n].mending_method,r}function rl(t,e,n){const r=t.slice();return r[11]=e[n],r}function ol(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].count,r[17]=n,r}function il(t,e,n){const r=t.slice();return r[18]=e[n],r}function sl(t,e,n){const r=t.slice();return r[21]=e[n],r[17]=n,r}function ll(t,e,n){const r=t.slice();return r[23]=e[n],r}function al(t,e,n){const r=t.slice();return r[26]=e[n],r[17]=n,r}function cl(t,e,n){const r=t.slice();return r[14]=e[n].id,r[28]=e[n].level,r[17]=n,r}function ul(t,e,n){const r=t.slice();return r[30]=e[n],r}function dl(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function fl(t){let e,n,r=t[30]+"";return{c(){e=h("li"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e[0]&&r!==(r=t[30]+"")&&b(n,r)},d(t){t&&p(e)}}}function pl(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ml(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function hl(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function gl(e){let n,r,o,i,s,l,a=e[28]+"";n=new It({props:{type:"skill",id:e[14]}});let c=function(t,e){return t[17]===t[8].skills.length-2?hl:t[17]!==t[8].skills.length-1?ml:void 0}(e),u=c&&c(e);return{c(){J(n.$$.fragment),r=g(" ("),o=g(a),i=g(")"),u&&u.c(),s=_()},m(t,e){K(n,t,e),f(t,r,e),f(t,o,e),f(t,i,e),u&&u.m(t,e),f(t,s,e),l=!0},p:t,i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){z(n.$$.fragment,t),l=!1},d(t){X(n,t),t&&p(r),t&&p(o),t&&p(i),u&&u.d(t),t&&p(s)}}}function yl(e){let n,r,o,i,s,l,a,c,u,d,m,h=(e[26].amount??1)+"",_=1===(e[26].amount??1)?"":"s",v=e[26].level+"",$=0!==e[17]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return l=new It({props:{type:"tool_quality",id:e[26].id}}),{c(){$&&$.c(),n=y(),r=g(h),o=g(" tool"),i=g(_),s=g("\n                  with "),J(l.$$.fragment),a=g(" of "),c=g(v),u=g("\n                  or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,s,e),K(l,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(l.$$.fragment,t),m=!0)},o(t){z(l.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(s),X(l,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function _l(t){let e,n,r,o=t[23],i=[];for(let e=0;e<o.length;e+=1)i[e]=yl(al(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(4&r[0]){let l;for(o=t[23],l=0;l<o.length;l+=1){const s=al(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=yl(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function vl(e){let n,r;return n=new It({props:{type:"item",id:e[21].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function $l(e){let n,r,o=st(e[1].byId("item",e[21].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[1].craftingPseudoItem(e[21].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function bl(e){let n,r,o,i,s=e[21].count+"",l=1!==e[21].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(s),o=g(" charge"),l&&l.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),l&&l.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),l&&l.d(t),t&&p(i)}}}function xl(t){let e,n,r,o,i,s,l=0!==t[17]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[$l,vl],c=[];n=function(t,e){return t[1].craftingPseudoItem(t[21].id)?0:1}(t),r=c[n]=a[n](t);let u=t[21].count>0&&bl(t);return{c(){l&&l.c(),e=y(),r.c(),o=y(),u&&u.c(),i=_()},m(t,r){l&&l.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),s=!0},p(t,e){r.p(t,e),t[21].count>0&&u.p(t,e)},i(t){s||(W(r),s=!0)},o(t){z(r),s=!1},d(t){l&&l.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function wl(t){let e,n,r,o=t[18],i=[];for(let e=0;e<o.length;e+=1)i[e]=xl(sl(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(6&r[0]){let l;for(o=t[18],l=0;l<o.length;l+=1){const s=sl(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=xl(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function El(e){let n,r,o,i=0!==e[17]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new It({props:{id:e[14],count:e[15],type:"item"}}),{c(){i&&i.c(),n=y(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function Sl(t){let e,n,r,o=t[11].map(t[3]),i=[];for(let e=0;e<o.length;e+=1)i[e]=El(ol(t,o,e));const s=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=y()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(6&r[0]){let l;for(o=t[11].map(t[3]),l=0;l<o.length;l+=1){const s=ol(t,o,l);i[l]?(i[l].p(s,r),W(i[l],1)):(i[l]=El(s),i[l].c(),W(i[l],1),i[l].m(e,n))}for(U(),l=o.length;l<i.length;l+=1)s(l);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Cl(e){let n,r,o,i,s,l,a,c,u,v,$,b,x,w,E,S=st(e[8])+"",C=e[8].time+"",T=e[8].skills,k=[];for(let t=0;t<T.length;t+=1)k[t]=gl(cl(e,T,t));const O=t=>z(k[t],1,1,(()=>{k[t]=null}));let I=null;T.length||(I=pl());let R=(e[7].length||e[5].length)&&function(t){let e,n,r,o,i,s,l=t[7]??[],a=[];for(let e=0;e<l.length;e+=1)a[e]=_l(ll(t,l,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[5],g=[];for(let e=0;e<u.length;e+=1)g[e]=wl(il(t,u,e));const _=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=h("dd"),r=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=y();for(let t=0;t<g.length;t+=1)g[t].c();i=y()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);d(r,o);for(let t=0;t<g.length;t+=1)g[t].m(r,null);d(n,i),s=!0},p(t,e){if(4&e[0]){let n;for(l=t[7]??[],n=0;n<l.length;n+=1){const i=ll(t,l,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=_l(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(U(),n=l.length;n<a.length;n+=1)c(n);G()}if(6&e[0]){let n;for(u=t[5],n=0;n<u.length;n+=1){const o=il(t,u,n);g[n]?(g[n].p(o,e),W(g[n],1)):(g[n]=wl(o),g[n].c(),W(g[n],1),g[n].m(r,null))}for(U(),n=u.length;n<g.length;n+=1)_(n);G()}},i(t){if(!s){for(let t=0;t<l.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);s=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);s=!1},d(t){t&&p(e),t&&p(n),m(a,t),m(g,t)}}}(e),M=e[6].length&&function(t){let e,n,r,o,i,s=t[6],l=[];for(let e=0;e<s.length;e+=1)l[e]=Sl(rl(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(6&e[0]){let n;for(s=t[6],n=0;n<s.length;n+=1){const o=rl(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Sl(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(e),A=e[8].turns_into&&function(e){let n,r,o,i;return o=new It({props:{type:"fault",id:e[8].turns_into}}),{c(){n=h("dt"),n.textContent="Turns Into",r=h("dd"),J(o.$$.fragment)},m(t,e){f(t,n,e),f(t,r,e),K(o,r,null),i=!0},p:t,i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(n),t&&p(r),X(o)}}}(e);return{c(){n=h("section"),r=h("h1"),o=g(S),i=y(),s=h("dl"),l=h("dt"),l.textContent="Skills Used",a=h("dd");for(let t=0;t<k.length;t+=1)k[t].c();I&&I.c(),c=y(),u=h("dt"),u.textContent="Time to Complete",v=h("dd"),$=g(C),R&&R.c(),b=_(),M&&M.c(),x=_(),A&&A.c(),w=y()},m(t,e){f(t,n,e),d(n,r),d(r,o),d(n,i),d(n,s),d(s,l),d(s,a);for(let t=0;t<k.length;t+=1)k[t].m(a,null);I&&I.m(a,null),d(a,c),d(s,u),d(s,v),d(v,$),R&&R.m(s,null),d(s,b),M&&M.m(s,null),d(s,x),A&&A.m(s,null),d(n,w),E=!0},p(t,e){if(4&e[0]){let n;for(T=t[8].skills,n=0;n<T.length;n+=1){const r=cl(t,T,n);k[n]?(k[n].p(r,e),W(k[n],1)):(k[n]=gl(r),k[n].c(),W(k[n],1),k[n].m(a,c))}for(U(),n=T.length;n<k.length;n+=1)O(n);G(),T.length?I&&(I.d(1),I=null):I||(I=pl(),I.c(),I.m(a,c))}(t[7].length||t[5].length)&&R.p(t,e),t[6].length&&M.p(t,e),t[8].turns_into&&A.p(t,e)},i(t){if(!E){for(let t=0;t<T.length;t+=1)W(k[t]);W(R),W(M),W(A),E=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)z(k[t]);z(R),z(M),z(A),E=!1},d(t){t&&p(n),m(k,t),I&&I.d(),R&&R.d(),M&&M.d(),A&&A.d()}}}function Tl(t){let e,n,r,o,i,s,l,a,c,u,v,x,E,S,C,T,k=st(t[0])+"",O=t[0].description+"",I=t[0].flags??[],R=[];for(let e=0;e<I.length;e+=1)R[e]=fl(ul(t,I,e));let M=null;I.length||(M=dl());let A=t[2].length&&function(t){let e;return{c(){e=h("h2"),e.textContent="Mending Methods"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}(),N=t[2],L=[];for(let e=0;e<N.length;e+=1)L[e]=Cl(nl(t,N,e));const D=t=>z(L[t],1,1,(()=>{L[t]=null}));return{c(){e=h("h1"),n=g("Fault: "),r=g(k),o=y(),i=h("section"),s=h("dl"),l=h("dt"),l.textContent="Flags",a=h("dd"),c=h("ul");for(let t=0;t<R.length;t+=1)R[t].c();M&&M.c(),u=y(),v=h("p"),x=g(O),E=y(),A&&A.c(),S=y();for(let t=0;t<L.length;t+=1)L[t].c();C=_(),$(c,"class","comma-separated"),w(v,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,s),d(s,l),d(s,a),d(a,c);for(let t=0;t<R.length;t+=1)R[t].m(c,null);M&&M.m(c,null),d(i,u),d(i,v),d(v,x),f(t,E,p),A&&A.m(t,p),f(t,S,p);for(let e=0;e<L.length;e+=1)L[e].m(t,p);f(t,C,p),T=!0},p(t,e){if((!T||1&e[0])&&k!==(k=st(t[0])+"")&&b(r,k),1&e[0]){let n;for(I=t[0].flags??[],n=0;n<I.length;n+=1){const r=ul(t,I,n);R[n]?R[n].p(r,e):(R[n]=fl(r),R[n].c(),R[n].m(c,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=I.length,I.length?M&&(M.d(1),M=null):M||(M=dl(),M.c(),M.m(c,null))}if((!T||1&e[0])&&O!==(O=t[0].description+"")&&b(x,O),6&e[0]){let n;for(N=t[2],n=0;n<N.length;n+=1){const r=nl(t,N,n);L[n]?(L[n].p(r,e),W(L[n],1)):(L[n]=Cl(r),L[n].c(),W(L[n],1),L[n].m(C.parentNode,C))}for(U(),n=N.length;n<L.length;n+=1)D(n);G()}},i(t){if(!T){for(let t=0;t<N.length;t+=1)W(L[t]);T=!0}},o(t){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)z(L[t]);T=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m(R,t),M&&M.d(),t&&p(E),A&&A.d(t),t&&p(S),m(L,t),t&&p(C)}}}function kl(t,e,n){var r;const o=O("data");let{item:i}=e;const s=(null!==(r=i.mending_methods)&&void 0!==r?r:[]).map((t=>{var e,n,r;const i="string"==typeof t.requirements?o.byId("requirement",t.requirements):t.requirements;return{mending_method:t,tools:o.flattenRequirement(null!==(e=i.tools)&&void 0!==e?e:[],(t=>t.tools),{expandSubstitutes:!0}),components:o.flattenRequirement(null!==(n=i.components)&&void 0!==n?n:[],(t=>t.components)),qualities:gt(null!==(r=i.qualities)&&void 0!==r?r:[])}}));return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,o,s,t=>({...t,item:o.byId("item",t.id)})]}class Ol extends tt{constructor(t){super(),Z(this,t,kl,Tl,i,{item:0},[-1,-1])}}function Il(t,e,n){const r=t.slice();return r[3]=e[n].name,r[4]=e[n].level,r[6]=n,r}function Rl(t){let e;return{c(){e=h("em"),e.textContent="none"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ml(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Al(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Nl(t){let e,n,r,o,i,s,l=t[4]+"";function a(t,e){return t[6]===t[0].skill_requirements.length-2?Al:t[6]!==t[0].skill_requirements.length-1?Ml:void 0}e=new It({props:{type:"skill",id:t[3]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[3]),e.$set(o),(!s||1&n)&&l!==(l=t[4]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Ll(t){let e,n,r,o=t[0].stun_dur+"";return{c(){e=h("dt"),e.textContent="Stun Duration",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].stun_dur+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Dl(t){let e,n,r,o=t[0].down_dur+"";return{c(){e=h("dt"),e.textContent="Down Duration",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].down_dur+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function jl(t){let e,n,r,o=t[0].knockback_dist+"";return{c(){e=h("dt"),e.textContent="Knockback Distance",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].knockback_dist+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function ql(t){let e,n,r,o=t[0].weighting+"";return{c(){e=h("dt"),e.textContent="Weighting",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].weighting+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Bl(t){let e,n,r,o=t[0].aoe+"";return{c(){e=h("dt"),e.textContent="AoE Shape",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].aoe+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Pl(t){let e,n;return e=new It({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Fl(t){let e,n,r,o,i,s,l,a,c,u,v,$,x,E,S,C,T,k,O,I=t[0].name+"",R=t[0].description+"",M=t[0].skill_requirements??[],A=[];for(let e=0;e<M.length;e+=1)A[e]=Nl(Il(t,M,e));const N=t=>z(A[t],1,1,(()=>{A[t]=null}));let L=null;M.length||(L=Rl());let D=t[0].stun_dur&&Ll(t),j=t[0].down_dur&&Dl(t),q=t[0].knockback_dist&&jl(t),B=t[0].weighting&&ql(t),P=t[0].aoe&&Bl(t),F=t[1].length&&function(t){let e,n,r,o,i;return o=new Ft({props:{items:t[1],limit:20,$$slots:{default:[Pl,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Weapons",r=y(),J(o.$$.fragment)},m(t,s){f(t,e,s),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};129&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),n=g("Technique: "),r=g(I),o=y(),i=h("section"),s=h("dl"),l=h("dt"),l.textContent="Required Skills",a=h("dd");for(let t=0;t<A.length;t+=1)A[t].c();L&&L.c(),c=y(),D&&D.c(),u=_(),j&&j.c(),v=_(),q&&q.c(),$=_(),B&&B.c(),x=_(),P&&P.c(),E=y(),S=h("p"),C=g(R),T=y(),F&&F.c(),k=_(),w(S,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,s),d(s,l),d(s,a);for(let t=0;t<A.length;t+=1)A[t].m(a,null);L&&L.m(a,null),d(a,c),D&&D.m(s,null),d(s,u),j&&j.m(s,null),d(s,v),q&&q.m(s,null),d(s,$),B&&B.m(s,null),d(s,x),P&&P.m(s,null),d(i,E),d(i,S),d(S,C),f(t,T,p),F&&F.m(t,p),f(t,k,p),O=!0},p(t,[e]){if((!O||1&e)&&I!==(I=t[0].name+"")&&b(r,I),1&e){let n;for(M=t[0].skill_requirements??[],n=0;n<M.length;n+=1){const r=Il(t,M,n);A[n]?(A[n].p(r,e),W(A[n],1)):(A[n]=Nl(r),A[n].c(),W(A[n],1),A[n].m(a,c))}for(U(),n=M.length;n<A.length;n+=1)N(n);G(),M.length?L&&(L.d(1),L=null):L||(L=Rl(),L.c(),L.m(a,c))}t[0].stun_dur?D?D.p(t,e):(D=Ll(t),D.c(),D.m(s,u)):D&&(D.d(1),D=null),t[0].down_dur?j?j.p(t,e):(j=Dl(t),j.c(),j.m(s,v)):j&&(j.d(1),j=null),t[0].knockback_dist?q?q.p(t,e):(q=jl(t),q.c(),q.m(s,$)):q&&(q.d(1),q=null),t[0].weighting?B?B.p(t,e):(B=ql(t),B.c(),B.m(s,x)):B&&(B.d(1),B=null),t[0].aoe?P?P.p(t,e):(P=Bl(t),P.c(),P.m(s,null)):P&&(P.d(1),P=null),(!O||1&e)&&R!==(R=t[0].description+"")&&b(C,R),t[1].length&&F.p(t,e)},i(t){if(!O){for(let t=0;t<M.length;t+=1)W(A[t]);W(F),O=!0}},o(t){A=A.filter(Boolean);for(let t=0;t<A.length;t+=1)z(A[t]);z(F),O=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m(A,t),L&&L.d(),D&&D.d(),j&&j.d(),q&&q.d(),B&&B.d(),P&&P.d(),t&&p(T),F&&F.d(t),t&&p(k)}}}function Hl(t,e,n){let{item:r}=e;const o=O("data").byType("item").filter((t=>{var e;return t.id&&(null!==(e=t.techniques)&&void 0!==e?e:[]).includes(r.id)})).sort(((t,e)=>t.id.localeCompare(e.id)));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o]}class Ul extends tt{constructor(t){super(),Z(this,t,Hl,Fl,i,{item:0})}}function Gl(t,e,n){const r=t.slice();return r[5]=e[n],r}function Wl(t,e,n){const r=t.slice();return r[5]=e[n],r}function zl(t){let e,n,r,o,i=t[2],s=[];for(let e=0;e<i.length;e+=1)s[e]=Vl(Wl(t,i,e));return{c(){e=h("dt"),e.textContent="Excess",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=y(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o)},p(t,e){if(4&e){let n;for(i=t[2],n=0;n<i.length;n+=1){const o=Wl(t,i,n);s[n]?s[n].p(o,e):(s[n]=Vl(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Vl(e){let n,r,o=it(e[5])+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Yl(t){let e,n,r,o,i=t[3],s=[];for(let e=0;e<i.length;e+=1)s[e]=Jl(Gl(t,i,e));return{c(){e=h("dt"),e.textContent="Deficiency",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=y(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o)},p(t,e){if(8&e){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=Gl(t,i,n);s[n]?s[n].p(o,e):(s[n]=Jl(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Jl(e){let n,r,o=it(e[5])+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Kl(t){let e,n,r,o,i,s=t[0].pct+"";return e=new It({props:{id:t[0].comestible.id,type:"item"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g("% RDA)")},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),i=!0},p(t,n){const o={};1&n&&(o.id=t[0].comestible.id),e.$set(o),(!i||1&n)&&s!==(s=t[0].pct+"")&&b(r,s)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Xl(t){let e,n,r,o,i,s,l,a,c,u,m,v,$,x,w,E,S,C,T,k,O,I,R,M,A,N=st(t[0])+"",L=t[0].vit_type+"",D=(t[0].min??0)+"",j=(t[0].max??0)+"",q=(t[0].rate??"0 m")+"",B=t[0].excess&&zl(t),P=t[0].deficiency&&Yl(t);return M=new Ft({props:{items:t[1],$$slots:{default:[Kl,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("h1"),n=g("Vitamin: "),r=g(N),o=y(),i=h("section"),s=h("dl"),l=h("dt"),l.textContent="Type",a=h("dd"),c=g(L),B&&B.c(),u=_(),P&&P.c(),m=h("dt"),m.textContent="Min",v=h("dd"),$=g(D),x=h("dt"),x.textContent="Max",w=h("dd"),E=g(j),S=h("dt"),S.textContent="Rate",C=h("dd"),T=g(q),k=y(),O=h("section"),I=h("h1"),I.textContent="Comestibles",R=y(),J(M.$$.fragment)},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,s),d(s,l),d(s,a),d(a,c),B&&B.m(s,null),d(s,u),P&&P.m(s,null),d(s,m),d(s,v),d(v,$),d(s,x),d(s,w),d(w,E),d(s,S),d(s,C),d(C,T),f(t,k,p),f(t,O,p),d(O,I),d(O,R),K(M,O,null),A=!0},p(t,[e]){(!A||1&e)&&N!==(N=st(t[0])+"")&&b(r,N),(!A||1&e)&&L!==(L=t[0].vit_type+"")&&b(c,L),t[0].excess?B?B.p(t,e):(B=zl(t),B.c(),B.m(s,u)):B&&(B.d(1),B=null),t[0].deficiency?P?P.p(t,e):(P=Yl(t),P.c(),P.m(s,m)):P&&(P.d(1),P=null),(!A||1&e)&&D!==(D=(t[0].min??0)+"")&&b($,D),(!A||1&e)&&j!==(j=(t[0].max??0)+"")&&b(E,j),(!A||1&e)&&q!==(q=(t[0].rate??"0 m")+"")&&b(T,q);const n={};1025&e&&(n.$$scope={dirty:e,ctx:t}),M.$set(n)},i(t){A||(W(M.$$.fragment,t),A=!0)},o(t){z(M.$$.fragment,t),A=!1},d(t){t&&p(e),t&&p(o),t&&p(i),B&&B.d(),P&&P.d(),t&&p(k),t&&p(O),X(M)}}}function Ql(t,e,n){let{item:r}=e;const o=O("data"),i=o.byType("item").filter((t=>{var e;return"COMESTIBLE"===t.type&&t.id&&(null!==(e=t.vitamins)&&void 0!==e?e:[]).some((t=>t[0]===r.id))})).map((t=>({comestible:t,pct:t.vitamins.find((t=>t[0]===r.id))[1]})));i.sort(((t,e)=>e.pct-t.pct));const s=r.excess?o.byId("effect_type",r.excess).name:[],l=r.deficiency?o.byId("effect_type",r.deficiency).name:[];return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,i,s,l]}class Zl extends tt{constructor(t){super(),Z(this,t,Ql,Xl,i,{item:0})}}function ta(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r[7]=n,r}function ea(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r[7]=n,r}function na(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r[7]=n,r}function ra(t,e,n){const r=t.slice();return r[10]=e[n],r}function oa(t,e,n){const r=t.slice();return r[13]=e[n].id,r[14]=e[n].count,r[15]=e[n].prob,r}function ia(t,e,n){const r=t.slice();return r[18]=e[n][0],r[5]=e[n][1],r}function sa(t){let e,n,r,o;return r=new It({props:{type:"item",id:t[0].fuel_type}}),{c(){e=h("dt"),e.textContent="Charge",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].fuel_type),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function la(t){let e,n,r,o=dt(t[0].folded_volume)+"";return{c(){e=h("dt"),e.textContent="Folded Volume",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=dt(t[0].folded_volume)+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function aa(t){let e,n,r,o,i,s=t[0].qualities,l=[];for(let e=0;e<s.length;e+=1)l[e]=ca(ia(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Qualities",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","no-bullets")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(s=t[0].qualities,n=0;n<s.length;n+=1){const o=ia(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=ca(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function ca(t){let e,n,r,o,i,s,l,a,c=(t[5]??1)+"";return s=new It({props:{type:"tool_quality",id:t[18]}}),{c(){e=h("li"),n=g("Has level "),r=h("strong"),o=g(c),i=y(),J(s.$$.fragment),l=g(" quality.\n            ")},m(t,c){f(t,e,c),d(e,n),d(e,r),d(r,o),d(r,i),K(s,r,null),d(e,l),a=!0},p(t,e){(!a||1&e)&&c!==(c=(t[5]??1)+"")&&b(o,c);const n={};1&e&&(n.id=t[18]),s.$set(n)},i(t){a||(W(s.$$.fragment,t),a=!0)},o(t){z(s.$$.fragment,t),a=!1},d(t){t&&p(e),X(s)}}}function ua(t){let e,n,r,o=t[0].comfort+"";return{c(){e=h("dt"),e.textContent="Comfort",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].comfort+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function da(t){let e,n,r,o=t[0].floor_bedding_warmth+"";return{c(){e=h("dt"),e.textContent="Bedding Warmth",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].floor_bedding_warmth+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function fa(t){let e,n,r,o=t[0].epower+"";return{c(){e=h("dt"),e.textContent="Electric Power",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].epower+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function pa(t){let e,n,r,o=-t[0].energy_consumption+"";return{c(){e=h("dt"),e.textContent="Drain",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=-t[0].energy_consumption+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function ma(t){let e,n,r,o,i,s=t[0].power+"",l=t[0].muscle_power_factor&&ha(t);return{c(){e=h("dt"),e.textContent="Power",n=h("dd"),r=g(s),o=y(),l&&l.c(),i=y()},m(t,s){f(t,e,s),f(t,n,s),d(n,r),d(n,o),l&&l.m(n,null),d(n,i)},p(t,e){1&e&&s!==(s=t[0].power+"")&&b(r,s),t[0].muscle_power_factor?l?l.p(t,e):(l=ha(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null)},d(t){t&&p(e),t&&p(n),l&&l.d()}}}function ha(t){let e,n,r=t[0].muscle_power_factor+"";return{c(){e=g("+ (str − 8) × "),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e&&r!==(r=t[0].muscle_power_factor+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function ga(t){let e,n,r,o,i=La(t[0])+"",s=t[0].bonus+"";return{c(){e=h("dt"),n=g(i),r=h("dd"),o=g(s)},m(t,i){f(t,e,i),d(e,n),f(t,r,i),d(r,o)},p(t,e){1&e&&i!==(i=La(t[0])+"")&&b(n,i),1&e&&s!==(s=t[0].bonus+"")&&b(o,s)},d(t){t&&p(e),t&&p(r)}}}function ya(e){let n,r,o;r=new It({props:{id:e[13],count:e[14],type:"item"}});let i=1!==e[15]&&function(e){let n,r,o,i=function(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}(e[15])+"";return{c(){n=g("("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),J(r.$$.fragment),i&&i.c()},m(t,e){f(t,n,e),K(r,n,null),i&&i.m(n,null),o=!0},p(t,e){1!==t[15]&&i.p(t,e)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r),i&&i.d()}}}function _a(t){let e;return{c(){e=h("em"),e.textContent="none"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function va(t){let e,n,r;return n=new It({props:{type:"json_flag",id:t[10]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[10]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function $a(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ba(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function xa(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function wa(t){let e,n,r,o,i,s,l=t[5]+"";function a(t,e){return t[7]===t[0].requirements.install.skills.length-2?xa:t[7]!==t[0].requirements.install.skills.length-1?ba:void 0}e=new It({props:{type:"skill",id:t[4]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[4]),e.$set(o),(!s||1&n)&&l!==(l=t[5]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Ea(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Sa(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ca(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ta(t){let e,n,r,o,i,s,l=t[5]+"";function a(t,e){return t[7]===t[0].requirements.removal.skills.length-2?Ca:t[7]!==t[0].requirements.removal.skills.length-1?Sa:void 0}e=new It({props:{type:"skill",id:t[4]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[4]),e.$set(o),(!s||1&n)&&l!==(l=t[5]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function ka(t){let e,n;return e=new Dr({props:{requirement:t[0].requirements.removal}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.requirement=t[0].requirements.removal),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Oa(t){let e,n,r,o,i,s,l,a,c,u,_,v,x,E,S=(t[0].requirements?.repair?.time??"1 hour")+"",C=t[0].requirements.repair?.skills??[],T=[];for(let e=0;e<C.length;e+=1)T[e]=Aa(ta(t,C,e));const k=t=>z(T[t],1,1,(()=>{T[t]=null}));let O=null;return C.length||(O=Ia()),_=new Dr({props:{requirement:t[0].requirements.repair}}),{c(){e=h("section"),n=h("h1"),n.textContent="Repair",r=y(),o=h("dl"),i=h("dt"),i.textContent="Skills Required",s=h("dd");for(let t=0;t<T.length;t+=1)T[t].c();O&&O.c(),l=y(),a=h("dt"),a.textContent="Time",c=h("dd"),u=g(S),J(_.$$.fragment),v=y(),x=h("p"),x.textContent="Repair time and requirements are lower for parts that are less damaged.",$(a,"title","Time required goes down with better skills"),w(x,"color","var(--cata-color-gray)"),w(x,"font-style","italic")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,s);for(let t=0;t<T.length;t+=1)T[t].m(s,null);O&&O.m(s,null),d(s,l),d(o,a),d(o,c),d(c,u),K(_,o,null),d(e,v),d(e,x),E=!0},p(t,e){if(1&e){let n;for(C=t[0].requirements.repair?.skills??[],n=0;n<C.length;n+=1){const r=ta(t,C,n);T[n]?(T[n].p(r,e),W(T[n],1)):(T[n]=Aa(r),T[n].c(),W(T[n],1),T[n].m(s,l))}for(U(),n=C.length;n<T.length;n+=1)k(n);G(),C.length?O&&(O.d(1),O=null):O||(O=Ia(),O.c(),O.m(s,l))}(!E||1&e)&&S!==(S=(t[0].requirements?.repair?.time??"1 hour")+"")&&b(u,S);const n={};1&e&&(n.requirement=t[0].requirements.repair),_.$set(n)},i(t){if(!E){for(let t=0;t<C.length;t+=1)W(T[t]);W(_.$$.fragment,t),E=!0}},o(t){T=T.filter(Boolean);for(let t=0;t<T.length;t+=1)z(T[t]);z(_.$$.fragment,t),E=!1},d(t){t&&p(e),m(T,t),O&&O.d(),X(_)}}}function Ia(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ra(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ma(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Aa(t){let e,n,r,o,i,s,l=t[5]+"";function a(t,e){return t[7]===t[0].requirements.repair.skills.length-2?Ma:t[7]!==t[0].requirements.repair.skills.length-1?Ra:void 0}e=new It({props:{type:"skill",id:t[4]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")"),u&&u.c(),i=_()},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),u&&u.m(t,l),f(t,i,l),s=!0},p(t,n){const o={};1&n&&(o.id=t[4]),e.$set(o),(!s||1&n)&&l!==(l=t[5]+"")&&b(r,l),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Na(t){let e,n,r,o,i,s,l,a,c,u,v,x,E,S,C,T,k,O,I,R,M,A,N,L,D,j,q,B,P,F,H,V,Y,Q,Z,tt,et,nt,rt,ot,lt,at,ct,ut,dt,pt,mt,ht,gt,yt,_t,vt,$t,bt,xt,wt,Et,St,Ct,Tt,kt,Ot=(t[0].name?st(t[0]):st(t[1].byId("item",t[0].item)))+"",Rt=ft(t[1].byId("item",t[0].item).weight)+"",Mt=(t[0].durability??0)+"",At=(t[0].damage_modifier??100)+"",Nt=t[0].bonus&&La(t[0]),Lt=it(t[0].description??t[1].byId("item",t[0].item).description)+"",Dt=(t[0].requirements?.install?.time??"1 hour")+"",jt=(t[0].requirements?.removal?.time??ja(Da(t[0].requirements?.install?.time??"1 hour")/2+" s"))+"";u=new It({props:{id:t[0].item,type:"item"}});let qt=t[0].fuel_type&&sa(t),Bt=t[0].folded_volume&&la(t),Pt=t[0].qualities?.length&&aa(t),Ft=t[0].comfort&&ua(t),Ht=t[0].floor_bedding_warmth&&da(t),Ut=t[0].epower&&fa(t),Gt=t[0].energy_consumption&&pa(t),Wt=t[0].power&&ma(t),zt=Nt&&ga(t),Vt=t[2]?.length&&function(t){let e,n,r,o,i,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=ya(oa(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Breaks Into",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=y(),$(r,"class","comma-separated")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o),i=!0},p(t,e){if(4&e){let n;for(s=t[2],n=0;n<s.length;n+=1){const o=oa(t,s,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=ya(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t),Yt=t[0].flags??[],Jt=[];for(let e=0;e<Yt.length;e+=1)Jt[e]=va(ra(t,Yt,e));const Kt=t=>z(Jt[t],1,1,(()=>{Jt[t]=null}));let Xt=null;Yt.length||(Xt=_a());let Qt=t[0].requirements?.install?.skills??[],Zt=[];for(let e=0;e<Qt.length;e+=1)Zt[e]=wa(na(t,Qt,e));const te=t=>z(Zt[t],1,1,(()=>{Zt[t]=null}));let ee=null;Qt.length||(ee=$a()),pt=new Dr({props:{requirement:{...t[0].requirements?.install??{},components:(t[0].requirements?.install?.components??[]).concat([[[t[0].item,1]]])}}});let ne=t[0].requirements?.removal?.skills??[],re=[];for(let e=0;e<ne.length;e+=1)re[e]=Ta(ea(t,ne,e));const oe=t=>z(re[t],1,1,(()=>{re[t]=null}));let ie=null;ne.length||(ie=Ea());let se=t[0].requirements?.removal&&ka(t),le=t[0].requirements?.repair&&Oa(t);return{c(){e=h("h1"),n=g(Ot),r=y(),o=h("section"),i=h("h1"),i.textContent="Vehicle Part",s=y(),l=h("dl"),a=h("dt"),a.textContent="Item",c=h("dd"),J(u.$$.fragment),v=h("dt"),v.textContent="Weight",x=h("dd"),E=g(Rt),qt&&qt.c(),S=h("dt"),S.textContent="Durability\n    ",C=h("dd"),T=g(Mt),Bt&&Bt.c(),k=_(),Pt&&Pt.c(),O=_(),Ft&&Ft.c(),I=_(),Ht&&Ht.c(),R=h("dt"),R.textContent="Damage",M=h("dd"),A=g(At),N=g("%"),Ut&&Ut.c(),L=_(),Gt&&Gt.c(),D=_(),Wt&&Wt.c(),j=_(),zt&&zt.c(),q=_(),Vt&&Vt.c(),B=h("dt"),B.textContent="Flags",P=h("dd"),F=h("ul");for(let t=0;t<Jt.length;t+=1)Jt[t].c();Xt&&Xt.c(),H=y(),V=h("p"),Y=g(Lt),Q=y(),Z=h("div"),tt=h("section"),et=h("h1"),et.textContent="Install",nt=y(),rt=h("dl"),ot=h("dt"),ot.textContent="Skills Required",lt=h("dd");for(let t=0;t<Zt.length;t+=1)Zt[t].c();ee&&ee.c(),at=y(),ct=h("dt"),ct.textContent="Time",ut=h("dd"),dt=g(Dt),J(pt.$$.fragment),mt=y(),ht=h("section"),gt=h("h1"),gt.textContent="Remove",yt=y(),_t=h("dl"),vt=h("dt"),vt.textContent="Skills Required",$t=h("dd");for(let t=0;t<re.length;t+=1)re[t].c();ie&&ie.c(),bt=y(),xt=h("dt"),xt.textContent="Time",wt=h("dd"),Et=g(jt),St=y(),se&&se.c(),Ct=y(),le&&le.c(),Tt=_(),$(S,"title","Maximum damage part can sustain before being destroyed"),$(F,"class","comma-separated"),w(V,"color","var(--cata-color-gray)"),$(ct,"title","Time required goes down with better skills"),$(xt,"title","Time required goes down with better skills"),$(Z,"class","side-by-side")},m(t,p){f(t,e,p),d(e,n),f(t,r,p),f(t,o,p),d(o,i),d(o,s),d(o,l),d(l,a),d(l,c),K(u,c,null),d(l,v),d(l,x),d(x,E),qt&&qt.m(l,null),d(l,S),d(l,C),d(C,T),Bt&&Bt.m(l,null),d(l,k),Pt&&Pt.m(l,null),d(l,O),Ft&&Ft.m(l,null),d(l,I),Ht&&Ht.m(l,null),d(l,R),d(l,M),d(M,A),d(M,N),Ut&&Ut.m(l,null),d(l,L),Gt&&Gt.m(l,null),d(l,D),Wt&&Wt.m(l,null),d(l,j),zt&&zt.m(l,null),d(l,q),Vt&&Vt.m(l,null),d(l,B),d(l,P),d(P,F);for(let t=0;t<Jt.length;t+=1)Jt[t].m(F,null);Xt&&Xt.m(F,null),d(o,H),d(o,V),d(V,Y),f(t,Q,p),f(t,Z,p),d(Z,tt),d(tt,et),d(tt,nt),d(tt,rt),d(rt,ot),d(rt,lt);for(let t=0;t<Zt.length;t+=1)Zt[t].m(lt,null);ee&&ee.m(lt,null),d(lt,at),d(rt,ct),d(rt,ut),d(ut,dt),K(pt,rt,null),d(Z,mt),d(Z,ht),d(ht,gt),d(ht,yt),d(ht,_t),d(_t,vt),d(_t,$t);for(let t=0;t<re.length;t+=1)re[t].m($t,null);ie&&ie.m($t,null),d($t,bt),d(_t,xt),d(_t,wt),d(wt,Et),d(wt,St),se&&se.m(_t,null),f(t,Ct,p),le&&le.m(t,p),f(t,Tt,p),kt=!0},p(t,[e]){(!kt||1&e)&&Ot!==(Ot=(t[0].name?st(t[0]):st(t[1].byId("item",t[0].item)))+"")&&b(n,Ot);const r={};if(1&e&&(r.id=t[0].item),u.$set(r),(!kt||1&e)&&Rt!==(Rt=ft(t[1].byId("item",t[0].item).weight)+"")&&b(E,Rt),t[0].fuel_type?qt?(qt.p(t,e),1&e&&W(qt,1)):(qt=sa(t),qt.c(),W(qt,1),qt.m(l,S)):qt&&(U(),z(qt,1,1,(()=>{qt=null})),G()),(!kt||1&e)&&Mt!==(Mt=(t[0].durability??0)+"")&&b(T,Mt),t[0].folded_volume?Bt?Bt.p(t,e):(Bt=la(t),Bt.c(),Bt.m(l,k)):Bt&&(Bt.d(1),Bt=null),t[0].qualities?.length?Pt?(Pt.p(t,e),1&e&&W(Pt,1)):(Pt=aa(t),Pt.c(),W(Pt,1),Pt.m(l,O)):Pt&&(U(),z(Pt,1,1,(()=>{Pt=null})),G()),t[0].comfort?Ft?Ft.p(t,e):(Ft=ua(t),Ft.c(),Ft.m(l,I)):Ft&&(Ft.d(1),Ft=null),t[0].floor_bedding_warmth?Ht?Ht.p(t,e):(Ht=da(t),Ht.c(),Ht.m(l,R)):Ht&&(Ht.d(1),Ht=null),(!kt||1&e)&&At!==(At=(t[0].damage_modifier??100)+"")&&b(A,At),t[0].epower?Ut?Ut.p(t,e):(Ut=fa(t),Ut.c(),Ut.m(l,L)):Ut&&(Ut.d(1),Ut=null),t[0].energy_consumption?Gt?Gt.p(t,e):(Gt=pa(t),Gt.c(),Gt.m(l,D)):Gt&&(Gt.d(1),Gt=null),t[0].power?Wt?Wt.p(t,e):(Wt=ma(t),Wt.c(),Wt.m(l,j)):Wt&&(Wt.d(1),Wt=null),1&e&&(Nt=t[0].bonus&&La(t[0])),Nt?zt?zt.p(t,e):(zt=ga(t),zt.c(),zt.m(l,q)):zt&&(zt.d(1),zt=null),t[2]?.length&&Vt.p(t,e),1&e){let n;for(Yt=t[0].flags??[],n=0;n<Yt.length;n+=1){const r=ra(t,Yt,n);Jt[n]?(Jt[n].p(r,e),W(Jt[n],1)):(Jt[n]=va(r),Jt[n].c(),W(Jt[n],1),Jt[n].m(F,null))}for(U(),n=Yt.length;n<Jt.length;n+=1)Kt(n);G(),Yt.length?Xt&&(Xt.d(1),Xt=null):Xt||(Xt=_a(),Xt.c(),Xt.m(F,null))}if((!kt||1&e)&&Lt!==(Lt=it(t[0].description??t[1].byId("item",t[0].item).description)+"")&&b(Y,Lt),1&e){let n;for(Qt=t[0].requirements?.install?.skills??[],n=0;n<Qt.length;n+=1){const r=na(t,Qt,n);Zt[n]?(Zt[n].p(r,e),W(Zt[n],1)):(Zt[n]=wa(r),Zt[n].c(),W(Zt[n],1),Zt[n].m(lt,at))}for(U(),n=Qt.length;n<Zt.length;n+=1)te(n);G(),Qt.length?ee&&(ee.d(1),ee=null):ee||(ee=$a(),ee.c(),ee.m(lt,at))}(!kt||1&e)&&Dt!==(Dt=(t[0].requirements?.install?.time??"1 hour")+"")&&b(dt,Dt);const o={};if(1&e&&(o.requirement={...t[0].requirements?.install??{},components:(t[0].requirements?.install?.components??[]).concat([[[t[0].item,1]]])}),pt.$set(o),1&e){let n;for(ne=t[0].requirements?.removal?.skills??[],n=0;n<ne.length;n+=1){const r=ea(t,ne,n);re[n]?(re[n].p(r,e),W(re[n],1)):(re[n]=Ta(r),re[n].c(),W(re[n],1),re[n].m($t,bt))}for(U(),n=ne.length;n<re.length;n+=1)oe(n);G(),ne.length?ie&&(ie.d(1),ie=null):ie||(ie=Ea(),ie.c(),ie.m($t,bt))}(!kt||1&e)&&jt!==(jt=(t[0].requirements?.removal?.time??ja(Da(t[0].requirements?.install?.time??"1 hour")/2+" s"))+"")&&b(Et,jt),t[0].requirements?.removal?se?(se.p(t,e),1&e&&W(se,1)):(se=ka(t),se.c(),W(se,1),se.m(_t,null)):se&&(U(),z(se,1,1,(()=>{se=null})),G()),t[0].requirements?.repair?le?(le.p(t,e),1&e&&W(le,1)):(le=Oa(t),le.c(),W(le,1),le.m(Tt.parentNode,Tt)):le&&(U(),z(le,1,1,(()=>{le=null})),G())},i(t){if(!kt){W(u.$$.fragment,t),W(qt),W(Pt),W(Vt);for(let t=0;t<Yt.length;t+=1)W(Jt[t]);for(let t=0;t<Qt.length;t+=1)W(Zt[t]);W(pt.$$.fragment,t);for(let t=0;t<ne.length;t+=1)W(re[t]);W(se),W(le),kt=!0}},o(t){z(u.$$.fragment,t),z(qt),z(Pt),z(Vt),Jt=Jt.filter(Boolean);for(let t=0;t<Jt.length;t+=1)z(Jt[t]);Zt=Zt.filter(Boolean);for(let t=0;t<Zt.length;t+=1)z(Zt[t]);z(pt.$$.fragment,t),re=re.filter(Boolean);for(let t=0;t<re.length;t+=1)z(re[t]);z(se),z(le),kt=!1},d(t){t&&p(e),t&&p(r),t&&p(o),X(u),qt&&qt.d(),Bt&&Bt.d(),Pt&&Pt.d(),Ft&&Ft.d(),Ht&&Ht.d(),Ut&&Ut.d(),Gt&&Gt.d(),Wt&&Wt.d(),zt&&zt.d(),Vt&&Vt.d(),m(Jt,t),Xt&&Xt.d(),t&&p(Q),t&&p(Z),m(Zt,t),ee&&ee.d(),X(pt),m(re,t),ie&&ie.d(),se&&se.d(),t&&p(Ct),le&&le.d(t),t&&p(Tt)}}}function La(t){var e;const n=null!==(e=t.flags)&&void 0!==e?e:[];return n.includes("SEATBELT")?"Strength":n.includes("HORN")?"Noise":n.includes("MUFFLER")?"Noise Reduction":n.includes("VISION")?"Range":["LIGHT","CONE_LIGHT","WIDE_CONE_LIGHT","CIRCLE_LIGHT","DOME_LIGHT","AISLE_LIGHT","EVENTURN","ODDTURN","ATOMIC_LIGHT"].some((t=>n.includes(t)))?"Light":n.includes("REAPER")?"Plant Harvested":void 0}function Da(t){if("number"==typeof t)return t/100;const e=[["turns",1],["turn",1],["t",1],["seconds",1],["second",1],["s",1],["minutes",60],["minute",60],["m",60],["hours",3600],["hour",3600],["h",3600],["days",86400],["day",86400],["d",86400]],[n,r]=t.trim().split(/\s+/),o=e.find((t=>t[0]===r));if(!o)throw new Error(`bad duration: ${JSON.stringify(t)}`);return Number(n)*o[1]}function ja(t){const e=Da(t);return`${Math.round(e/60)} m`}function qa(t,e,n){let{item:r}=e;const o=O("data"),i="string"==typeof r.breaks_into?o.byId("item_group",r.breaks_into):Array.isArray(r.breaks_into)?{subtype:"collection",entries:r.breaks_into}:r.breaks_into?r.breaks_into:null,s=i&&o.flattenItemGroup(i);return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o,s]}class Ba extends tt{constructor(t){super(),Z(this,t,qa,Na,i,{item:0})}}function Pa(t){let e;const n=t[5].default,r=a(n,t,t[4],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&16&e&&u(r,n,t,t[4],e,null,null)},i(t){e||(W(r,t),e=!0)},o(t){z(r,t),e=!1},d(t){r&&r.d(t)}}}function Fa(e){let n,r,o,i,s,l,a=e[1].message+"",c=(e[2]?e[1].stack:"")+"";return{c(){n=h("div"),r=h("b"),o=g(a),i=y(),s=h("pre"),l=g(c),$(s,"class","trace svelte-1nrekyi"),$(n,"class","error svelte-1nrekyi")},m(t,e){f(t,n,e),d(n,r),d(r,o),d(n,i),d(n,s),d(s,l)},p(t,e){2&e&&a!==(a=t[1].message+"")&&b(o,a),2&e&&c!==(c=(t[2]?t[1].stack:"")+"")&&b(l,c)},i:t,o:t,d(t){t&&p(n)}}}function Ha(t){let e,n,r,o;const i=[Fa,Pa],s=[];function l(t,e){return t[1]?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function Ua(e,n,r){let o,i=t,l=()=>(i(),i=s(u,(t=>r(1,o=t))),u);e.$$.on_destroy.push((()=>i()));let{$$slots:a={},$$scope:c}=n,{error:u=null}=n;l();let{onError:d=null}=n,f="production"!==("undefined"!=typeof process&&process.env&&process.env.NODE_ENV);return e.$$set=t=>{"error"in t&&l(r(0,u=t.error)),"onError"in t&&r(3,d=t.onError),"$$scope"in t&&r(4,c=t.$$scope)},e.$$.update=()=>{10&e.$$.dirty&&o&&d&&d(o)},[u,o,f,d,c,a]}var Ga=Object.freeze({__proto__:null,default:class extends tt{constructor(t){super(),Z(this,t,Ua,Ha,i,{error:0,onError:3})}}});const Wa=["c","l","h","m","p","a","i","o","d"];var za=Object.freeze({__proto__:null,createBoundary:function(t){if(t.$$render){let e=t.$$render;return t.$$render=(t,n,r,o)=>{const i=nt(void 0);try{return e(t,{error:i,...n},r,o)}catch(o){return i.set(o),e(t,{error:i,...n},r,{})}},t}function e(t,e){return function(...n){try{return t(...n)}catch(t){e(t)}}}return class extends t{constructor(t){const n=nt(void 0);t.props.$$slots.default=t.props.$$slots.default.map((t=>(...r)=>{let o=e(t,n.set)(...r);if(o)for(let t of Wa)o[t]&&(o[t]=e(o[t],n.set));return o})),super(t),this.$$set({error:n})}}}});function Va(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var Ya=Va(Ga),Ja=Va(za);const{default:Ka}=Ya,{createBoundary:Xa}=Ja,Qa=Xa(Ka);Qa.default=Qa;var Za=Qa;function tc(t){let e,n,r,o,i,s,l,a,c,u=JSON.stringify(t[2],null,2)+"";const m=[oc,rc,nc],_=[];function v(t,e){return t[1]?0:globalThis?.process?1:2}return e=v(t),n=_[e]=m[e](t),{c(){n.c(),r=y(),o=h("details"),i=h("summary"),i.textContent="Raw JSON",s=y(),l=h("pre"),a=g(u)},m(t,n){_[e].m(t,n),f(t,r,n),f(t,o,n),d(o,i),d(o,s),d(o,l),d(l,a),c=!0},p(t,o){let i=e;e=v(t),e===i?_[e].p(t,o):(U(),z(_[i],1,1,(()=>{_[i]=null})),G(),n=_[e],n?n.p(t,o):(n=_[e]=m[e](t),n.c()),W(n,1),n.m(r.parentNode,r)),(!c||4&o)&&u!==(u=JSON.stringify(t[2],null,2)+"")&&b(a,u)},i(t){c||(W(n),c=!0)},o(t){z(n),c=!1},d(t){_[e].d(t),t&&p(r),t&&p(o)}}}function ec(e){let n,r,o,i,s=e[0].type+"",l=e[0].id+"";return{c(){n=g("Unknown obj: "),r=g(s),o=g("/"),i=g(l)},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e)},p(t,e){1&e&&s!==(s=t[0].type+"")&&b(r,s),1&e&&l!==(l=t[0].id+"")&&b(i,l)},i:t,o:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i)}}}function nc(t){let e,n;return e=new Za({props:{onError:t[3],$$slots:{default:[ic]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};132&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function rc(t){let e,n,r;var o=t[4][t[2].type]??gi;function i(t){return{props:{item:t[2]}}}return o&&(e=new o(i(t))),{c(){e&&J(e.$$.fragment),n=_()},m(t,o){e&&K(e,t,o),f(t,n,o),r=!0},p(t,r){const s={};if(4&r&&(s.item=t[2]),o!==(o=t[4][t[2].type]??gi)){if(e){U();const t=e;z(t.$$.fragment,1,0,(()=>{X(t,1)})),G()}o?(e=new o(i(t)),J(e.$$.fragment),W(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&z(e.$$.fragment,t),r=!1},d(t){t&&p(n),e&&X(e,t)}}}function oc(e){let n,r,o,i,s,l,a,c,u,m,_,v,$=e[1].message+"",x=e[1].stack+"";return{c(){n=h("section"),r=h("h1"),r.textContent="Error",o=y(),i=h("p"),i.textContent="There was a problem displaying this page. Not all versions of Cataclysm\n        are supported by the Guide currently. Try selecting a different build.",s=y(),l=h("p"),a=h("details"),c=h("summary"),u=g($),m=y(),_=h("pre"),v=g(x)},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(n,s),d(n,l),d(l,a),d(a,c),d(c,u),d(a,m),d(a,_),d(_,v)},p(t,e){2&e&&$!==($=t[1].message+"")&&b(u,$),2&e&&x!==(x=t[1].stack+"")&&b(v,x)},i:t,o:t,d(t){t&&p(n)}}}function ic(t){let e,n,r;var o=t[4][t[2].type]??gi;function i(t){return{props:{item:t[2]}}}return o&&(e=new o(i(t))),{c(){e&&J(e.$$.fragment),n=_()},m(t,o){e&&K(e,t,o),f(t,n,o),r=!0},p(t,r){const s={};if(4&r&&(s.item=t[2]),o!==(o=t[4][t[2].type]??gi)){if(e){U();const t=e;z(t.$$.fragment,1,0,(()=>{X(t,1)})),G()}o?(e=new o(i(t)),J(e.$$.fragment),W(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&z(e.$$.fragment,t),r=!1},d(t){t&&p(n),e&&X(e,t)}}}function sc(t){let e,n,r,o;const i=[ec,tc],s=[];function l(t,e){return t[2]?1:0}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function lc(t,e,n){var r;let{item:o}=e,{data:i}=e;k("data",i);let s,l=null;const a={MONSTER:xe,AMMO:pi,GUN:pi,ARMOR:pi,PET_ARMOR:pi,TOOL:pi,TOOLMOD:pi,TOOL_ARMOR:pi,BOOK:pi,COMESTIBLE:pi,ENGINE:pi,WHEEL:pi,GUNMOD:pi,MAGAZINE:pi,BATTERY:pi,GENERIC:pi,BIONIC_ITEM:pi,material:bi,ammunition_type:Ti,tool_quality:Vi,furniture:Ds,skill:Bs,proficiency:Ws,json_flag:el,fault:Ol,technique:Ul,vitamin:Zl,vehicle_part:Ba};return t.$$set=t=>{"item"in t&&n(0,o=t.item),"data"in t&&n(5,i=t.data)},t.$$.update=()=>{var e,l;97&t.$$.dirty&&n(2,s=null!==n(6,r=i.byId(o.type,o.id))&&void 0!==r?r:(e=o.id,"json_flag"===(l=o.type)?{id:e,type:l}:null))},[o,l,s,function(t){n(1,l=t)},a,i,r]}class ac extends tt{constructor(t){super(),Z(this,t,lc,sc,i,{item:0,data:5})}}function cc(t){return Array.isArray?Array.isArray(t):"[object Array]"===gc(t)}function uc(t){return"string"==typeof t}function dc(t){return"number"==typeof t}function fc(t){return!0===t||!1===t||function(t){return pc(t)&&null!==t}(t)&&"[object Boolean]"==gc(t)}function pc(t){return"object"==typeof t}function mc(t){return null!=t}function hc(t){return!t.trim().length}function gc(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const yc=Object.prototype.hasOwnProperty;class _c{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=vc(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function vc(t){let e=null,n=null,r=null,o=1;if(uc(t)||cc(t))r=t,e=$c(t),n=bc(t);else{if(!yc.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,yc.call(t,"weight")&&(o=t.weight,o<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=$c(i),n=bc(i)}return{path:e,id:n,weight:o,src:r}}function $c(t){return cc(t)?t:t.split(".")}function bc(t){return cc(t)?t.join("."):t}var xc={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const o=(t,e,i)=>{if(mc(t))if(e[i]){const s=t[e[i]];if(!mc(s))return;if(i===e.length-1&&(uc(s)||dc(s)||fc(s)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(s));else if(cc(s)){r=!0;for(let t=0,n=s.length;t<n;t+=1)o(s[t],e,i+1)}else e.length&&o(s,e,i+1)}else n.push(t)};return o(t,uc(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const wc=/[^ ]+/g;class Ec{constructor({getFn:t=xc.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(wc).length;if(e.has(r))return e.get(r);const o=1/Math.sqrt(r),i=parseFloat(Math.round(o*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,uc(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();uc(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!mc(t)||hc(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let o=this.getFn(t,e.path);if(mc(o))if(cc(o)){let t=[];const e=[{nestedArrIndex:-1,value:o}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(mc(r))if(uc(r)&&!hc(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else cc(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!hc(o)){let t={v:o,n:this.norm.get(o)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Sc(t,e,{getFn:n=xc.getFn}={}){const r=new Ec({getFn:n});return r.setKeys(t.map(vc)),r.setSources(e),r.create(),r}function Cc(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:o=xc.distance,ignoreLocation:i=xc.ignoreLocation}={}){const s=e/t.length;if(i)return s;const l=Math.abs(r-n);return o?s+l/o:l?1:s}const Tc=32;function kc(t,e,n,{location:r=xc.location,distance:o=xc.distance,threshold:i=xc.threshold,findAllMatches:s=xc.findAllMatches,minMatchCharLength:l=xc.minMatchCharLength,includeMatches:a=xc.includeMatches,ignoreLocation:c=xc.ignoreLocation}={}){if(e.length>Tc)throw new Error(`Pattern length exceeds max of ${Tc}.`);const u=e.length,d=t.length,f=Math.max(0,Math.min(r,d));let p=i,m=f;const h=l>1||a,g=h?Array(d):[];let y;for(;(y=t.indexOf(e,m))>-1;){let t=Cc(e,{currentLocation:y,expectedLocation:f,distance:o,ignoreLocation:c});if(p=Math.min(t,p),m=y+u,h){let t=0;for(;t<u;)g[y+t]=1,t+=1}}m=-1;let _=[],v=1,$=u+d;const b=1<<u-1;for(let r=0;r<u;r+=1){let i=0,l=$;for(;i<l;){Cc(e,{errors:r,currentLocation:f+l,expectedLocation:f,distance:o,ignoreLocation:c})<=p?i=l:$=l,l=Math.floor(($-i)/2+i)}$=l;let a=Math.max(1,f-l+1),y=s?d:Math.min(f+l,d)+u,x=Array(y+2);x[y+1]=(1<<r)-1;for(let i=y;i>=a;i-=1){let s=i-1,l=n[t.charAt(s)];if(h&&(g[s]=+!!l),x[i]=(x[i+1]<<1|1)&l,r&&(x[i]|=(_[i+1]|_[i])<<1|1|_[i+1]),x[i]&b&&(v=Cc(e,{errors:r,currentLocation:s,expectedLocation:f,distance:o,ignoreLocation:c}),v<=p)){if(p=v,m=s,m<=f)break;a=Math.max(1,2*f-m)}}if(Cc(e,{errors:r+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:c})>p)break;_=x}const x={isMatch:m>=0,score:Math.max(.001,v)};if(h){const t=function(t=[],e=xc.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let s=t.length;i<s;i+=1){let s=t[i];s&&-1===r?r=i:s||-1===r||(o=i-1,o-r+1>=e&&n.push([r,o]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(g,l);t.length?a&&(x.indices=t):x.isMatch=!1}return x}function Oc(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const o=t.charAt(n);e[o]=(e[o]||0)|1<<r-n-1}return e}class Ic{constructor(t,{location:e=xc.location,threshold:n=xc.threshold,distance:r=xc.distance,includeMatches:o=xc.includeMatches,findAllMatches:i=xc.findAllMatches,minMatchCharLength:s=xc.minMatchCharLength,isCaseSensitive:l=xc.isCaseSensitive,ignoreLocation:a=xc.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:a},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(t,e)=>{this.chunks.push({pattern:t,alphabet:Oc(t),startIndex:e})},u=this.pattern.length;if(u>Tc){let t=0;const e=u%Tc,n=u-e;for(;t<n;)c(this.pattern.substr(t,Tc),t),t+=Tc;if(e){const t=u-Tc;c(this.pattern.substr(t),t)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,ignoreLocation:a}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:f,startIndex:p})=>{const{isMatch:m,score:h,indices:g}=kc(t,e,f,{location:r+p,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,includeMatches:n,ignoreLocation:a});m&&(d=!0),u+=h,m&&g&&(c=[...c,...g])}));let f={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(f.indices=c),f}}class Rc{constructor(t){this.pattern=t}static isMultiMatch(t){return Mc(t,this.multiRegex)}static isSingleMatch(t){return Mc(t,this.singleRegex)}search(){}}function Mc(t,e){const n=t.match(e);return n?n[1]:null}class Ac extends Rc{constructor(t,{location:e=xc.location,threshold:n=xc.threshold,distance:r=xc.distance,includeMatches:o=xc.includeMatches,findAllMatches:i=xc.findAllMatches,minMatchCharLength:s=xc.minMatchCharLength,isCaseSensitive:l=xc.isCaseSensitive,ignoreLocation:a=xc.ignoreLocation}={}){super(t),this._bitapSearch=new Ic(t,{location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Nc extends Rc{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],o=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+o,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Lc=[class extends Rc{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Nc,class extends Rc{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends Rc{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Rc{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Rc{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends Rc{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Ac],Dc=Lc.length,jc=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const qc=new Set([Ac.type,Nc.type]);class Bc{constructor(t,{isCaseSensitive:e=xc.isCaseSensitive,includeMatches:n=xc.includeMatches,minMatchCharLength:r=xc.minMatchCharLength,ignoreLocation:o=xc.ignoreLocation,findAllMatches:i=xc.findAllMatches,location:s=xc.location,threshold:l=xc.threshold,distance:a=xc.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:o,location:s,threshold:l,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(jc).filter((t=>t&&!!t.trim())),r=[];for(let t=0,o=n.length;t<o;t+=1){const o=n[t];let i=!1,s=-1;for(;!i&&++s<Dc;){const t=Lc[s];let n=t.isMultiMatch(o);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(s=-1;++s<Dc;){const t=Lc[s];let n=t.isSingleMatch(o);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let o=0,i=[],s=0;for(let r=0,l=e.length;r<l;r+=1){const l=e[r];i.length=0,o=0;for(let e=0,r=l.length;e<r;e+=1){const r=l[e],{isMatch:a,indices:c,score:u}=r.search(t);if(!a){s=0,o=0,i.length=0;break}if(o+=1,s+=u,n){const t=r.constructor.type;qc.has(t)?i=[...i,...c]:i.push(c)}}if(o){let t={isMatch:!0,score:s/o};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const Pc=[];function Fc(t,e){for(let n=0,r=Pc.length;n<r;n+=1){let r=Pc[n];if(r.condition(t,e))return new r(t,e)}return new Ic(t,e)}const Hc="$and",Uc="$or",Gc="$path",Wc="$val",zc=t=>!(!t[Hc]&&!t[Uc]),Vc=t=>({[Hc]:Object.keys(t).map((e=>({[e]:t[e]})))});function Yc(t,e,{auto:n=!0}={}){const r=t=>{let o=Object.keys(t);const i=(t=>!!t[Gc])(t);if(!i&&o.length>1&&!zc(t))return r(Vc(t));if((t=>!cc(t)&&pc(t)&&!zc(t))(t)){const r=i?t[Gc]:o[0],s=i?t[Wc]:t[r];if(!uc(s))throw new Error((t=>`Invalid value for key ${t}`)(r));const l={keyId:bc(r),pattern:s};return n&&(l.searcher=Fc(s,e)),l}let s={children:[],operator:o[0]};return o.forEach((e=>{const n=t[e];cc(n)&&n.forEach((t=>{s.children.push(r(t))}))})),s};return zc(t)||(t=Vc(t)),r(t)}function Jc(t,e){const n=t.matches;e.matches=[],mc(n)&&n.forEach((t=>{if(!mc(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let o={indices:n,value:r};t.key&&(o.key=t.key.src),t.idx>-1&&(o.refIndex=t.idx),e.matches.push(o)}))}function Kc(t,e){e.score=t.score}class Xc{constructor(t,e={},n){this.options={...xc,...e},this.options.useExtendedSearch,this._keyStore=new _c(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Ec))throw new Error("Incorrect 'index' type");this._myIndex=e||Sc(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){mc(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:s}=this.options;let l=uc(t)?uc(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=xc.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:o})=>{const i=t?t.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(e?1:r))})),t.score=n}))}(l,{ignoreFieldNorm:s}),o&&l.sort(i),dc(e)&&e>-1&&(l=l.slice(0,e)),function(t,e,{includeMatches:n=xc.includeMatches,includeScore:r=xc.includeScore}={}){const o=[];return n&&o.push(Jc),r&&o.push(Kc),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return o.length&&o.forEach((e=>{e(t,r)})),r}))}(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=Fc(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:o})=>{if(!mc(t))return;const{isMatch:i,score:s,indices:l}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:s,value:t,norm:o,indices:l}]})})),r}_searchLogical(t){const e=Yc(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:o}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:o});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case Hc:{const o=[];for(let i=0,s=t.children.length;i<s;i+=1){const s=t.children[i],l=n(s,e,r);if(!l.length)return[];o.push(...l)}return o}case Uc:{const o=[];for(let i=0,s=t.children.length;i<s;i+=1){const s=t.children[i],l=n(s,e,r);if(l.length){o.push(...l);break}}return o}}},r=this._myIndex.records,o={},i=[];return r.forEach((({$:t,i:r})=>{if(mc(t)){let s=n(e,t,r);s.length&&(o[r]||(o[r]={idx:r,item:t,matches:[]},i.push(o[r])),s.forEach((({matches:t})=>{o[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=Fc(t,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach((({$:t,i:r})=>{if(!mc(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&o.push({idx:r,item:t,matches:i})})),o}_findMatches({key:t,value:e,searcher:n}){if(!mc(e))return[];let r=[];if(cc(e))e.forEach((({v:e,i:o,n:i})=>{if(!mc(e))return;const{isMatch:s,score:l,indices:a}=n.searchIn(e);s&&r.push({score:l,key:t,value:e,idx:o,norm:i,indices:a})}));else{const{v:o,n:i}=e,{isMatch:s,score:l,indices:a}=n.searchIn(o);s&&r.push({score:l,key:t,value:o,norm:i,indices:a})}return r}}function Qc(t,e,n){const r=t.slice();return r[7]=e[n],r}function Zc(t,e,n){const r=t.slice();return r[10]=e[n],r}function tu(e){let n;return{c(){n=h("pre"),n.textContent="..."},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function eu(t){let e,n,r=[...t[1].keys()],o=[];for(let e=0;e<r.length;e+=1)o[e]=su(Qc(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));let s=null;return r.length||(s=nu()),{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_(),s&&s.c()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),s&&s.m(t,r),n=!0},p(t,n){if(3&n){let l;for(r=[...t[1].keys()],l=0;l<r.length;l+=1){const i=Qc(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=su(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(U(),l=r.length;l<o.length;l+=1)i(l);G(),r.length?s&&(s.d(1),s=null):s||(s=nu(),s.c(),s.m(e.parentNode,e))}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e),s&&s.d(t)}}}function nu(t){let e;return{c(){e=h("em"),e.textContent="No results."},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ru(t){let e,n;return e=new At({props:{item:t[0]._flatten(t[10])}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};3&n&&(r.item=t[0]._flatten(t[10])),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ou(t){let e,n;return e=new Fn({props:{item:t[0]._flatten(t[10])}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};3&n&&(r.item=t[0]._flatten(t[10])),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function iu(t){let e,n,r,o,i,s,l,a,c=st(t[0]._flatten(t[10]))+"";const u=[ou,ru],m=[];function _(t,e){return"furniture"===t[7]?0:"item"===t[7]||"monster"===t[7]?1:-1}return~(n=_(t))&&(r=m[n]=u[n](t)),{c(){e=h("li"),r&&r.c(),o=y(),i=h("a"),s=g(c),$(i,"href",l="#/"+ot(t[10].type)+"/"+t[10].id)},m(t,r){f(t,e,r),~n&&m[n].m(e,null),d(e,o),d(e,i),d(i,s),a=!0},p(t,d){let f=n;n=_(t),n===f?~n&&m[n].p(t,d):(r&&(U(),z(m[f],1,1,(()=>{m[f]=null})),G()),~n?(r=m[n],r?r.p(t,d):(r=m[n]=u[n](t),r.c()),W(r,1),r.m(e,o)):r=null),(!a||3&d)&&c!==(c=st(t[0]._flatten(t[10]))+"")&&b(s,c),(!a||2&d&&l!==(l="#/"+ot(t[10].type)+"/"+t[10].id))&&$(i,"href",l)},i(t){a||(W(r),a=!0)},o(t){z(r),a=!1},d(t){t&&p(e),~n&&m[n].d()}}}function su(t){let e,n,r,o,i,s,l=t[7].replace(/_/g," ")+"",a=t[1].get(t[7]),c=[];for(let e=0;e<a.length;e+=1)c[e]=iu(Zc(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("h1"),n=g(l),r=y(),o=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();i=y()},m(t,l){f(t,e,l),d(e,n),f(t,r,l),f(t,o,l);for(let t=0;t<c.length;t+=1)c[t].m(o,null);d(o,i),s=!0},p(t,e){if((!s||2&e)&&l!==(l=t[7].replace(/_/g," ")+"")&&b(n,l),3&e){let n;for(a=t[1].get(t[7]),n=0;n<a.length;n+=1){const r=Zc(t,a,n);c[n]?(c[n].p(r,e),W(c[n],1)):(c[n]=iu(r),c[n].c(),W(c[n],1),c[n].m(o,i))}for(U(),n=a.length;n<c.length;n+=1)u(n);G()}},i(t){if(!s){for(let t=0;t<a.length;t+=1)W(c[t]);s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);s=!1},d(t){t&&p(e),t&&p(r),t&&p(o),m(c,t)}}}function lu(t){let e,n,r,o;const i=[eu,tu],s=[];function l(t,e){return t[1]?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function au(t,e,n){let r,o;var i;l(t,bt,(t=>n(0,o=t)));const s=new Set(["item","monster","furniture","vehicle_part","tool_quality"]);let a,{search:c}=e;return t.$$set=t=>{"search"in t&&n(2,c=t.search)},t.$$.update=()=>{9&t.$$.dirty&&(a=new Xc([...null!==n(3,i=null==o?void 0:o.all())&&void 0!==i?i:[]].filter((t=>"string"==typeof t.id&&s.has(ot(t.type)))),{keys:["id","name"],getFn:(t,e)=>{var n,r;return"id"===e[0]?null!==(r=null!==(n=t.id)&&void 0!==n?n:t.abstract)&&void 0!==r?r:"":"name"===e[0]?st(t):void 0},ignoreFieldNorm:!0,ignoreLocation:!0,minMatchCharLength:2,threshold:.2})),5&t.$$.dirty&&n(1,r=c&&c.length>1&&o&&function(t){const e=a.search(t,{limit:100}),n=new Map;for(const{item:t}of e){const e=ot(t.type);s.has(e)&&(n.has(e)||n.set(e,[]),n.get(e).push(t))}return n}(c)),4&t.$$.dirty&&history.replaceState({search:c},"")},[o,r,c,i]}Xc.version="6.4.6",Xc.createIndex=Sc,Xc.parseIndex=function(t,{getFn:e=xc.getFn}={}){const{keys:n,records:r}=t,o=new Ec({getFn:e});return o.setKeys(n),o.setIndexRecords(r),o},Xc.config=xc,Xc.parseQuery=Yc,function(...t){Pc.push(...t)}(Bc);class cu extends tt{constructor(t){super(),Z(this,t,au,lu,i,{search:2})}}function uu(t,e,n){const r=t.slice();return r[7]=e[n],r}function du(t){let e,n;return e=new It({props:{type:t[0],id:t[10].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.type=t[0]),1024&n&&(r.id=t[10].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function fu(e){let n,r,o,i,s,l=e[7]&&function(e){let n,r,o=e[7]+"";return{c(){n=h("h1"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}(e);return o=new Ft({props:{items:e[1].get(e[7]),limit:1===e[2].length?1/0:10,$$slots:{default:[du,({item:t})=>({10:t}),({item:t})=>t?1024:0]},$$scope:{ctx:e}}}),{c(){n=h("section"),l&&l.c(),r=y(),J(o.$$.fragment),i=y()},m(t,e){f(t,n,e),l&&l.m(n,null),d(n,r),K(o,n,null),d(n,i),s=!0},p(t,e){t[7]&&l.p(t,e);const n={};3073&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){s||(W(o.$$.fragment,t),s=!0)},o(t){z(o.$$.fragment,t),s=!1},d(t){t&&p(n),l&&l.d(),X(o)}}}function pu(t){let e,n,r,o,i,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=fu(uu(t,s,e));const a=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("h1"),n=g(t[0]),r=y();for(let t=0;t<l.length;t+=1)l[t].c();o=_()},m(t,s){f(t,e,s),d(e,n),f(t,r,s);for(let e=0;e<l.length;e+=1)l[e].m(t,s);f(t,o,s),i=!0},p(t,[e]){if((!i||1&e)&&b(n,t[0]),1031&e){let n;for(s=t[2],n=0;n<s.length;n+=1){const r=uu(t,s,n);l[n]?(l[n].p(r,e),W(l[n],1)):(l[n]=fu(r),l[n].c(),W(l[n],1),l[n].m(o.parentNode,o))}for(U(),n=s.length;n<l.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);i=!1},d(t){t&&p(e),t&&p(r),m(l,t),t&&p(o)}}}function mu(t,e,n){var r;let{type:o}=e,{data:i}=e;k("data",i);const s=i.byType(o).filter((t=>t.id));s.sort(((t,e)=>st(t).localeCompare(st(e))));const l=function(t,e){const n=new Map;for(const r of t){const t=e(r);n.has(t)||n.set(t,[]),n.get(t).push(r)}return n}(s,null!==(r={monster:t=>{var e;return null!==(e=t.default_faction)&&void 0!==e?e:""},item:t=>t.type,vehicle_part:t=>{var e,n;return null!==(n=(null!==(e=t.categories)&&void 0!==e?e:[])[0])&&void 0!==n?n:""}}[o])&&void 0!==r?r:()=>""),a=[...l.keys()].sort();return t.$$set=t=>{"type"in t&&n(0,o=t.type),"data"in t&&n(3,i=t.data)},[o,l,a,i]}class hu extends tt{constructor(t){super(),Z(this,t,mu,pu,i,{type:0,data:3})}}const{window:gu}=V;function yu(t,e,n){const r=t.slice();return r[14]=e[n],r[16]=n,r}function _u(t,e,n){const r=t.slice();return r[14]=e[n],r}function vu(e){let n,r,o,i,s,l,a,c,u,m,_,v,b,x,E,S=e[3]&&xu(e);return{c(){n=h("img"),o=y(),i=h("p"),i.innerHTML='The <strong>Hitchhiker&#39;s Guide to the Cataclysm</strong> is a guide to the\n      zombie survival roguelike game\n      <a href="https://cataclysmdda.org/">Cataclysm: Dark Days Ahead</a>. You\n      can search for things in the game, like items (e.g. a\n      <a href="#/item/flashlight">flashlight</a>), furniture (e.g. a\n      <a href="#/furniture/f_table">table</a>), or monsters (e.g. a\n      <a href="#/monster/mon_zombie">zombie</a>), and find useful information\n      about them. The data in the Guide comes directly from the JSON files in\n      the game itself.',s=y(),l=h("p"),a=g("The Guide stores all its data locally and is offline-capable, so you can\n      take it with you whereever you go. There's nothing to do to make the Guide\n      work offline, just visit the page and it will work even without internet\n      access, as long as you've visited it once before.\n      "),S&&S.c(),c=y(),u=h("p"),u.textContent="More popular than the Celestial Home Care Omnibus, better selling than\n      Fifty-three More Things to do in Zero Gravity, and more controversial than\n      Oolon Colluphid's trilogy of philosophical blockbusters Where God Went\n      Wrong, Some More of God's Greatest Mistakes and Who is this God Person\n      Anyway?",m=y(),_=h("p"),_.innerHTML='The guide is developed on <a href="https://github.com/nornagon/cdda-guide">GitHub</a>\n      by <a href="https://www.nornagon.net">nornagon</a>. If you notice any\n      problems, please\n      <a href="https://github.com/nornagon/cdda-guide/issues">file an issue</a>!',v=y(),b=h("h2"),b.textContent="Catalogs",x=y(),E=h("ul"),E.innerHTML='<li><a href="#/item">Items</a></li> \n      <li><a href="#/monster">Monsters</a></li> \n      <li><a href="#/furniture">Furniture</a></li> \n      <li><a href="#/vehicle_part">Vehicle Parts</a></li> \n      <li><a href="#/tool_quality">Qualities</a></li> \n      <li><a href="#/json_flag">Flags</a></li>',n.src!==(r="dont_panic.png")&&$(n,"src","dont_panic.png"),$(n,"height","200"),$(n,"width","343"),w(n,"float","right"),$(n,"alt","The words 'Don't Panic' in big friendly letters"),w(u,"font-style","italic"),w(u,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e),f(t,o,e),f(t,i,e),f(t,s,e),f(t,l,e),d(l,a),S&&S.m(l,null),f(t,c,e),f(t,u,e),f(t,m,e),f(t,_,e),f(t,v,e),f(t,b,e),f(t,x,e),f(t,E,e)},p(t,e){t[3]?S?S.p(t,e):(S=xu(t),S.c(),S.m(l,null)):S&&(S.d(1),S=null)},i:t,o:t,d(t){t&&p(n),t&&p(o),t&&p(i),t&&p(s),t&&p(l),S&&S.d(),t&&p(c),t&&p(u),t&&p(m),t&&p(_),t&&p(v),t&&p(b),t&&p(x),t&&p(E)}}}function $u(e){let n,r,o=e[2],s=wu(e);return{c(){s.c(),n=_()},m(t,e){s.m(t,e),f(t,n,e),r=!0},p(e,r){4&r&&i(o,o=e[2])?(U(),z(s,1,1,t),G(),s=wu(e),s.c(),W(s),s.m(n.parentNode,n)):s.p(e,r)},i(t){r||(W(s),r=!0)},o(t){z(s),r=!1},d(t){t&&p(n),s.d(t)}}}function bu(t){let e,n,r,o;const i=[Su,Eu],s=[];function l(t,e){return t[4]?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function xu(e){let n,r,o,i,s;return{c(){n=g("It's also "),r=h("button"),r.textContent="installable",o=g(", so you can pop it out of your browser and use it like a regular app."),$(r,"class","disclosure")},m(t,l){f(t,n,l),f(t,r,l),f(t,o,l),i||(s=v(r,"click",e[10]),i=!0)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),i=!1,s()}}}function wu(t){let e,n;return e=new cu({props:{search:t[2]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.search=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Eu(e){let n;return{c(){n=h("em"),n.textContent="Loading...",w(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Su(e){let n,r,o=e[0],s=ku(e);return{c(){s.c(),n=_()},m(t,e){s.m(t,e),f(t,n,e),r=!0},p(e,r){1&r&&i(o,o=e[0])?(U(),z(s,1,1,t),G(),s=ku(e),s.c(),W(s),s.m(n.parentNode,n)):s.p(e,r)},i(t){r||(W(s),r=!0)},o(t){z(s),r=!1},d(t){t&&p(n),s.d(t)}}}function Cu(t){let e,n;return e=new hu({props:{type:t[0].type,data:t[4]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.type=t[0].type),16&n&&(r.data=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Tu(t){let e,n;return e=new ac({props:{item:t[0],data:t[4]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[0]),16&n&&(r.data=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ku(t){let e,n,r,o;const i=[Tu,Cu],s=[];function l(t,e){return t[0].id?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=_()},m(t,n){s[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=l(t),e===a?s[e].p(t,o):(U(),z(s[a],1,1,(()=>{s[a]=null})),G(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){s[e].d(t),t&&p(r)}}}function Ou(e){let n;return{c(){n=h("em"),n.textContent="(loading...)",w(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Iu(t){let e;function n(t,e){return t[1]?Mu:t[4]?Ru:void 0}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=_()},m(t,n){o&&o.m(t,n),f(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o&&o.d(1),o=r&&r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o&&o.d(t),t&&p(e)}}}function Ru(t){let e,n,r,o,i=t[4].build_number+"";return{c(){e=h("select"),n=h("option"),r=g(i),n.__value=o=t[4].build_number,n.value=n.__value,e.disabled=!0},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){16&e&&i!==(i=t[4].build_number+"")&&b(r,i),18&e&&o!==(o=t[4].build_number)&&(n.__value=o,n.value=n.__value)},d(t){t&&p(e)}}}function Mu(t){let e,n,r,o,i,s,l=t[1].filter(ju),a=[];for(let e=0;e<l.length;e+=1)a[e]=Au(_u(t,l,e));let c=t[1].filter(qu),u=[];for(let e=0;e<c.length;e+=1)u[e]=Nu(yu(t,c,e));return{c(){e=h("select"),n=h("optgroup");for(let t=0;t<a.length;t+=1)a[t].c();r=h("optgroup");for(let t=0;t<u.length;t+=1)u[t].c();$(n,"label","Stable"),$(r,"label","Experimental")},m(o,l){f(o,e,l),d(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);d(e,r);for(let t=0;t<u.length;t+=1)u[t].m(r,null);E(e,t[4]?.build_number??("latest"===t[5]?t[1][0].build_number:t[5])),i||(s=v(e,"change",t[11]),i=!0)},p(t,i){if(2&i){let e;for(l=t[1].filter(ju),e=0;e<l.length;e+=1){const r=_u(t,l,e);a[e]?a[e].p(r,i):(a[e]=Au(r),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=l.length}if(2&i){let e;for(c=t[1].filter(qu),e=0;e<c.length;e+=1){const n=yu(t,c,e);u[e]?u[e].p(n,i):(u[e]=Nu(n),u[e].c(),u[e].m(r,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}18&i&&o!==(o=t[4]?.build_number??("latest"===t[5]?t[1][0].build_number:t[5]))&&E(e,t[4]?.build_number??("latest"===t[5]?t[1][0].build_number:t[5]))},d(t){t&&p(e),m(a,t),m(u,t),i=!1,s()}}}function Au(t){let e,n,r,o=t[14].build_number+"";return{c(){e=h("option"),n=g(o),e.__value=r=t[14].build_number,e.value=e.__value},m(t,r){f(t,e,r),d(e,n)},p(t,i){2&i&&o!==(o=t[14].build_number+"")&&b(n,o),2&i&&r!==(r=t[14].build_number)&&(e.__value=r,e.value=e.__value)},d(t){t&&p(e)}}}function Nu(t){let e,n,r,o=t[14].build_number+"",i=0===t[16]&&function(t){let e;return{c(){e=g(" (latest)")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){e=h("option"),n=g(o),i&&i.c(),e.__value=r=t[14].build_number,e.value=e.__value},m(t,r){f(t,e,r),d(e,n),i&&i.m(e,null)},p(t,i){2&i&&o!==(o=t[14].build_number+"")&&b(n,o),2&i&&r!==(r=t[14].build_number)&&(e.__value=r,e.value=e.__value)},d(t){t&&p(e),i&&i.d()}}}function Lu(t){let e,n,o,i,s,l,a,c,u,m,_,b,E,S,C,T,k,O;const I=[bu,$u,vu],R=[];function M(t,e){return t[0]?0:t[2]?1:2}function A(t,e){return t[4]||t[1]?Iu:Ou}_=M(t),b=R[_]=I[_](t);let N=A(t),L=N(t);return{c(){e=h("header"),n=h("nav"),o=h("div"),i=h("strong"),s=h("a"),s.textContent="Hitchhiker's Guide to the Cataclysm",l=y(),a=h("div"),c=h("input"),u=y(),m=h("main"),b.c(),E=y(),S=h("p"),C=g("Build:\n    "),L.c(),$(s,"href","#"),$(o,"class","title svelte-1i69dj"),w(c,"margin","0"),w(c,"width","100%"),$(c,"placeholder","Search..."),$(c,"id","search"),$(a,"class","search svelte-1i69dj"),$(n,"class","svelte-1i69dj"),$(e,"class","svelte-1i69dj"),$(m,"class","svelte-1i69dj")},m(r,p){f(r,e,p),d(e,n),d(n,o),d(o,i),d(i,s),d(n,l),d(n,a),d(a,c),x(c,t[2]),f(r,u,p),f(r,m,p),R[_].m(m,null),d(m,E),d(m,S),d(S,C),L.m(S,null),T=!0,k||(O=[v(gu,"hashchange",t[6]),v(gu,"keydown",Du),v(s,"click",t[8]),v(c,"input",t[9]),v(c,"input",t[7])],k=!0)},p(t,[e]){4&e&&c.value!==t[2]&&x(c,t[2]);let n=_;_=M(t),_===n?R[_].p(t,e):(U(),z(R[n],1,1,(()=>{R[n]=null})),G(),b=R[_],b?b.p(t,e):(b=R[_]=I[_](t),b.c()),W(b,1),b.m(m,E)),N===(N=A(t))&&L?L.p(t,e):(L.d(1),L=N(t),L&&(L.c(),L.m(S,null)))},i(t){T||(W(b),T=!0)},o(t){z(b),T=!1},d(t){t&&p(e),t&&p(u),t&&p(m),R[_].d(),L.d(),k=!1,r(O)}}}function Du(t){"/"===t.key&&"search"!==document.activeElement.id&&(document.getElementById("search").focus(),t.preventDefault())}const ju=t=>!t.prerelease,qu=t=>t.prerelease;function Bu(t,e,n){let r;var o;l(t,bt,(t=>n(4,r=t)));let i=null,s=null;fetch("https://raw.githubusercontent.com/nornagon/cdda-data/main/builds.json").then((t=>t.json())).then((t=>{n(1,s=t)}));const a=null!==(o=new URL(location.href).searchParams.get("v"))&&void 0!==o?o:"latest";function c(){const t=window.location.hash.slice(1);let e;if(e=/^\/([^\/]+)(?:\/(.+))?$/.exec(t)){const[,t,r]=e;"search"===t?(n(0,i=null),n(2,d=decodeURIComponent(null!=r?r:""))):n(0,i=r?{type:t,id:decodeURIComponent(r)}:{type:t,id:""}),window.scrollTo(0,0)}else n(0,i=null),n(2,d="")}var u;bt.setVersion(a),u=c,T().$$.on_mount.push(u);let d="";let f;window.addEventListener("beforeinstallprompt",(t=>{n(3,f=t)}));return[i,s,d,f,r,a,c,()=>{i?history.pushState(null,"",location.href.replace(/#.*$/,"")):history.replaceState(null,"",function(t){const e=new URL(location.href);return e.hash=t,e.toString()}("/search/"+d)),n(0,i=null)},()=>n(2,d=""),function(){d=this.value,n(2,d)},t=>{t.preventDefault(),f.prompt()},t=>{const e=new URL(location.href),n=t.currentTarget.value;n===s[0].build_number?e.searchParams.delete("v"):e.searchParams.set("v",n),location.href=e.toString()}]}class Pu extends tt{constructor(t){super(),Z(this,t,Bu,Lu,i,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Fu=function(t,e){return(Fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Hu(t,e){function n(){this.constructor=t}Fu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Uu,Gu,Wu,zu,Vu,Yu=function(){return(Yu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Ju(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ku(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Xu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ku(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function Qu(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Zu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qu(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */!function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(Uu||(Uu={})),function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"}(Gu||(Gu={})),function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(Wu||(Wu={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(Wu||(Wu={})),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(zu||(zu={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(zu||(zu={})),function(t){t.Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"}(Vu||(Vu={}));var td=function(){return(td=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function ed(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function nd(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ed(arguments[e]));return t}function rd(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return fd(t,Error)}}function od(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function id(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function sd(t){return"[object String]"===Object.prototype.toString.call(t)}function ld(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function ad(t){return"[object Object]"===Object.prototype.toString.call(t)}function cd(t){return"undefined"!=typeof Event&&fd(t,Event)}function ud(t){return"undefined"!=typeof Element&&fd(t,Element)}function dd(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function fd(t,e){try{return t instanceof e}catch(t){return!1}}function pd(t,e){try{for(var n=t,r=[],o=0,i=0,s=" > ".length,l=void 0;n&&o++<5&&!("html"===(l=md(n,e))||o>1&&i+r.length*s+l.length>=80);)r.push(l),i+=l.length,n=n.parentNode;return r.reverse().join(" > ")}catch(t){return"<unknown>"}}function md(t,e){var n,r,o,i,s,l,a,c=t,u=[];if(!c||!c.tagName)return"";u.push(c.tagName.toLowerCase());var d=(null===(n=e)||void 0===n?void 0:n.length)?e.filter((function(t){return c.getAttribute(t)})).map((function(t){return[t,c.getAttribute(t)]})):null;if(null===(r=d)||void 0===r?void 0:r.length)d.forEach((function(t){u.push("["+t[0]+'="'+t[1]+'"]')}));else if(c.id&&u.push("#"+c.id),(o=c.className)&&sd(o))for(i=o.split(/\s+/),a=0;a<i.length;a++)u.push("."+i[a]);var f=["type","name","title","alt"];for(a=0;a<f.length;a++)s=f[a],(l=c.getAttribute(s))&&u.push("["+s+'="'+l+'"]');return u.join("")}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var hd=function(t,e){return(hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var gd=function(){return(gd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function yd(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var _d=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var vd=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,_d(r,n.prototype),r}return function(t,e){function n(){this.constructor=t}hd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),$d=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,bd="Invalid Dsn",xd=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.host,r=e.path,o=e.pass,i=e.port,s=e.projectId;return e.protocol+"://"+e.publicKey+(t&&o?":"+o:"")+"@"+n+(i?":"+i:"")+"/"+(r?r+"/":r)+s},t.prototype._fromString=function(t){var e=$d.exec(t);if(!e)throw new vd(bd);var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e.slice(1),6),r=n[0],o=n[1],i=n[2],s=void 0===i?"":i,l=n[3],a=n[4],c=void 0===a?"":a,u="",d=n[5],f=d.split("/");if(f.length>1&&(u=f.slice(0,-1).join("/"),d=f.pop()),d){var p=d.match(/^\d+/);p&&(d=p[0])}this._fromComponents({host:l,pass:s,path:u,projectId:d,port:c,protocol:r,publicKey:o})},t.prototype._fromComponents=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new vd("Invalid Dsn: "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new vd("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new vd("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new vd("Invalid Dsn: Invalid port "+this.port)},t}();function wd(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Ed(t,e){return t.require(e)}function Sd(t){var e;try{e=Ed(module,t)}catch(t){}try{var n=Ed(module,"process").cwd;e=Ed(module,n()+"/node_modules/"+t)}catch(t){}return e}function Cd(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function Td(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function kd(t,e){return!!sd(t)&&(n=e,"[object RegExp]"===Object.prototype.toString.call(n)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e));var n}var Od={};function Id(){return wd()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:Od}function Rd(){var t=Id(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function Md(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function Ad(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function Nd(t){var e=Id();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var o=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),o}function Ld(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function Dd(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}var jd=Id(),qd="Sentry Logger ",Bd=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Nd((function(){jd.console.log(qd+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Nd((function(){jd.console.warn(qd+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Nd((function(){jd.console.error(qd+"[Error]: "+t.join(" "))}))},t}();jd.__SENTRY__=jd.__SENTRY__||{};var Pd=jd.__SENTRY__.logger||(jd.__SENTRY__.logger=new Bd),Fd=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}(),Hd="<anonymous>";function Ud(t){try{return t&&"function"==typeof t&&t.name||Hd}catch(t){return Hd}}function Gd(t,e,n){if(e in t){var r=t[e],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=o}}function Wd(t){if(rd(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(cd(t)){var o=t,i={};i.type=o.type;try{i.target=ud(o.target)?pd(o.target):Object.prototype.toString.call(o.target)}catch(t){i.target="<unknown>"}try{i.currentTarget=ud(o.currentTarget)?pd(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(t){i.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&fd(t,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o);return i}return t}function zd(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function Vd(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=Kd(t,e);return zd(r)>n?Vd(t,e-1,n):r}function Yd(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":ad(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+Ud(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var n}function Jd(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new Fd),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=Yd(t);return ld(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var o=Yd(e,t);if(ld(o))return o;var i=Wd(e),s=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=Jd(l,i[l],n-1,r));return r.unmemoize(e),s}function Kd(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return Jd(t,n,e)})))}catch(t){return"**non-serializable**"}}function Xd(t,e){void 0===e&&(e=40);var n=Object.keys(Wd(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Cd(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:Cd(o,e)}return""}function Qd(t){var e,n;if(ad(t)){var r=t,o={};try{for(var i=yd(Object.keys(r)),s=i.next();!s.done;s=i.next()){var l=s.value;void 0!==r[l]&&(o[l]=Qd(r[l]))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o}return Array.isArray(t)?t.map(Qd):t}function Zd(){if(!("fetch"in Id()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function tf(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ef(){if(!Zd())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var nf,rf=Id(),of={},sf={};function lf(t){if(!sf[t])switch(sf[t]=!0,t){case"console":!function(){if(!("console"in rf))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in rf.console&&Gd(rf.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];cf("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,rf.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in rf))return;var t=cf.bind(null,"dom"),e=mf(t,!0);rf.document.addEventListener("click",e,!1),rf.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var n=rf[e]&&rf[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Gd(n,"addEventListener",(function(e){return function(n,r,o){if("click"===n||"keypress"==n)try{var i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},l=s[n]=s[n]||{refCount:0};if(!l.handler){var a=mf(t);l.handler=a,e.call(this,n,a,o)}l.refCount+=1}catch(t){}return e.call(this,n,r,o)}})),Gd(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var o=this,i=o.__sentry_instrumentation_handlers__||{},s=i[e];s&&(s.refCount-=1,s.refCount<=0&&(t.call(this,e,s.handler,r),s.handler=void 0,delete i[e]),0===Object.keys(i).length&&delete o.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in rf))return;var t=[],e=[],n=XMLHttpRequest.prototype;Gd(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=this,s=r[1];i.__sentry_xhr__={method:sd(r[0])?r[0].toUpperCase():r[0],url:r[1]},sd(s)&&"POST"===i.__sentry_xhr__.method&&s.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var l=function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(t){}try{var n=t.indexOf(i);if(-1!==n){t.splice(n);var o=e.splice(n)[0];i.__sentry_xhr__&&void 0!==o[0]&&(i.__sentry_xhr__.body=o[0])}}catch(t){}cf("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?Gd(i,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l(),t.apply(i,e)}})):i.addEventListener("readystatechange",l),n.apply(i,r)}})),Gd(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.push(this),e.push(r),cf("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!Zd())return!1;var t=Id();if(tf(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=tf(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){Pd.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;Gd(rf,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:uf(e),url:df(e)},startTimestamp:Date.now()};return cf("fetch",gd({},r)),t.apply(rf,e).then((function(t){return cf("fetch",gd(gd({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw cf("fetch",gd(gd({},r),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=Id(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}())return;var t=rf.onpopstate;function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var o=nf,i=String(r);nf=i,cf("history",{from:o,to:i})}return t.apply(this,e)}}rf.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rf.location.href,o=nf;if(nf=r,cf("history",{from:o,to:r}),t)try{return t.apply(this,e)}catch(t){}},Gd(rf.history,"pushState",e),Gd(rf.history,"replaceState",e)}();break;case"error":hf=rf.onerror,rf.onerror=function(t,e,n,r,o){return cf("error",{column:r,error:o,line:n,msg:t,url:e}),!!hf&&hf.apply(this,arguments)};break;case"unhandledrejection":yf=rf.onunhandledrejection,rf.onunhandledrejection=function(t){return cf("unhandledrejection",t),!yf||yf.apply(this,arguments)};break;default:Pd.warn("unknown instrumentation type:",t)}}function af(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(of[t.type]=of[t.type]||[],of[t.type].push(t.callback),lf(t.type))}function cf(t,e){var n,r;if(t&&of[t])try{for(var o=yd(of[t]||[]),i=o.next();!i.done;i=o.next()){var s=i.value;try{s(e)}catch(e){Pd.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+Ud(s)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function uf(t){return void 0===t&&(t=[]),"Request"in rf&&fd(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function df(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in rf&&fd(t[0],Request)?t[0].url:String(t[0])}var ff,pf;function mf(t,e){return void 0===e&&(e=!1),function(n){if(n&&pf!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===ff||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(pf,n))&&(t({event:n,name:r,global:e}),pf=n),clearTimeout(ff),ff=rf.setTimeout((function(){ff=void 0}),1e3)}}}var hf=null;var gf,yf=null;!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(gf||(gf={}));var _f=function(){function t(t){var e=this;this._state=gf.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(gf.RESOLVED,t)},this._reject=function(t){e._setResult(gf.REJECTED,t)},this._setResult=function(t,n){e._state===gf.PENDING&&(dd(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==gf.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===gf.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===gf.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var o=e.length,i=[];e.forEach((function(e,s){t.resolve(e).then((function(t){i[s]=t,0===(o-=1)&&n(i)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void o(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void o(t)}else o(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var o,i;return n.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):t(o)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),vf=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;if(!this.isReady())return _f.reject(new vd("Not adding Promise due to buffer limit reached."));var n=t();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return e.remove(n)})).then(null,(function(){return e.remove(n).then(null,(function(){}))})),n},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new _f((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);_f.all(e._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}(),$f={nowSeconds:function(){return Date.now()/1e3}};var bf=wd()?function(){try{return Ed(module,"perf_hooks").performance}catch(t){return}}():function(){var t=Id().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),xf=void 0===bf?$f:{nowSeconds:function(){return(bf.timeOrigin+bf.now())/1e3}},wf=$f.nowSeconds.bind($f),Ef=xf.nowSeconds.bind(xf),Sf=Ef,Cf=function(){var t=Id().performance;if(t&&t.now){var e=36e5,n=t.now(),r=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=o<e,s=t.timing&&t.timing.navigationStart,l="number"==typeof s?Math.abs(s+n-r):e;return i||l<e?o<=l?t.timeOrigin:s:r}}(),Tf=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=nd(e._breadcrumbs),n._tags=td({},e._tags),n._extra=td({},e._extra),n._contexts=td({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=nd(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(t){return this._requestSession=t,this},t.prototype.setTags=function(t){return this._tags=td(td({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=td(td({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=td(td({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=td(td({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=td(td({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,e,n,r,o=this.getSpan();return(null===(t=o)||void 0===t?void 0:t.transaction)?null===(e=o)||void 0===e?void 0:e.transaction:(null===(r=null===(n=o)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?o.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=td(td({},this._tags),e._tags),this._extra=td(td({},this._extra),e._extra),this._contexts=td(td({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):ad(e)&&(e=e,this._tags=td(td({},this._tags),e.tags),this._extra=td(td({},this._extra),e.extra),this._contexts=td(td({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n="number"==typeof e?Math.min(e,100):100;if(n<=0)return this;var r=td({timestamp:wf()},t);return this._breadcrumbs=nd(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){var n;if(this._extra&&Object.keys(this._extra).length&&(t.extra=td(td({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=td(td({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=td(td({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=td(td({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=td({trace:this._span.getTraceContext()},t.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(t.tags=td({transaction:r},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=nd(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(nd(kf(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,n,r){var o=this;return void 0===r&&(r=0),new _f((function(i,s){var l=t[r];if(null===e||"function"!=typeof l)i(e);else{var a=l(td({},e),n);dd(a)?a.then((function(e){return o._notifyEventProcessors(t,e,n,r+1).then(i)})).then(null,s):o._notifyEventProcessors(t,a,n,r+1).then(i).then(null,s)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function kf(){var t=Id();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Of(t){kf().push(t)}var If=function(){function t(t){this.errors=0,this.sid=Rd(),this.duration=0,this.status=Uu.Ok,this.init=!0,this.ignoreDuration=!1;var e=Ef();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Ef(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:Rd()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===Uu.Ok?this.update({status:Uu.Exited}):this.update()},t.prototype.toJSON=function(){return Qd({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Qd({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),Rf=function(){function t(t,e,n){void 0===e&&(e=new Tf),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=Tf.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=Rd(),r=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t}r={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,td(td({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=Rd(),o=n;if(!n){var i=void 0;try{throw new Error(t)}catch(t){i=t}o={originalException:t,syntheticException:i}}return this._invokeClient("captureMessage",t,e,td(td({},o),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=Rd();return this._invokeClient("captureEvent",t,td(td({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},s=i.beforeBreadcrumb,l=void 0===s?null:s,a=i.maxBreadcrumbs,c=void 0===a?100:a;if(!(c<=0)){var u=wf(),d=td({timestamp:u},t),f=l?Nd((function(){return l(d,e)})):d;null!==f&&r.addBreadcrumb(f,c)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=Af(this);try{t(this)}finally{Af(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return Pd.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t,e,n,r,o;null===(n=null===(e=null===(t=this.getStackTop())||void 0===t?void 0:t.scope)||void 0===e?void 0:e.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(o=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===o||o.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,r=e.client,o=r&&r.getOptions()||{},i=o.release,s=o.environment,l=(Id().navigator||{}).userAgent,a=new If(td(td(td({release:i,environment:s},n&&{user:n.getUser()}),l&&{userAgent:l}),t));if(n){var c=n.getSession&&n.getSession();c&&c.status===Uu.Ok&&c.update({status:Uu.Exited}),this.endSession(),n.setSession(a)}return a},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),i=o.scope,s=o.client;s&&s[t]&&(e=s)[t].apply(e,nd(n,[i]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Mf(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);Pd.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function Mf(){var t=Id();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Af(t){var e=Mf(),n=Df(e);return jf(e,t),n}function Nf(){var t=Mf();return Lf(t)&&!Df(t).isOlderThan(4)||jf(t,new Rf),wd()?function(t){var e,n,r;try{var o=null===(r=null===(n=null===(e=Mf().__SENTRY__)||void 0===e?void 0:e.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!o)return Df(t);if(!Lf(o)||Df(o).isOlderThan(4)){var i=Df(t).getStackTop();jf(o,new Rf(i.client,Tf.clone(i.scope)))}return Df(o)}catch(e){return Df(t)}}(t):Df(t)}function Lf(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Df(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Rf),t.__SENTRY__.hub}function jf(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function qf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Nf();if(r&&r[t])return r[t].apply(r,Zu(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function Bf(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return qf("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function Pf(t){qf("withScope",t)}var Ff=function(){function t(t,e,n){void 0===e&&(e={}),this.dsn=t,this._dsnObject=new xd(t),this.metadata=e,this._tunnel=n}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var t=this.getDsn(),e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this.getDsn();return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var o in r.push("dsn="+e.toString()),t)if("dsn"!==o)if("user"===o){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r.length?n+"?"+r.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t,e={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},t}(),Hf=function(){return(Hf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Uf(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Gf(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Uf(arguments[e]));return t}var Wf=[];function zf(t){return t.reduce((function(t,e){return t.every((function(t){return e.name!==t.name}))&&t.push(e),t}),[])}function Vf(t){var e={};return function(t){var e=t.defaultIntegrations&&Gf(t.defaultIntegrations)||[],n=t.integrations,r=Gf(zf(e));Array.isArray(n)?r=Gf(r.filter((function(t){return n.every((function(e){return e.name!==t.name}))})),zf(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map((function(t){return t.name})),i="Debug";return-1!==o.indexOf(i)&&r.push.apply(r,Gf(r.splice(o.indexOf(i),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===Wf.indexOf(t.name)&&(t.setupOnce(Of,Nf),Wf.push(t.name),Pd.log("Integration installed: "+t.name))}(t)})),e}var Yf=function(){function t(t,e){this._integrations={},this._numProcessing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new xd(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,o=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return r._captureEvent(t,e,n)})).then((function(t){o=t}))),o},t.prototype.captureMessage=function(t,e,n,r){var o=this,i=n&&n.event_id,s=ld(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(s.then((function(t){return o._captureEvent(t,n,r)})).then((function(t){i=t}))),i},t.prototype.captureEvent=function(t,e,n){var r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((function(t){r=t}))),r},t.prototype.captureSession=function(t){this._isEnabled()?"string"!=typeof t.release?Pd.warn("Discarded session because of missing or non-string release"):(this._sendSession(t),t.update({init:!1})):Pd.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientDoneProcessing(t).then((function(n){return e._getBackend().getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=Vf(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return Pd.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var n,r,o=!1,i=!1,s=e.exception&&e.exception.values;if(s){i=!0;try{for(var l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),a=l.next();!a.done;a=l.next()){var c=a.value.mechanism;if(c&&!1===c.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}var u=t.status===Uu.Ok;(u&&0===t.errors||u&&o)&&(t.update(Hf(Hf({},o&&{status:Uu.Crashed}),{errors:t.errors||Number(i||o)})),this.captureSession(t))},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientDoneProcessing=function(t){var e=this;return new _f((function(n){var r=0,o=setInterval((function(){0==e._numProcessing?(clearInterval(o),n(!0)):(r+=1,t&&r>=t&&(clearInterval(o),n(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,o=this.getOptions().normalizeDepth,i=void 0===o?3:o,s=Hf(Hf({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:Rd()),timestamp:t.timestamp||wf()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var l=e;n&&n.captureContext&&(l=Tf.clone(l).update(n.captureContext));var a=_f.resolve(s);return l&&(a=l.applyToEvent(s,n)),a.then((function(t){return"number"==typeof i&&i>0?r._normalizeEvent(t,i):t}))},t.prototype._normalizeEvent=function(t,e){if(!t)return null;var n=Hf(Hf(Hf(Hf(Hf({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return Hf(Hf({},t),t.data&&{data:Kd(t.data,e)})}))}),t.user&&{user:Kd(t.user,e)}),t.contexts&&{contexts:Kd(t.contexts,e)}),t.extra&&{extra:Kd(t.extra,e)});t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace);var r=this.getOptions()._experiments;return(void 0===r?{}:r).ensureNoCircularStructures?Kd(n):n},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,r=e.release,o=e.dist,i=e.maxValueLength,s=void 0===i?250:i;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=Cd(t.message,s));var l=t.exception&&t.exception.values&&t.exception.values[0];l&&l.value&&(l.value=Cd(l.value,s));var a=t.request;a&&a.url&&(a.url=Cd(a.url,s))},t.prototype._applyIntegrationsMetadata=function(t){var e=Object.keys(this._integrations);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=Gf(t.sdk.integrations||[],e))},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then((function(t){return t.event_id}),(function(t){Pd.error(t)}))},t.prototype._processEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.beforeSend,s=o.sampleRate;if(!this._isEnabled())return _f.reject(new vd("SDK not enabled, will not capture event."));var l="transaction"===t.type;return!l&&"number"==typeof s&&Math.random()>s?_f.reject(new vd("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(t,n,e).then((function(t){if(null===t)throw new vd("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||l||!i)return t;var n=i(t,e);return r._ensureBeforeSendRv(n)})).then((function(t){if(null===t)throw new vd("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!l&&e&&r._updateSessionFromEvent(e,t),r._sendEvent(t),t})).then(null,(function(t){if(t instanceof vd)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new vd("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._numProcessing+=1,t.then((function(t){return e._numProcessing-=1,t}),(function(t){return e._numProcessing-=1,t}))},t.prototype._ensureBeforeSendRv=function(t){var e="`beforeSend` method has to return `null` or a valid event.";if(dd(t))return t.then((function(t){if(!ad(t)&&null!==t)throw new vd(e);return t}),(function(t){throw new vd("beforeSend rejected with "+t)}));if(!ad(t)&&null!==t)throw new vd(e);return t},t}(),Jf=function(){function t(){}return t.prototype.sendEvent=function(t){return _f.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:zu.Skipped})},t.prototype.close=function(t){return _f.resolve(!0)},t}(),Kf=function(){function t(t){this._options=t,this._options.dsn||Pd.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new vd("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new vd("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){Pd.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,(function(t){Pd.error("Error while sending session: "+t)})):Pd.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new Jf},t}();function Xf(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function Qf(t,e){return e?(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=Gf(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=Gf(t.sdk.packages||[],e.packages||[]),t):t}function Zf(t,e){var n=Xf(e),r="aggregates"in t?"sessions":"session";return{body:JSON.stringify(Hf(Hf({sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(t),type:r,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function tp(t,e){var n=Xf(e),r=t.type||"event",o="transaction"===r||e.forceEnvelope(),i=t.debug_meta||{},s=i.transactionSampling,l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(i,["transactionSampling"]),a=s||{},c=a.method,u=a.rate;0===Object.keys(l).length?delete t.debug_meta:t.debug_meta=l;var d={body:JSON.stringify(n?Qf(t,e.metadata.sdk):t),type:r,url:o?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(o){var f=JSON.stringify(Hf(Hf({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:c,rate:u}]})+"\n"+d.body;d.body=f}return d}var ep,np="6.10.0",rp=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){ep=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return ep.apply(n,t)}},t.id="FunctionToString",t}(),op=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ip=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Of((function(e){var n=Nf();if(!n)return e;var r=n.getIntegration(t);if(r){var o=n.getClient(),i=o?o.getOptions():{},s="function"==typeof r._mergeOptions?r._mergeOptions(i):{};return"function"!=typeof r._shouldDropEvent?e:r._shouldDropEvent(e,s)?null:e}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(Pd.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Ad(t)),!0):this._isIgnoredError(t,e)?(Pd.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Ad(t)),!0):this._isDeniedUrl(t,e)?(Pd.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Ad(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(Pd.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Ad(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return kd(t,e)}))}))},t.prototype._isDeniedUrl=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.denyUrls.some((function(t){return kd(n,t)}))},t.prototype._isAllowedUrl=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.allowUrls.some((function(t){return kd(n,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:Gf(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:Gf(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:Gf(this._options.ignoreErrors||[],t.ignoreErrors||[],op),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,o=e.value,i=void 0===o?"":o;return[""+i,r+": "+i]}catch(e){return Pd.error("Cannot extract message for event "+Ad(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return Pd.error("Cannot extract url for event "+Ad(t)),null}},t.id="InboundFilters",t}(),sp="?",lp=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ap=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,cp=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,up=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,dp=/\((\S*)(?::(\d+))(?::(\d+))\)/,fp=/Minified React error #\d+;/i;function pp(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:fp.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=t.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),s=[],l=0;l<i.length;l+=2){var a=null;(e=r.exec(i[l]))?a={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=o.exec(i[l]))&&(a={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),a&&(!a.func&&a.line&&(a.func=sp),s.push(a))}if(!s.length)return null;return{message:hp(t),name:t.name,stack:s}}(t))return mp(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,o=[],i=t.stack.split("\n"),s=0;s<i.length;++s){if(n=lp.exec(i[s])){var l=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=dp.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]);var a=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],c=n[1]||sp,u=-1!==c.indexOf("safari-extension"),d=-1!==c.indexOf("safari-web-extension");(u||d)&&(c=-1!==c.indexOf("@")?c.split("@")[0]:sp,a=u?"safari-extension:"+a:"safari-web-extension:"+a),r={url:a,func:c,args:l?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=cp.exec(i[s]))r={url:n[2],func:n[1]||sp,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=ap.exec(i[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=up.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==s||n[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||sp,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=sp),o.push(r)}if(!o.length)return null;return{message:hp(t),name:t.name,stack:o}}(t))return mp(e,n)}catch(t){}return{message:hp(t),name:t&&t.name,stack:[],failed:!0}}function mp(t,e){try{return Yu(Yu({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function hp(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function gp(t){var e=_p(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function yp(t){return{exception:{values:[gp(t)]}}}function _p(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function vp(t,e,n){var r,o;if(void 0===n&&(n={}),od(t)&&t.error)return r=yp(pp(t=t.error));if(id(t)||(o=t,"[object DOMException]"===Object.prototype.toString.call(o))){var i=t,s=i.name||(id(i)?"DOMError":"DOMException"),l=i.message?s+": "+i.message:s;return Ld(r=$p(l,e,n),l),"code"in i&&(r.tags=Yu(Yu({},r.tags),{"DOMException.code":""+i.code})),r}return rd(t)?r=yp(pp(t)):ad(t)||cd(t)?(Dd(r=function(t,e,n){var r={exception:{values:[{type:cd(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Xd(t)}]},extra:{__serialized__:Vd(t)}};if(e){var o=_p(pp(e).stack);r.stacktrace={frames:o}}return r}(t,e,n.rejection),{synthetic:!0}),r):(Ld(r=$p(t,e,n),""+t,void 0),Dd(r,{synthetic:!0}),r)}function $p(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var o=_p(pp(e).stack);r.stacktrace={frames:o}}return r}var bp={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},xp=function(){function t(t){this.options=t,this._buffer=new vf(30),this._rateLimits={},this._api=new Ff(t.dsn,t._metadata,t.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new vd("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,r=t.headers,o=t.resolve,i=t.reject,s=zu.fromHttpCode(n.status);this._handleRateLimit(r)&&Pd.warn("Too many "+e+" requests, backing off until: "+this._disabledUntil(e)),s!==zu.Success?i(n):o({status:s})},t.prototype._disabledUntil=function(t){var e=bp[t];return this._rateLimits[e]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,n,r,o,i=Date.now(),s=t["x-sentry-rate-limits"],l=t["retry-after"];if(s){try{for(var a=Ju(s.trim().split(",")),c=a.next();!c.done;c=a.next()){var u=c.value.split(":",2),d=parseInt(u[0],10),f=1e3*(isNaN(d)?60:d);try{for(var p=(r=void 0,Ju(u[1].split(";"))),m=p.next();!m.done;m=p.next()){var h=m.value;this._rateLimits[h||"all"]=new Date(i+f)}}catch(t){r={error:t}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!0}return!!l&&(this._rateLimits.all=new Date(i+function(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}(i,l)),!0)},t}();var wp=function(t){function e(e,n){void 0===n&&(n=function(){var t,e,n=Id();if(tf(n.fetch))return n.fetch.bind(n);var r=n.document,o=n.fetch;if("function"==typeof(null===(t=r)||void 0===t?void 0:t.createElement))try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i),(null===(e=i.contentWindow)||void 0===e?void 0:e.fetch)&&(o=i.contentWindow.fetch),r.head.removeChild(i)}catch(t){Pd.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return o.bind(n)}());var r=t.call(this,e)||this;return r._fetch=n,r}return Hu(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(tp(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(Zf(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;if(this._isRateLimited(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:ef()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new _f((function(e,o){n._fetch(t.url,r).then((function(r){var i={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:t.type,response:r,headers:i,resolve:e,reject:o})})).catch(o)}))}))},e}(xp),Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hu(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(tp(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(Zf(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;return this._isRateLimited(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429}):this._buffer.add((function(){return new _f((function(e,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:t.type,response:o,headers:i,resolve:e,reject:r})}},o.open("POST",t.url),n.options.headers)n.options.headers.hasOwnProperty(i)&&o.setRequestHeader(i,n.options.headers[i]);o.send(t.body)}))}))},e}(xp),Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hu(e,t),e.prototype.eventFromException=function(t,e){return function(t,e,n){var r=vp(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return Dd(r,{handled:!0,type:"generic"}),r.level=Wu.Error,n&&n.event_id&&(r.event_id=n.event_id),_f.resolve(r)}(this._options,t,e)},e.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=Wu.Info),function(t,e,n,r){void 0===n&&(n=Wu.Info);var o=$p(e,r&&r.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),_f.resolve(o)}(this._options,t,e,n)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=Yu(Yu({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(e):Zd()?new wp(e):new Ep(e)},e}(Kf),Cp=0;function Tp(){return Cp>0}function kp(){Cp+=1,setTimeout((function(){Cp-=1}))}function Op(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var o=r.map((function(t){return Op(t,e)}));return t.handleEvent?t.handleEvent.apply(this,o):t.apply(this,o)}catch(t){throw kp(),Pf((function(n){n.addEventProcessor((function(t){var n=Yu({},t);return e.mechanism&&(Ld(n,void 0,void 0),Dd(n,e.mechanism)),n.extra=Yu(Yu({},n.extra),{arguments:r}),n})),Bf(t)})),t}};try{for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}function Ip(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new Ff(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else Pd.error("Missing dsn option in showReportDialog call");else Pd.error("Missing eventId option in showReportDialog call")}var Rp=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Yu({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(Pd.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(Pd.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(af({callback:function(n){var r=n.error,o=Nf(),i=o.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(i&&!Tp()&&!s){var l=o.getClient(),a=void 0===r&&sd(n.msg)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(vp(r||n.msg,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);Dd(a,{handled:!1,type:"onerror"}),o.captureEvent(a,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(af({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(t){}var o=Nf(),i=o.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(!i||Tp()||s)return!0;var l=o.getClient(),a=ld(r)?e._eventFromRejectionWithPrimitive(r):vp(r,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!0});a.level=Wu.Error,Dd(a,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(a,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var o,i=od(t)?t.message:t,s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2]);var l={exception:{values:[{type:o||"Error",value:i}]}};return this._enhanceEventWithInitialFrame(l,e,n,r)},t.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,i=isNaN(parseInt(n,10))?void 0:n,s=sd(e)&&e.length>0?e:function(){try{return document.location.href}catch(t){return""}}();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:i}),t},t.id="GlobalHandlers",t}(),Mp=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ap=function(){function t(e){this.name=t.id,this._options=Yu({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=Id();(this._options.setTimeout&&Gd(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Gd(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Gd(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&Gd(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Mp).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Op(r,{mechanism:{data:{function:Ud(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,Op(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ud(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=Id(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Gd(n,"addEventListener",(function(e){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Op(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:Ud(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Op(r,{mechanism:{data:{function:"addEventListener",handler:Ud(r),target:t},handled:!0,type:"instrument"}}),o)}})),Gd(n,"removeEventListener",(function(t){return function(e,n,r){var o,i=n;try{var s=null===(o=i)||void 0===o?void 0:o.__sentry_wrapped__;s&&t.call(this,e,s,r)}catch(t){}return t.call(this,e,i,r)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(t){t in r&&"function"==typeof r[t]&&Gd(r,t,(function(e){var n={mechanism:{data:{function:t,handler:Ud(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=Ud(e.__sentry_original__)),Op(e,n)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),Np=function(){function t(e){this.name=t.id,this._options=Yu({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&Nf().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Ad(t)},{event:t})},t.prototype.setupOnce=function(){var t=this;this._options.console&&af({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,Xu(e))},type:"console"}),this._options.dom&&af({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,Xu(e))},type:"dom"}),this._options.xhr&&af({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,Xu(e))},type:"xhr"}),this._options.fetch&&af({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,Xu(e))},type:"fetch"}),this._options.history&&af({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,Xu(e))},type:"history"})},t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:Wu.fromString(t.level),message:Td(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(Td(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}Nf().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{e=t.event.target?pd(t.event.target,n):pd(t.event,n)}catch(t){e="<unknown>"}0!==e.length&&Nf().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name,global:t.global})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,o=e.status_code,i=e.body;Nf().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:t.xhr,input:i})}else;},t.prototype._fetchBreadcrumb=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?Nf().addBreadcrumb({category:"fetch",data:t.fetchData,level:Wu.Error,type:"http"},{data:t.error,input:t.args}):Nf().addBreadcrumb({category:"fetch",data:Yu(Yu({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype._historyBreadcrumb=function(t){var e=Id(),n=t.from,r=t.to,o=Md(e.location.href),i=Md(n),s=Md(r);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Nf().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.id="Breadcrumbs",t}(),Lp=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){Of((function(e,n){var r=Nf().getIntegration(t);return r?r._handler(e,n):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&fd(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=Xu(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!fd(t[e],Error)||n.length+1>=this._limit)return n;var r=gp(pp(t[e]));return this._walkErrorTree(t[e],e,Xu([r],n))},t.id="LinkedErrors",t}(),Dp=Id(),jp=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Of((function(e){var n,r,o;if(Nf().getIntegration(t)){if(!Dp.navigator&&!Dp.location&&!Dp.document)return e;var i=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=Dp.location)||void 0===r?void 0:r.href),s=(Dp.document||{}).referrer,l=(Dp.navigator||{}).userAgent,a=Yu(Yu(Yu({},null===(o=e.request)||void 0===o?void 0:o.headers),s&&{Referer:s}),l&&{"User-Agent":l}),c=Yu(Yu({},i&&{url:i}),{headers:a});return Yu(Yu({},e),{request:c})}return e}))},t.id="UserAgent",t}(),qp=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n().getIntegration(t);if(r){try{if(r._shouldDropEvent(e,r._previousEvent))return null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e}))},t.prototype._shouldDropEvent=function(t,e){return!!e&&(!!this._isSameMessageEvent(t,e)||!!this._isSameExceptionEvent(t,e))},t.prototype._isSameMessageEvent=function(t,e){var n=t.message,r=e.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e))))},t.prototype._getFramesFromEvent=function(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}else if(t.stacktrace)return t.stacktrace.frames},t.prototype._isSameStacktrace=function(t,e){var n=this._getFramesFromEvent(t),r=this._getFramesFromEvent(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(t){return t.exception&&t.exception.values&&t.exception.values[0]},t.prototype._isSameExceptionEvent=function(t,e){var n=this._getExceptionFromEvent(e),r=this._getExceptionFromEvent(t);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e)))},t.prototype._isSameFingerprint=function(t,e){var n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(t){return!1}},t.id="Dedupe",t}(),Bp=function(t){function e(e){void 0===e&&(e={});return e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:np}],version:np},t.call(this,Sp,e)||this}return Hu(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),Id().document&&(this._isEnabled()?Ip(Yu(Yu({},t),{dsn:t.dsn||this.getDsn()})):Pd.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",t.prototype._prepareEvent.call(this,e,n,r)},e.prototype._sendEvent=function(e){var n=this.getIntegration(Np);n&&n.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(Yf),Pp=[new ip,new rp,new Ap,new Np,new Rp,new Lp,new qp,new jp];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Fp=function(t,e){return(Fp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Hp(t,e){function n(){this.constructor=t}Fp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Up,Gp=function(){return(Gp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Wp(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function zp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wp(arguments[e]));return t}!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(Up||(Up={})),function(t){t.fromHttpCode=function(e){if(e<400)return t.Ok;if(e>=400&&e<500)switch(e){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}}(Up||(Up={}));var Vp=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Yp(t){var e;return void 0===t&&(t=null===(e=Nf().getClient())||void 0===e?void 0:e.getOptions()),!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function Jp(t){var e,n;return void 0===t&&(t=Nf()),null===(n=null===(e=t)||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTransaction()}function Kp(t){return t/1e3}function Xp(){var t=Jp();t&&(Pd.log("[Tracing] Transaction: "+Up.InternalError+" -> Global error occured"),t.setStatus(Up.InternalError))}var Qp=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this._maxlen=t}return t.prototype.add=function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)},t}(),Zp=function(t){function e(e,n){var r=t.call(this,e)||this;return r._measurements={},r._hub=Nf(),fd(n,Rf)&&(r._hub=n),r.name=e.name||"",r.metadata=e.metadata||{},r._trimEnd=e.trimEnd,r.transaction=r,r}return Hp(e,t),e.prototype.setName=function(t){this.name=t},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new Qp(t)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(t){this._measurements=Gp({},t)},e.prototype.setMetadata=function(t){this.metadata=Gp(Gp({},this.metadata),t)},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(Pd.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var r=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==n&&t.endTimestamp})):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var o={contexts:{trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};return Object.keys(this._measurements).length>0&&(Pd.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),Pd.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(o)}Pd.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},e.prototype.toContext=function(){var e=t.prototype.toContext.call(this);return Qd(Gp(Gp({},e),{name:this.name,trimEnd:this._trimEnd}))},e.prototype.updateWithContext=function(e){var n;return t.prototype.updateWithContext.call(this,e),this.name=null!=(n=e.name)?n:"",this._trimEnd=e.trimEnd,this},e}(function(){function t(t){if(this.traceId=Rd(),this.spanId=Rd().substring(16),this.startTimestamp=Sf(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(e){var n=new t(Gp(Gp({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},t.prototype.setTag=function(t,e){var n;return this.tags=Gp(Gp({},this.tags),((n={})[t]=e,n)),this},t.prototype.setData=function(t,e){var n;return this.data=Gp(Gp({},this.data),((n={})[t]=e,n)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var e=Up.fromHttpCode(t);return e!==Up.UnknownError&&this.setStatus(e),this},t.prototype.isSuccess=function(){return this.status===Up.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:Sf()},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.toContext=function(){return Qd({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(t){var e,n,r,o,i;return this.data=null!=(e=t.data)?e:{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.startTimestamp=null!=(r=t.startTimestamp)?r:this.startTimestamp,this.status=t.status,this.tags=null!=(o=t.tags)?o:{},this.traceId=null!=(i=t.traceId)?i:this.traceId,this},t.prototype.getTraceContext=function(){return Qd({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return Qd({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}()),tm=function(t){function e(e,n,r,o){void 0===r&&(r="");var i=t.call(this,o)||this;return i._pushActivity=e,i._popActivity=n,i.transactionSpanId=r,i}return Hp(e,t),e.prototype.add=function(e){var n=this;e.spanId!==this.transactionSpanId&&(e.finish=function(t){e.endTimestamp="number"==typeof t?t:Sf(),n._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),t.prototype.add.call(this,e)},e}(Qp),em=function(t){function e(e,n,r,o){void 0===r&&(r=1e3),void 0===o&&(o=!1);var i=t.call(this,e,n)||this;return i._idleHub=n,i._idleTimeout=r,i._onScope=o,i.activities={},i._heartbeatTimer=0,i._heartbeatCounter=0,i._finished=!1,i._beforeFinishCallbacks=[],n&&o&&(nm(n),Pd.log("Setting idle transaction on scope. Span ID: "+i.spanId),n.configureScope((function(t){return t.setSpan(i)}))),i._initTimeout=setTimeout((function(){i._finished||i.finish()}),i._idleTimeout),i}return Hp(e,t),e.prototype.finish=function(e){var n,r,o=this;if(void 0===e&&(e=Sf()),this._finished=!0,this.activities={},this.spanRecorder){Pd.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._beforeFinishCallbacks),s=i.next();!s.done;s=i.next()){(0,s.value)(this,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(t){if(t.spanId===o.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus(Up.Cancelled),Pd.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));var n=t.startTimestamp<e;return n||Pd.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),Pd.log("[Tracing] flushing IdleTransaction")}else Pd.log("[Tracing] No active IdleTransaction");return this._onScope&&nm(this._idleHub),t.prototype.finish.call(this,e)},e.prototype.registerBeforeFinishCallback=function(t){this._beforeFinishCallbacks.push(t)},e.prototype.initSpanRecorder=function(t){var e=this;if(!this.spanRecorder){this.spanRecorder=new tm((function(t){e._finished||e._pushActivity(t)}),(function(t){e._finished||e._popActivity(t)}),this.spanId,t),Pd.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},e.prototype._pushActivity=function(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),Pd.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,Pd.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype._popActivity=function(t){var e=this;if(this.activities[t]&&(Pd.log("[Tracing] popActivity "+t),delete this.activities[t],Pd.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,r=Sf()+n/1e3;setTimeout((function(){e._finished||e.finish(r)}),n)}},e.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var t=Object.keys(this.activities),e=t.length?t.reduce((function(t,e){return t+e})):"";e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(Pd.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(Up.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},e.prototype._pingHeartbeat=function(){var t=this;Pd.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){t._beat()}),5e3)},e}(Zp);function nm(t){if(t){var e=t.getScope();if(e)e.getTransaction()&&e.setSpan(void 0)}}function rm(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function om(t,e,n){return Yp()?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:Vu.Explicit}}),t):("function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:Vu.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:Vu.Inheritance}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:Vu.Rate,rate:Number(r)}})),function(t){if(isNaN(t)||"number"!=typeof t&&"boolean"!=typeof t)return Pd.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1;if(t<0||t>1)return Pd.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1;return!0}(r)?r?(t.sampled=Math.random()<r,t.sampled?(Pd.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(Pd.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),t)):(Pd.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(Pd.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var r}function im(t,e){var n,r,o=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},i=new Zp(t,this);return(i=om(i,o,Gp({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&i.initSpanRecorder(null===(r=o._experiments)||void 0===r?void 0:r.maxSpans),i}var sm=Id();var lm=function(t,e,n){var r;return function(o){e.value>=0&&(o||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},am=function(t,e){return{name:t,value:null!=e?e:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},cm=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},um=function(t,e){var n=function(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},dm=-1,fm=function(){return dm<0&&(dm="hidden"===document.visibilityState?0:1/0,um((function(t){var e=t.timeStamp;dm=e}),!0)),{get firstHiddenTime(){return dm}}},pm={},mm=Id(),hm=function(){function t(){var t;this._measurements={},this._performanceCursor=0,!wd()&&(null===(t=mm)||void 0===t?void 0:t.performance)&&(mm.performance.mark&&mm.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return t.prototype.addPerformanceEntries=function(t){var e=this;if(mm&&mm.performance&&mm.performance.getEntries&&Cf){Pd.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,o,i,s,l=Kp(Cf);if(mm.document&&mm.document.scripts)for(var a=0;a<mm.document.scripts.length;a++)if("true"===mm.document.scripts[a].dataset.entry){n=mm.document.scripts[a].src;break}if(mm.performance.getEntries().slice(this._performanceCursor).forEach((function(a){var c=Kp(a.startTime),u=Kp(a.duration);if(!("navigation"===t.op&&l+c<t.startTimestamp))switch(a.entryType){case"navigation":!function(t,e,n){gm({transaction:t,entry:e,event:"unloadEvent",timeOrigin:n}),gm({transaction:t,entry:e,event:"redirect",timeOrigin:n}),gm({transaction:t,entry:e,event:"domContentLoadedEvent",timeOrigin:n}),gm({transaction:t,entry:e,event:"loadEvent",timeOrigin:n}),gm({transaction:t,entry:e,event:"connect",timeOrigin:n}),gm({transaction:t,entry:e,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),gm({transaction:t,entry:e,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),gm({transaction:t,entry:e,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(t,e,n){ym(t,{op:"browser",description:"request",startTimestamp:n+Kp(e.requestStart),endTimestamp:n+Kp(e.responseEnd)}),ym(t,{op:"browser",description:"response",startTimestamp:n+Kp(e.responseStart),endTimestamp:n+Kp(e.responseEnd)})}(t,e,n)}(t,a,l),i=l+Kp(a.responseStart),s=l+Kp(a.requestStart);break;case"mark":case"paint":case"measure":var d=function(t,e,n,r,o){var i=o+n,s=i+r;return ym(t,{description:e.name,endTimestamp:s,op:e.entryType,startTimestamp:i}),i}(t,a,c,u,l);void 0===o&&"sentry-tracing-init"===a.name&&(o=d);var f=fm(),p=a.startTime<f.firstHiddenTime;"first-paint"===a.name&&p&&(Pd.log("[Measurements] Adding FP"),e._measurements.fp={value:a.startTime},e._measurements["mark.fp"]={value:d}),"first-contentful-paint"===a.name&&p&&(Pd.log("[Measurements] Adding FCP"),e._measurements.fcp={value:a.startTime},e._measurements["mark.fcp"]={value:d});break;case"resource":var m=a.name.replace(window.location.origin,""),h=function(t,e,n,r,o,i){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var s={};"transferSize"in e&&(s["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(s["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(s["Decoded Body Size"]=e.decodedBodySize);var l=i+r,a=l+o;return ym(t,{description:n,endTimestamp:a,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:l,data:s}),a}(t,a,m,c,u,l);void 0===r&&(n||"").indexOf(m)>-1&&(r=h)}})),void 0!==r&&void 0!==o&&ym(t,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:r}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(t),"pageload"===t.op){var c=Kp(Cf);"number"==typeof i&&(Pd.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(i-t.startTimestamp)},"number"==typeof s&&s<=i&&(this._measurements["ttfb.requestTime"]={value:1e3*(i-s)})),["fcp","fp","lcp"].forEach((function(n){if(e._measurements[n]&&!(c>=t.startTimestamp)){var r=e._measurements[n].value,o=c+Kp(r),i=Math.abs(1e3*(o-t.startTimestamp)),s=i-r;Pd.log("[Measurements] Normalized "+n+" from "+r+" to "+i+" ("+s+")"),e._measurements[n].value=i}})),this._measurements["mark.fid"]&&this._measurements.fid&&ym(t,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+Kp(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,t.setMeasurements(this._measurements),this._tagMetricInfo(t)}}},t.prototype._tagMetricInfo=function(t){this._lcpEntry&&(Pd.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&t.setTag("lcp.element",pd(this._lcpEntry.element)),this._lcpEntry.id&&t.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&t.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),t.setTag("lcp.size",this._lcpEntry.size)),this._clsEntry&&this._clsEntry.sources&&(Pd.log("[Measurements] Adding CLS Data"),this._clsEntry.sources.forEach((function(e,n){return t.setTag("cls.source."+(n+1),pd(e.node))})))},t.prototype._trackCLS=function(){var t,e,n,r,o,i,s,l,a=this;t=function(t){var e=t.entries.pop();e&&(Pd.log("[Measurements] Adding CLS"),a._measurements.cls={value:t.value},a._clsEntry=e)},r=am("CLS",0),o=0,i=[],(l=cm("layout-shift",s=function(t){if(t&&!t.hadRecentInput){var e=i[0],s=i[i.length-1];o&&0!==i.length&&t.startTime-s.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,i.push(t)):(o=t.value,i=[t]),o>r.value&&(r.value=o,r.entries=i,n&&n())}}))&&(n=lm(t,r,e),um((function(){l.takeRecords().map(s),n(!0)})))},t.prototype._trackNavigator=function(t){var e=mm.navigator;if(e){var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),_m(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),_m(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),_m(e.deviceMemory)&&t.setTag("deviceMemory",String(e.deviceMemory)),_m(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}},t.prototype._trackLCP=function(){var t=this;!function(t,e){var n,r=fm(),o=am("LCP"),i=function(t){var e=t.startTime;e<r.firstHiddenTime&&(o.value=e,o.entries.push(t)),n&&n()},s=cm("largest-contentful-paint",i);if(s){n=lm(t,o,e);var l=function(){pm[o.id]||(s.takeRecords().map(i),s.disconnect(),pm[o.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,l,{once:!0,capture:!0})})),um(l,!0)}}((function(e){var n=e.entries.pop();if(n){var r=Kp(Cf),o=Kp(n.startTime);Pd.log("[Measurements] Adding LCP"),t._measurements.lcp={value:e.value},t._measurements["mark.lcp"]={value:r+o},t._lcpEntry=n}}))},t.prototype._trackFID=function(){var t,e,n,r,o,i,s,l=this;t=function(t){var e=t.entries.pop();if(e){var n=Kp(Cf),r=Kp(e.startTime);Pd.log("[Measurements] Adding FID"),l._measurements.fid={value:t.value},l._measurements["mark.fid"]={value:n+r}}},r=fm(),o=am("FID"),(s=cm("first-input",i=function(t){n&&t.startTime<r.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),n(!0))}))&&(n=lm(t,o,e),um((function(){s.takeRecords().map(i),s.disconnect()}),!0))},t}();function gm(t){var e=t.transaction,n=t.entry,r=t.event,o=t.timeOrigin,i=t.eventEnd,s=t.description,l=i?n[i]:n[r+"End"],a=n[r+"Start"];a&&l&&ym(e,{op:"browser",description:null!=s?s:r,startTimestamp:o+Kp(a),endTimestamp:o+Kp(l)})}function ym(t,e){var n=e.startTimestamp,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(Gp({startTimestamp:n},r))}function _m(t){return"number"==typeof t&&isFinite(t)}var vm={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function $m(t){var e=Gp(Gp({},vm),t),n=e.traceFetch,r=e.traceXHR,o=e.tracingOrigins,i=e.shouldCreateSpanForRequest,s={},l=function(t){if(s[t])return s[t];var e=o;return s[t]=e.some((function(e){return kd(t,e)}))&&!kd(t,"sentry_key"),s[t]},a=l;"function"==typeof i&&(a=function(t){return l(t)&&i(t)});var c={};n&&af({callback:function(t){!function(t,e,n){if(!Yp()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp&&t.fetchData.__span){return void((o=n[t.fetchData.__span])&&(t.response?o.setHttpStatus(t.response.status):t.error&&o.setStatus(Up.InternalError),o.finish(),delete n[t.fetchData.__span]))}var r=Jp();if(r){var o=r.startChild({data:Gp(Gp({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http.client"});t.fetchData.__span=o.spanId,n[o.spanId]=o;var i=t.args[0]=t.args[0],s=t.args[1]=t.args[1]||{},l=s.headers;fd(i,Request)&&(l=i.headers),l?"function"==typeof l.append?l.append("sentry-trace",o.toTraceparent()):l=Array.isArray(l)?zp(l,[["sentry-trace",o.toTraceparent()]]):Gp(Gp({},l),{"sentry-trace":o.toTraceparent()}):l={"sentry-trace":o.toTraceparent()},s.headers=l}}(t,a,c)},type:"fetch"}),r&&af({callback:function(t){!function(t,e,n){var r,o;if(!Yp()||(null===(r=t.xhr)||void 0===r?void 0:r.__sentry_own_request__)||!(null===(o=t.xhr)||void 0===o?void 0:o.__sentry_xhr__)||!e(t.xhr.__sentry_xhr__.url))return;var i=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){return void((l=n[t.xhr.__sentry_xhr_span_id__])&&(l.setHttpStatus(i.status_code),l.finish(),delete n[t.xhr.__sentry_xhr_span_id__]))}var s=Jp();if(s){var l=s.startChild({data:Gp(Gp({},i.data),{type:"xhr",method:i.method,url:i.url}),description:i.method+" "+i.url,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=l.spanId,n[t.xhr.__sentry_xhr_span_id__]=l,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",l.toTraceparent())}catch(t){}}}(t,a,c)},type:"xhr"})}var bm=Id();var xm=Gp({idleTimeout:1e3,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),bm&&bm.location){var r,o=bm.location.href;e&&(r=t({name:bm.location.pathname,op:"pageload"})),n&&af({callback:function(e){var n=e.to,i=e.from;void 0===i&&o&&-1!==o.indexOf(n)?o=void 0:i!==n&&(o=void 0,r&&(Pd.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=t({name:bm.location.pathname,op:"navigation"}))},type:"history"})}else Pd.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},vm),wm=function(){function t(e){this.name=t.id,this._metrics=new hm,this._emitOptionsWarning=!1;var n=vm.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&0!==e.tracingOrigins.length?n=e.tracingOrigins:this._emitOptionsWarning=!0,this.options=Gp(Gp(Gp({},xm),e),{tracingOrigins:n})}return t.prototype.setupOnce=function(t,e){var n=this;this._getCurrentHub=e,this._emitOptionsWarning&&(Pd.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),Pd.warn("[Tracing] We added a reasonable default for you: "+vm.tracingOrigins));var r=this.options,o=r.routingInstrumentation,i=r.startTransactionOnLocationChange,s=r.startTransactionOnPageLoad,l=r.markBackgroundTransactions,a=r.traceFetch,c=r.traceXHR,u=r.tracingOrigins,d=r.shouldCreateSpanForRequest;o((function(t){return n._createRouteTransaction(t)}),s,i),l&&(sm&&sm.document?sm.document.addEventListener("visibilitychange",(function(){var t=Jp();sm.document.hidden&&t&&(Pd.log("[Tracing] Transaction: "+Up.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(Up.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())})):Pd.warn("[Tracing] Could not set up background tab detection due to lack of global document")),$m({traceFetch:a,traceXHR:c,tracingOrigins:u,shouldCreateSpanForRequest:d})},t.prototype._createRouteTransaction=function(t){var e=this;if(this._getCurrentHub){var n=this.options,r=n.beforeNavigate,o=n.idleTimeout,i=n.maxTransactionDuration,s="pageload"===t.op?function(){var t=(e="sentry-trace",n=document.querySelector("meta[name="+e+"]"),n?n.getAttribute("content"):null);var e,n;if(t)return function(t){var e=t.match(Vp);if(e){var n=void 0;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}}(t);return}():void 0,l=Gp(Gp(Gp({},t),s),{trimEnd:!0}),a="function"==typeof r?r(l):l,c=void 0===a?Gp(Gp({},l),{sampled:!1}):a;!1===c.sampled&&Pd.log("[Tracing] Will not send "+c.op+" transaction because of beforeNavigate."),Pd.log("[Tracing] Starting "+c.op+" transaction on scope");var u=function(t,e,n,r,o){var i,s,l=(null===(i=t.getClient())||void 0===i?void 0:i.getOptions())||{},a=new em(e,t,n,r);return(a=om(a,l,Gp({parentSampled:e.parentSampled,transactionContext:e},o))).sampled&&a.initSpanRecorder(null===(s=l._experiments)||void 0===s?void 0:s.maxSpans),a}(this._getCurrentHub(),c,o,!0,{location:Id().location});return u.registerBeforeFinishCallback((function(t,n){e._metrics.addPerformanceEntries(t),function(t,e,n){var r=n-e.startTimestamp;n&&(r>t||r<0)&&(e.setStatus(Up.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}(1e3*i,t,n)})),u}Pd.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.")},t.id="BrowserTracing",t}();var Em=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return t.prototype.setupOnce=function(){this._router?function(t,e){void 0===e&&(e=[]);e.forEach((function(e){return function(t,e){var n=t[e];return t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.call.apply(n,zp([this],Cm(t,e)))},t}(t,e)}))}(this._router,this._methods):Pd.error("ExpressIntegration is missing an Express instance")},t.id="Express",t}();function Sm(t,e){var n=t.length;switch(n){case 2:return function(n,r){var o=r.__sentry_transaction;if(o){var i=o.startChild({description:t.name,op:"middleware."+e});r.once("finish",(function(){i.finish()}))}return t.call(this,n,r)};case 3:return function(n,r,o){var i,s=null===(i=r.__sentry_transaction)||void 0===i?void 0:i.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=s)||void 0===t||t.finish(),o.call.apply(o,zp([this],e))}))};case 4:return function(n,r,o,i){var s,l=null===(s=o.__sentry_transaction)||void 0===s?void 0:s.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,o,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=l)||void 0===t||t.finish(),i.call.apply(i,zp([this],e))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function Cm(t,e){return t.map((function(t){return"function"==typeof t?Sm(t,e):Array.isArray(t)?t.map((function(t){return"function"==typeof t?Sm(t,e):t})):t}))}var Tm,km=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=Sd("pg");n?Gd(n.Client.prototype,"query",(function(t){return function(n,r,o){var i,s,l,a=null===(s=null===(i=e().getScope())||void 0===i?void 0:i.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.text,op:"db"});if("function"==typeof o)return t.call(this,n,r,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),o(t,e)}));if("function"==typeof r)return t.call(this,n,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),r(t,e)}));var c=void 0!==r?t.call(this,n,r):t.call(this,n);return dd(c)?c.then((function(t){var e;return null===(e=a)||void 0===e||e.finish(),t})):(null===(l=a)||void 0===l||l.finish(),c)}})):Pd.error("Postgres Integration was unable to require `pg` package.")},t.id="Postgres",t}(),Om=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=Sd("mysql/lib/Connection.js");n?Gd(n,"createQuery",(function(t){return function(n,r,o){var i,s,l=null===(s=null===(i=e().getScope())||void 0===i?void 0:i.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof o?t.call(this,n,r,(function(t,e,n){var r;null===(r=l)||void 0===r||r.finish(),o(t,e,n)})):"function"==typeof r?t.call(this,n,(function(t,e,n){var o;null===(o=l)||void 0===o||o.finish(),r(t,e,n)})):t.call(this,n,r,o)}})):Pd.error("Mysql Integration was unable to require `mysql` package.")},t.id="Mysql",t}(),Im=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Rm={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},Mm=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._operations=Array.isArray(e.operations)?e.operations:Im,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}return t.prototype.setupOnce=function(t,e){var n=this._useMongoose?"mongoose":"mongodb",r=Sd(n);r?this._instrumentOperations(r.Collection,this._operations,e):Pd.error("Mongo Integration was unable to require `"+n+"` package.")},t.prototype._instrumentOperations=function(t,e,n){var r=this;e.forEach((function(e){return r._patchOperation(t,e,n)}))},t.prototype._patchOperation=function(t,e,n){if(e in t.prototype){var r=this._getSpanContextFromOperationArguments.bind(this);Gd(t.prototype,e,(function(t){return function(){for(var o,i,s,l,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=a[a.length-1],d=n().getScope(),f=null===(o=d)||void 0===o?void 0:o.getSpan();if("function"!=typeof u||"mapReduce"===e&&2===a.length){var p=null===(i=f)||void 0===i?void 0:i.startChild(r(this,e,a)),m=t.call.apply(t,zp([this],a));return dd(m)?m.then((function(t){var e;return null===(e=p)||void 0===e||e.finish(),t})):(null===(s=p)||void 0===s||s.finish(),m)}var h=null===(l=f)||void 0===l?void 0:l.startChild(r(this,e,a.slice(0,-1)));return t.call.apply(t,zp([this],a.slice(0,-1),[function(t,e){var n;null===(n=h)||void 0===n||n.finish(),u(t,e)}]))}}))}},t.prototype._getSpanContextFromOperationArguments=function(t,e,n){var r={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},o={op:"db",description:e,data:r},i=Rm[e],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!i||!s)return o;try{if("mapReduce"===e){var l=Wp(n,2),a=l[0],c=l[1];r[i[0]]="string"==typeof a?a:a.name||"<anonymous>",r[i[1]]="string"==typeof c?c:c.name||"<anonymous>"}else for(var u=0;u<i.length;u++)r[i[u]]=JSON.stringify(n[u])}catch(t){}return o},t.id="Mongo",t}(),Am=Gp(Gp({},Object.freeze({__proto__:null,Express:Em,Postgres:km,Mysql:Om,Mongo:Mm})),{BrowserTracing:wm});function Nm(){new Pu({target:document.body})}(Tm=Mf()).__SENTRY__&&(Tm.__SENTRY__.extensions=Tm.__SENTRY__.extensions||{},Tm.__SENTRY__.extensions.startTransaction||(Tm.__SENTRY__.extensions.startTransaction=im),Tm.__SENTRY__.extensions.traceHeaders||(Tm.__SENTRY__.extensions.traceHeaders=rm)),wd()&&function(){var t=Mf();if(t.__SENTRY__){var e={mongodb:function(){return new(Ed(module,"./integrations/mongo").Mongo)},mongoose:function(){return new(Ed(module,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(Ed(module,"./integrations/mysql").Mysql)},pg:function(){return new(Ed(module,"./integrations/postgres").Postgres)}},n=Object.keys(e).filter((function(t){return!!Sd(t)})).map((function(t){try{return e[t]()}catch(t){return}})).filter((function(t){return t}));n.length>0&&(t.__SENTRY__.integrations=zp(t.__SENTRY__.integrations||[],n))}}(),af({callback:Xp,type:"error"}),af({callback:Xp,type:"unhandledrejection"}),"localhost"!==location.hostname&&function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Pp),void 0===t.release){var e=Id();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),function(t,e){var n;!0===e.debug&&Pd.enable();var r=Nf();null===(n=r.getScope())||void 0===n||n.update(e.initialScope);var o=new t(e);r.bindClient(o)}(Bp,t),t.autoSessionTracking&&function(){if(void 0===Id().document)return void Pd.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var t=Nf();if("function"!=typeof t.startSession||"function"!=typeof t.captureSession)return;t.startSession({ignoreDuration:!0}),t.captureSession(),af({callback:function(e){var n=e.from,r=e.to;void 0!==n&&n!==r&&(t.startSession({ignoreDuration:!0}),t.captureSession())},type:"history"})}()}({dsn:"https://e7e132477a2844118b8f6d045a507e10@o318291.ingest.sentry.io/5665093",integrations:[new Am.BrowserTracing],tracesSampleRate:.2}),"serviceWorker"in navigator?(navigator.serviceWorker.register("service-worker.js").catch((t=>{console.log("ServiceWorker registration failed: ",t)})),navigator.serviceWorker.ready.then(Nm,Nm)):Nm()}();
//# sourceMappingURL=bundle.js.map
